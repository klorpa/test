;=============================================================================
;日記帳.exe_rev0205_オートフィルタ―機能
;=============================================================================
;
; 注意点	フィルタリングの判定にPREREQUISITE_DUNGEON_??関数を使ってるから、
;			デバッグモードだとうまく動かないよ。
;
; DIARY_DUNGEON_FILTER_FILTER_MAIN関数		探索可能な全てのダンジョンについて、
;									日記帳exeでクリア済みと判定されるもののフィルターを全てオンにする。
; 
; DIARY_DUNGEON_FILTER_FILTER_ALLON関数	探索可能な全てのダンジョンについてフィルターを全てオンにする。
; DIARY_DUNGEON_FILTER_FILTER_ALLOFF関数	探索可能な全てのダンジョンについてフィルターを全てオフにする。
; 
;--------------------------------------------------
;メイン
;--------------------------------------------------
;FLAG:217はダンジョンフィルタ1,1-63
;FLAG:218はダンジョンフィルタ2,1-63

@DIARY_DUNGEON_FILTER_MAIN
#LOCALSIZE 200
LOCAL:99 = 0
FOR LOCAL, 0, 99
	TRYCCALLFORM PREREQUISITE_DUNGEON_{LOCAL}
	;ダンジョン出現関数のTRYCALL
		IF RESULT == 1
		;ダンジョン出現関数の結果が返ってきたらそれが1かどうか見る
			TRYCCALLFORM DIARY_DUNGEON_FILTER_{LOCAL}
			;DIARY_DUNGEON_FILTER_関数のTRYCALL
				IF RESULT == 1
				;DIARY_DUNGEON_FILTER_関数の結果が返ってきたらそれが1かどうか見る
				;1ならフィルターをオンにする処理をかける
					IF LOCAL <= 63
						SETBIT FLAG:217,(LOCAL)
					ELSE
						SETBIT FLAG:218,(LOCAL - 64)
					ENDIF
				ENDIF
			CATCH
			;DIARY_DUNGEON_FILTER_関数のTRYCALL通らなかった場合は何もしない
			ENDCATCH
			LOCAL:99++
		ENDIF
	CATCH
	;ダンジョン出現関数のTRYCALLが通らなかった場合は何もしない
	ENDCATCH
NEXT

;
@DIARY_DUNGEON_FILTER_ALLON
#LOCALSIZE 200
LOCAL:99 = 0
FOR LOCAL, 0, 99
	TRYCCALLFORM PREREQUISITE_DUNGEON_{LOCAL}
		IF RESULT == 1
			LOCAL:1 = 0
			IF LOCAL <= 63
				SETBIT FLAG:217,(LOCAL)
			ELSE
				SETBIT FLAG:218,(LOCAL - 64)
			ENDIF
			LOCAL:99++
		ENDIF
	CATCH
	ENDCATCH
NEXT

@DIARY_DUNGEON_FILTER_ALLOFF
#LOCALSIZE 200
LOCAL:99 = 0
FOR LOCAL, 0, 99
	TRYCCALLFORM PREREQUISITE_DUNGEON_{LOCAL}
		IF RESULT == 1
			LOCAL:1 = 0
			IF LOCAL <= 63
				CLEARBIT FLAG:217,(LOCAL)
			ELSE
				CLEARBIT FLAG:218,(LOCAL - 64)
			ENDIF
			LOCAL:99++
		ENDIF
	CATCH
	ENDCATCH
NEXT


;--------------------------------------------------
;ダンジョンごとのDIARY関数の記述
;--------------------------------------------------

;--------------------------------------------------
;0,サンプルダンジョン,DEBUG
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_0
;出現フラグのチェック　デバッグモードでしか出ません
IF FLAG:DEBUG == 1
	;クリアフラグのチェック
	IF FLAG:DEBUG == 1
		RETURN 1
		;PRINTLC [ 0] サンプルダンジョン
		;RESETCOLOR
	ENDIF
	;サンプルダンジョンについて出現してない場合は[?]を表示しない
ENDIF

;--------------------------------------------------
;1,エコービル,,,無条件,,,,ダンジョンフラグ:1:1 = 1,,,
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_1
;出現フラグのチェック　エコービルは無条件
;IF FLAG:DEBUG == 1
	;クリアフラグのチェック
	IF ダンジョンフラグ:1:1 == 1
		;クリア済み
		RETURN 1
		;PRINTLC [ 1] エコービル
		;RESETCOLOR
	ELSE
		;出現しているが未クリア
		;PRINTLC [ 1] エコービル
	ENDIF
;ENDIF

;--------------------------------------------------
;2,軽子坂高校,,,依頼フラグ:2:0 == 1,依頼フラグ:3:0 == 1,ダンジョンフラグ:7:1,,ダンジョンフラグ:2:11 = 1,,,
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_2
;出現フラグのチェック　出現フラグを満たしているorクリアフラグを立てている
IF 依頼フラグ:2:0 == 1 && 依頼フラグ:3:0 == 1 || ダンジョンフラグ:2:12 == 1
	;出現している
	;クリアフラグのチェック
	;ダンジョン7をクリアしていない　を満たしてもクリア扱いに
	IF ダンジョンフラグ:2:12 == 1 || ダンジョンフラグ:7:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [ 2] 軽子坂高校
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ 2] 軽子坂高校
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ 2] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;3,新宿衛生病院
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_3
;出現フラグのチェック　エコービルクリアが条件
IF ダンジョンフラグ:1:1 != 0
	;出現している
	;クリアフラグのチェック
	;私家版だとユキジョロウ陥落ルート(3:1 == 2)が追加
	IF ダンジョンフラグ:3:1 >= 1
	;クリア済み
		RETURN 1
		;PRINTLC [ 3] 新宿衛生病院
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ 3] 新宿衛生病院
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ 3] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;4,精神世界,フラグがそれぞれ２通り
;精神世界
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_4
;出現フラグのチェック　百合の花ルートか直哉ルートのどっちかが5以上
IF FLAG:百合の花ルート >= 5 || FLAG:直哉ルート >= 5
	;出現している
	;クリアフラグのチェック　ルートのどっちかが6以上
	IF  FLAG:百合の花ルート >= 6 || FLAG:直哉ルート >= 6
	;クリア済み
		RETURN 1
		;PRINTLC [ 4] 精神世界
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ 4] 精神世界
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ 4] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;5,大魔宮,備考,出現フラグ,クリアフラグ
;サンプルスクリプト
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_5
;出現フラグのチェック　大魔宮への誘いクリア
IF イベントフラグ:3:0 == 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:3:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [ s] ダンジョンの名前
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ s] ダンジョンの名前
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ 5] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;6,コロシアムダンジョン,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_6
;出現フラグのチェック
;私家版対応済み
IF 闘技場フラグ:19:0 != 0
	;出現している
	;クリアフラグのチェック　ダンジョン・マッチに勝利済み
	IF ダンジョンフラグ:6:0 == 2
	;クリア済み
		RETURN 1
		;PRINTLC [ 6] コロシアムダンジョン
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ 6] コロシアムダンジョン
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ 6] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;7,軽子坂上層,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_7
;出現フラグのチェック　クリアすると消えるタイプのダンジョン
IF イベントフラグ:2:0 == 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:7:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [ 7] 軽子坂上層
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ 7] 軽子坂上層
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ 7] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;8,警視庁
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_8
;出現フラグのチェック　レベル30以上でした
IF BASE:MASTER:LV > 30
	;出現している
	;クリアフラグのチェック　クリアもしくはレベル上限突破
	IF ダンジョンフラグ:8:12 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [ 8] 警視庁
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ 8] 警視庁
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ 8] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;9,御影町地下鉄駅,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_9
;出現フラグのチェック　エコービルクリア
IF ダンジョンフラグ:1:1 == 1 || CFLAG:MASTER:72 == 21
	;出現している
	;クリアフラグのチェック
	;P1ルートクリア,プラズマウォール消失.このダンジョンクリア、のいずれかでクリアと見なす
	IF ダンジョンフラグ:11:7 == 1 || イベントフラグ:24:0 != 0 || ダンジョンフラグ:9:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [ 9] 御影町地下鉄駅
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ 9] 御影町地下鉄駅
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ 9] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;10,SEBECビル,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_10
;出現フラグのチェック　クリアすると消えるタイプ
IF ダンジョンフラグ:9:1 == 1
	;出現している
	;クリアフラグのチェック　クリアフラグが消滅フラグを兼ねている
	IF ダンジョンフラグ:10:9 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [10] SEBECビル
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [10] SEBECビル
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [10] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;11,デヴァ・ユガ,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_11
;出現フラグのチェック　クリアしたら消えるタイプ
IF ダンジョンフラグ:10:9 == 1
	;出現している
	;クリアフラグのチェック　分岐型なので0以外
	IF ダンジョンフラグ:11:7 != 0
	;クリア済み
		RETURN 1
		;PRINTLC [11] デヴァ・ユガ
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [11] デヴァ・ユガ
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [11] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;12,迷いの森,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_12
;出現フラグのチェック　クリアすると消えるタイプ
IF (ダンジョンフラグ:11:7 == 2 && GETCHARA([[キャラ:麻希]], 0) != -1) || ダンジョンフラグ:12:0 == 10
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:12:0 == 10
	;クリア済み
		RETURN 1
		;PRINTLC [12] 迷いの森
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [12] 迷いの森
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [12] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;16,渋谷センター街,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_16
;出現フラグのチェック　クリアすると消えるタイプ
IF 闘技場フラグ:13:0 == 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:16:14 != 0
	;クリア済み
		RETURN 1
		;PRINTLC [16] 渋谷センター街
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [16] 渋谷センター街
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [16] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;17,池袋,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_17
;出現フラグのチェック　渋谷クリアが条件
IF ダンジョンフラグ:16:14 != 0
	;出現している
	;クリアフラグのチェック　水晶のピラー入手をとりあえずクリアに
	IF ダンジョンフラグ:17:13 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [17] 池袋
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [17] 池袋
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [17] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;18,上野,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_18
;出現フラグのチェック　クリアすると消えるタイプ
IF ダンジョンフラグ:17:13 == 1
	;出現している
	;クリアフラグのチェック　木星のピラー入手をとりあえずクリアに
	IF ダンジョンフラグ:18:22 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [18] 上野
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [18] 上野
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [18] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;19,アラヤの岩戸,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_19
;出現フラグのチェック　クリアすると消えるタイプ
;キャラ存在判定があるので、クリア済み条件を出現条件としてもＯＲで使う
IF (ダンジョンフラグ:12:1 == 1 && GETCHARA([[キャラ:麻希]]) >= 0) || ダンジョンフラグ:19:1 != 0
	;出現している
	;クリアフラグのチェック　結末に関係なく、何らかのクリアフラグがあればクリア
	IF ダンジョンフラグ:19:1 != 0
	;クリア済み
		RETURN 1
		;PRINTLC [19] アラヤの岩戸
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [19] アラヤの岩戸
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [19] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;20,ギンザ大地下道,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_20
;出現フラグのチェック　ユズ撃破
IF 闘技場フラグ:5:0 == 1
	;出現している
	;クリアフラグのチェック　ギンザのクリアフラグも判別が難しい
	;IF ダンジョンフラグ:3:1 == 1
	;クリア済み
	;	RETURN 1
	;	;PRINTLC [20] ギンザ大地下道
	;	;RESETCOLOR
	;ELSE
	;出現しているが未クリア
		;PRINTLC [20] ギンザ大地下道
	;ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [20] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;24,図書館,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_24
;出現フラグのチェック　エコービルクリアor初台シェルタークリアor原宿クリア クリアすると消えるタイプ
IF ダンジョンフラグ:1:1 == 1 || ダンジョンフラグ:34:8 == 1 || ダンジョンフラグ:61:0 == 5
	;出現している
	;クリアフラグのチェック　フグルマ撃破
	IF ダンジョンフラグ:24:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [24] 図書館
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [24] 図書館
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [24] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;25,旧皇居,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_25
;出現フラグのチェック　闘技場1クリア
IF 闘技場フラグ:1:0 != 0
	;出現している
	;クリアフラグのチェック　イザナミ撃破
	IF ダンジョンフラグ:25:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [25] 旧皇居
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [25] 旧皇居
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [25] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;26,都庁,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_26
;出現フラグのチェック　衛星病院クリア
IF ダンジョンフラグ:3:1 != 0
	;出現している
	;クリアフラグのチェック　かなり複雑なので後回し
	IF ダンジョンフラグ:26:2 >= 4
	;クリア済み
		RETURN 1
		;PRINTLC [26] 都庁
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [26] 都庁
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [26] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;28,ファクトリー,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_28
;出現フラグのチェック　情報の有無
IF ダンジョンフラグ:[[ダンジョン:ファクトリー]]:0 == 1
	;出現している
	;クリアフラグのチェック
	;菊枝救出済みならクリアと見なす
	;依頼の失敗もしくは拒否もクリアと見なす
	IF ダンジョンフラグ:[[ダンジョン:ファクトリー]]:5 == -1 || ダンジョンフラグ:[[ダンジョン:ファクトリー]]:0 == -1
	;クリア済み
		RETURN 1
		;PRINTLC [28] ファクトリー
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [28] ファクトリー
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [28] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;29,赤坂,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_29
;出現フラグのチェック　情報の有無
IF ダンジョンフラグ:[[ダンジョン:赤坂]]:0 == 1
	;出現している
	;クリアフラグのチェック
	;ヒルコに何らかのコンタクトが取れていればクリアと見なす
	;ドラウプニル関連が私家版で実装されているが、ここでは判定対象にしない
	IF ダンジョンフラグ:[[ダンジョン:赤坂]]:1 != 0
	;クリア済み
		RETURN 1
		;PRINTLC [29] 赤坂
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [29] 赤坂
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [29] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;30,異端収容所,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_30
;出現フラグのチェック　クリアすると消える　フラグが数値的に管理されている
IF 依頼フラグ:70:0 >= 6
	;出現している
	;クリアフラグのチェック
	IF 依頼フラグ:70:0 >= 7
	;クリア済み
		RETURN 1
		;PRINTLC [30] 異端収容所
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [30] 異端収容所
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [30] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;31,六本木大歓楽街
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_31
;出現フラグのチェック　時間条件しかないので実質なし
;IF 依頼フラグ:70:0 >= 6
	;出現している
	;クリアフラグのチェック
	;一応突入済みならクリアとする
	;ただ、こういうデパート系のダンジョンは扱いが難しいので実装対象外とする
	;関数を呼び出さない形で対応
	IF イベントフラグ:70:0 > 5 && ダンジョンフラグ:31:0 == 3
	;クリア済み
		RETURN 1
		;PRINTLC [31] 六本木大歓楽街
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [31] 六本木大歓楽街
	ENDIF
;ELSE
;出現していない
;	;SETCOLOR COLOR("gray")
;	;PRINTLC [31] ???
;	;RESETCOLOR
;ENDIF


;--------------------------------------------------
;33,ゾウシガヤ霊園,クリア条件複雑,ダンジョンフラグ:1:1 == 1,不明
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_33
;出現フラグのチェック　エコービルクリア後
IF ダンジョンフラグ:1:1 == 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:1:1 != 1
	;クリア済み
		RETURN 1
		;PRINTLC [33] ゾウシガヤ霊園
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [33] ゾウシガヤ霊園
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [33] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;34,初台シェルター
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_34
;出現フラグのチェック　無条件
;IF ダンジョンフラグ:1:1 == 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:34:8 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [34] 初台シェルター
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [34] 初台シェルター
	ENDIF
;ELSE
;出現していない
;	;SETCOLOR COLOR("gray")
;	;PRINTLC [33] ???
;	;RESETCOLOR
;ENDIF

;--------------------------------------------------
;35,T.D.L.,
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_35
;出現フラグのチェック　
IF ダンジョンフラグ:[[ダンジョン:T.D.L.]]:0
	;出現している
	;クリアフラグのチェック　マルチエンディングかつ報告が必要なタイプ
	;複雑なんで自信が無いけど多少はね
	;エキドナに協力し、カテドラル侵攻受諾フラグを立てた場合、クリア
	;エキドナを倒した場合、クリア
	IF ダンジョンフラグ:[[ダンジョン:T.D.L.]]:1 == 4 || ダンジョンフラグ:[[ダンジョン:T.D.L.]]:1 == -1
	;クリア済み
		RETURN 1
		;PRINTLC [35] T.D.L.
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [35] T.D.L.
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [35] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;36,原宿シェルター
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_36
;出現フラグのチェック　キャラチェックがあるタイプ
;イベントフラグでルート管理をしている 0でも99でもなく、かつキャラがいることが条件
;クリアフラグはダンジョンフラグでも立ててくれているのでそちらを使う
IF (イベントフラグ:70:0 != 0 && イベントフラグ:70:0 != 99 && (FINDCHARA_B(4761,0) == 2)) || ダンジョンフラグ:36:1 == 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:36:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [36] 原宿シェルター
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [36] 原宿シェルター
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [36] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;37,シャンシャンシティ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_37
;出現フラグのチェック　キャラチェックがあるタイプ
;イベントフラグでルート管理をしている 2以上かつ99でない かつキャラがいることが条件
;クリアフラグはダンジョンフラグでも立ててくれているのでそちらを使う
IF (イベントフラグ:70:0 >= 2 && イベントフラグ:70:0 != 99 && (FINDCHARA_B(4761,0) == 2)) || ダンジョンフラグ:37:1 == 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:37:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [37] シャンシャンシティ
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [37] シャンシャンシティ
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [37] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;38,御茶ノ水シェルター
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_38
;出現フラグのチェック　
IF イベントフラグ:70:1 == 1 || イベントフラグ:70:1 >= 2
	;出現している
	;クリアフラグのチェック イベントで管理
	IF イベントフラグ:70:1 >= 2
	;クリア済み
		RETURN 1
		;PRINTLC [38] 御茶ノ水シェルター
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [38] 御茶ノ水シェルター
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [38] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;39,黄泉
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_39
;出現フラグのチェック　キャラチェックがあるタイプ
;イベントフラグでルート管理をしている 7以上かつ99でない かつキャラがいることが条件
;クリアフラグはダンジョンフラグでも立ててくれているのでそちらを使う
IF  (イベントフラグ:70:0 >= 7 && イベントフラグ:70:0 != 99 && (FINDCHARA_B(4761,0) == 2)) || ダンジョンフラグ:39:1 == 1
	;出現している
	;クリアフラグのチェック デカラビア撃破
	IF ダンジョンフラグ:39:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [39] 黄泉
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [39] 黄泉
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [39] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;40,市ヶ谷駐屯地
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_40
;出現フラグのチェック　マヨーネ様からの依頼を受けている、マヨーネ様を手に入れている
IF イベントフラグ:8:0 == 1 || イベントフラグ:8:0 == 3 || イベントフラグ:1:0 == 3
	;出現している
	;クリアフラグのチェック 
	IF ダンジョンフラグ:40:23 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [40] 市ヶ谷駐屯地
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [40] 市ヶ谷駐屯地
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [40] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;41,(某国大使館)アメリカ大使館
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_41
;出現フラグのチェック　マヨーネ様からの依頼、マヨーネ様を手に入れている
IF イベントフラグ:8:0 == 3 || イベントフラグ:8:0 == 3 || イベントフラグ:1:0 == 3
	;出現している
	;クリアフラグのチェック 
	IF ダンジョンフラグ:41:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [41] アメリカ大使館
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [41] アメリカ大使館
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [41] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;42,新宿,
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_42
;出現フラグのチェック　新宿衛生病院クリア
IF ダンジョンフラグ:3:1 == 1
	;出現している
	;クリアフラグのチェック
	;暫定的に各ルートの4以上
	IF FLAG:百合の花ルート >= 4 || FLAG:直哉ルート >= 4
	;クリア済み
		RETURN 1
		;PRINTLC [42] 新宿
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [42] 新宿
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [41] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;43,貪欲界
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_43
;出現フラグのチェック　
IF (イベントフラグ:2:0 == 1 && BASE:MASTER:LV > 30) || ダンジョンフラグ:43:0 == 1
	;出現している
	;クリアフラグのチェック チェフェイ撃破
	IF ダンジョンフラグ:43:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [43] 貪欲界
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [43] 貪欲界
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [43] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;44,ハザマの精神世界（ボクのおちんちんらんど）
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_44
;出現フラグのチェック　本来は周回すると消えるタイプだが、周回プレイだと消えない
;初回レイコPT内、軽子坂上層クリア、貪欲界クリアが条件
;クリア済み
;もしくは未クリアで諸条件を満たしレイコがPT内にいる場合のみ表示
IF ダンジョンフラグ:44:0 == 1 || (FINDCHARA_B(4508) == 2 && ダンジョンフラグ:7:1 == 1 && ダンジョンフラグ:43:0 == 1 && ダンジョンフラグ:44:0 == 0)
	;出現している
	;クリアフラグのチェック ハザマ撃破
	IF ダンジョンフラグ:44:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [44] ハザマの精神世界
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [44] ハザマの精神世界
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [44] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;45,六本木
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_45
;出現フラグのチェック　
IF ダンジョンフラグ:18:22 == 1 || ダンジョンフラグ:45:0 >= 1
	;出現している
	;クリアフラグのチェック ピラー入手
	;迷ったけどピラーとアリスを両方入手でクリア扱いに
	IF ダンジョンフラグ:45:0 >= 1 && ダンジョンフラグ:45:2 ==3
	;クリア済み
		RETURN 1
		;PRINTLC [45] 六本木
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [45] 六本木
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [45] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;46,新宿大聖堂
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_46
;出現フラグのチェック　
IF ダンジョンフラグ:18:22 == 1 && ダンジョンフラグ:42:0 >= 1
	;出現している
	;クリアフラグのチェック パズスとごにゃごにゃした
	IF ダンジョンフラグ:46:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [46] 新宿大聖堂
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [46] 新宿大聖堂
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [46] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;47,品川,
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_47
;出現フラグのチェック　
IF ダンジョンフラグ:[[ダンジョン:品川]]:0
	;出現している
	;クリアフラグのチェック　マルチエンディングかつ報告が必要なタイプ
	;複雑なんで自信が無いけど多少はね
	;ハニエルに協力し、カテドラル受諾フラグを立てた場合、クリア
	;ハニエルを倒した場合、クリア
	IF ダンジョンフラグ:[[ダンジョン:品川]]:1 == 4 || ダンジョンフラグ:[[ダンジョン:品川]]:1 == -1
	;クリア済み
		RETURN 1
		;PRINTLC [47] 品川
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [47] 品川
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [47] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;48,カーサ乾
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_48
;出現フラグのチェック　クリアすると消えるタイプ
IF 依頼フラグ:5:0 == 1 || ダンジョンフラグ:48:0 == 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:48:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [48] カーサ乾
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [48] カーサ乾
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [48] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;49,北山大学
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_49
;出現フラグのチェック　クリアすると消えるタイプ
IF (依頼フラグ:5:0 == 1 && BASE:MASTER:LV >= 12) || ダンジョンフラグ:49:0 == 1
	;出現している
	;クリアフラグのチェック　シキオウジ撃破
	IF ダンジョンフラグ:49:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [49] 北山大学
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [49] 北山大学
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [49] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;50,七姉妹学園
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_50
;出現フラグのチェック　クリアすると消えるタイプ STRFLAG関数がいまいち分からない
IF STRFLAG_REQ("七姉妹学園調査依頼クリア", 1, [[依頼:ペルソナ２]])
	;出現している
	;クリアフラグのチェック　自信がない
	IF STRFLAG_D("七姉妹学園クリア", 1, [[ダンジョン:ペルソナ２]])
	;クリア済み
		RETURN 1
		;PRINTLC [50] 七姉妹学園
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		CALLF STRFLAG_D("七姉妹学園クリア", -1, [[ダンジョン:ペルソナ２]])
		;PRINTLC [50] 七姉妹学園
	ENDIF
ELSE
;出現していない
	CALLF STRFLAG_REQ("七姉妹学園調査依頼クリア", -1, [[依頼:ペルソナ２]])
	;SETCOLOR COLOR("gray")
	;PRINTLC [50] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;51,ゾディアック
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_51
;出現フラグのチェック　クリアすると消えるタイプ
IF STRFLAG_NUM_EV("罪ルート進行", , , , [[イベント:ペルソナ２]]) >= 3
	;出現している
	;クリアフラグのチェック　これでいいのか不安
	IF STRFLAG_NUM_EV("罪ルート進行", , , , [[イベント:ペルソナ２]]) >= 4
	;クリア済み
		RETURN 1
		;PRINTLC [51] ゾディアック
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [51] ゾディアック
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [51] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;52,空の科学館
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_52
;出現フラグのチェック　クリアすると消えるタイプ
IF STRFLAG_NUM_EV("罪ルート進行", , , , [[イベント:ペルソナ２]]) >= 7 || STRFLAG_NUM_EV("罰ルート進行", , , , [[イベント:ペルソナ２]]) >= 5
	;出現している
	;クリアフラグのチェック　これでいいのか不安
	IF STRFLAG_NUM_EV("罪ルート進行", , , , [[イベント:ペルソナ２]]) >= 8 || STRFLAG_NUM_EV("罰ルート進行", , , , [[イベント:ペルソナ２]]) >= 6
	;クリア済み
		RETURN 1
		;PRINTLC [52] 空の科学館
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [52] 空の科学館
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [52] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;53,カラコル
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_53
;出現フラグのチェック　クリアすると消えるタイプ
IF STRFLAG_NUM_EV("罪ルート進行", , , , [[イベント:ペルソナ２]]) >= 10
	;出現している
	;クリアフラグのチェック　これでいいのか不安
	IF STRFLAG_NUM_EV("罪ルート進行", , , , [[イベント:ペルソナ２]]) >= 11
	;クリア済み
		RETURN 1
		;PRINTLC [53] カラコル
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [53] カラコル
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [53] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;54,森本病院
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_54
;出現フラグのチェック　クリアすると消えるタイプ
IF STRFLAG_NUM_EV("罰ルート進行", , , , [[イベント:ペルソナ２]]) >= 3
	;出現している
	;クリアフラグのチェック　これでいいのか不安
	IF STRFLAG_NUM_EV("罰ルート進行", , , , [[イベント:ペルソナ２]]) >= 4
	;クリア済み
		RETURN 1
		;PRINTLC [54] 森本病院
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [54] 森本病院
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [54] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;55,シバルバー
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_55
;出現フラグのチェック　クリアすると消えるタイプ
IF STRFLAG_NUM_EV("罪ルート進行", , , , [[イベント:ペルソナ２]]) >= 12
	;出現している
	;クリアフラグのチェック　これでいいのか不安
	IF STRFLAG_NUM_EV("罪ルート進行", , , , [[イベント:ペルソナ２]]) >= 13
	;クリア済み
		RETURN 1
		;PRINTLC [55] シバルバー
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [55] シバルバー
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [55] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;59,バール城
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_59
;出現フラグのチェック　クリアすると消えるタイプ
;キャラチェックがある
;ＥＤをキャンセルした場合のフラグ管理が無いので、キャンセル済みEDで代用
;不安
;ファイル名とダンジョン名変えるのやめてぇ！不安になるぅ！
IF (イベントフラグ:70:0 == 10 && FINDCHARA_B(4761,0) == 2 && (FINDCHARA_B(4763,0) == 2 || FINDCHARA_B(4764,0) == 2)) || (イベントフラグ:70:0 == 11 && FINDCHARA_B(4761,0) == 2) || イベントフラグ:70:0 == 12 ||  GETBIT(FLAG:キャンセル済みED,16) == 1
	;出現している
	;クリアフラグのチェック
	;ＥＤをキャンセルした場合のフラグ管理が無いので、キャンセル済みEDで代用
	IF イベントフラグ:70:0 == 12 || GETBIT(FLAG:キャンセル済みED,16) == 1
	;クリア済み
		RETURN 1
		;PRINTLC [59] バール城
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [59] バール城
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [59] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;60,アヴィディア界
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_60
;出現フラグのチェック　クリアすると消えるタイプ
;キャンセル済みED,28も判定として使うことに
IF ダンジョンフラグ:19:1 == 1 || GETBIT(FLAG:キャンセル済みED,28) == 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:60:0 == 1 || GETBIT(FLAG:キャンセル済みED,28) == 1
	;クリア済み
		RETURN 1
		;PRINTLC [60] アヴィディア界
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [60] アヴィディア界
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [60] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;61,原宿
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_61
;出現フラグのチェック
;私家版対応済み 無条件
;IF 依頼フラグ:12:0 != 0
	;出現している
	;クリアフラグのチェック
	;私家版対応済み
	IF ダンジョンフラグ:61:0 >= 5
	;クリア済み
		RETURN 1
		;PRINTLC [61] 原宿
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [61] 原宿
	ENDIF
;ELSE
;出現していない
;	;SETCOLOR COLOR("gray")
;	;PRINTLC [61] ???
;	;RESETCOLOR
;ENDIF

;--------------------------------------------------
;62,アイスランド
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_62
;出現フラグのチェック　イベントクリア
IF 依頼フラグ:12:0 == 1 || ダンジョンフラグ:62:1 == 4
	;出現している
	;クリアフラグのチェック　ヘル撃破
	IF ダンジョンフラグ:62:1 == 4
	;クリア済み
		RETURN 1
		;PRINTLC [62] アイスランド
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [62] アイスランド
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [62] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;63,サンドランド
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_63
;出現フラグのチェック フォレストランドにいけることをクリア条件とする
IF 闘技場フラグ:9:0 == 2 || ダンジョンフラグ:63:0 == 8
	;出現している
	;クリアフラグのチェック　ヘル撃破
	IF ダンジョンフラグ:63:0 == 8
	;クリア済み
		RETURN 1
		;PRINTLC [63] サンドランド
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [63] サンドランド
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [63] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;64,セントラルランド
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_64
;出現フラグのチェック
;ダンジョンフラグを立てているか、キャンセル済みED60,61のどちらかをクリア条件とする
IF イベントフラグ:26:0 == 1 || ダンジョンフラグ:64:0 == 6 || GETBIT(FLAG:キャンセル済みED,60) == 1 || GETBIT(FLAG:キャンセル済みED,61) == 1
	;出現している
	;クリアフラグ ダンジョンクリア、もしくはエンディングを見て、続けるを選んだ
	IF ダンジョンフラグ:64:0 == 6 || GETBIT(FLAG:キャンセル済みED,60) == 1 || GETBIT(FLAG:キャンセル済みED,61) == 1
	;クリア済み
		RETURN 1
		;PRINTLC [64] セントラルランド
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [64] セントラルランド
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [64] ???
	;RESETCOLOR
ENDIF



;--------------------------------------------------
;65,シュバルツバース
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_65
;出現フラグのチェック　イベントクリア
IF イベントフラグ:11:0 == 1
	;出現している
	;クリアフラグのチェック　明らかに未完成じゃないかなぁこれ
	IF STRFLAG_NUM_D("シュバルツバース進行度") >= 4
	;クリア済み
		RETURN 1
		;PRINTLC [65] シュバルツバース
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [65] シュバルツバース
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [65] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;66,異界化エルミン学園
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_66
;出現フラグのチェック クリアすると消えるタイプ
IF イベントフラグ:23:0 >= 2 || ダンジョンフラグ:66:1 == 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:66:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [66] 異界化エルミン学園
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [66] 異界化エルミン学園
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [66] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;70,Tartarus
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_70
;出現フラグのチェック 夜じゃないと出ないけどここでは関係ない 数値的に処理
IF イベントフラグ:9:0 >= 1 || ダンジョンフラグ:70:1 >= 10
	;出現している
	;クリアフラグのチェック ニュクスアバター撃破でクリアとする
	;現状最高値が10で数値的に処理されているが、念の為10以上にしておく
	;エリザベス撃破はダンジョンフラグ:70:96 == 4　現在は判定外
	IF ダンジョンフラグ:70:1 >= 10
	;クリア済み
		RETURN 1
		;PRINTLC [70] Tartarus
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [70] Tartarus
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [70] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;72,雪子姫の城
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_72
;出現フラグのチェック 数値的に処理 
IF イベントフラグ:12:0 >= 1 || ダンジョンフラグ:72:8 >= 1
	;出現している
	;クリアフラグのチェック マルチエンディングだが1以上でクリア
	IF ダンジョンフラグ:72:8 >= 1
	;クリア済み
		RETURN 1
		;PRINTLC [72] 雪子姫の城
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [72] 雪子姫の城
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [72] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;73,熱気立つ大浴場
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_73
;出現フラグのチェック 数値的に処理
;クリアすると消える？　ＥＲＢ上での処理は72と同じに見える
IF イベントフラグ:12:0 >= 2 || ダンジョンフラグ:73:8 >= 1
	;出現している
	;クリアフラグのチェック 裏ボス倒すとクリアフラグが2になる
	IF ダンジョンフラグ:73:8 >= 1
	;クリア済み
		RETURN 1
		;PRINTLC [73] 熱気立つ大浴場
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [73] 熱気立つ大浴場
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [73] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;74,天上楽土
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_74
;出現フラグのチェック 数値的に処理
;フラグ管理が分かりやすくてありがてえなーおれもなー
IF イベントフラグ:12:0 == 4 || ダンジョンフラグ:74:1 >= 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:74:1 >= 1
	;クリア済み
		RETURN 1
		;PRINTLC [74] 天上楽土
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [74] 天上楽土
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [74] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;75,禍津稲羽市
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_75
;出現フラグのチェック 主人公レベルと大浴場
;IF BASE:MASTER:LV > 50 && ダンジョンフラグ:73:8 > 0
;私家版だと天上楽土クリアが条件
;フラグ管理が分かりやすくてありがてえなーおれもなー
IF イベントフラグ:12:0 == 5 || ダンジョンフラグ:75:1 == 2
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:75:1 == 2
	;クリア済み
		RETURN 1
		;PRINTLC [75] 禍津稲羽市
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [75] 禍津稲羽市
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [75] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;78,氷川神社
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_78
;出現フラグのチェック 北山大学クリア　クリアすると消えるタイプ
;IF ダンジョンフラグ:49:0 == 1
;私家版では依頼のクリアが条件に変更
;マルチエンディング(1,2)になっているのでそれにも対応
IF 依頼フラグ:5:0 == 2 || ダンジョンフラグ:78:0 >= 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:78:0 >= 1
	;クリア済み
		RETURN 1
		;PRINTLC [78] 氷川神社
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [78] 氷川神社
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [78] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;79,東亜テレビ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_79
;出現フラグのチェック 神社クリア クリアすると消えるタイプ
;IF ダンジョンフラグ:78:0 == 1
;出現フラグが変更されている
IF ダンジョンフラグ:86:0 == 1 || ダンジョンフラグ:79:0 == 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:79:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [79] 東亜テレビ
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [79] 東亜テレビ
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [79] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;80,偽見滝原
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_80
;出現フラグのチェック 私家版新規ダンジョン
;クリア条件として、イベントフラグ一定以上もしくはキャンセル済みエンドで判定
;キャンセル済みED,18
IF イベントフラグ:99:0 == 8 || イベントフラグ:99:0 >= 9 || GETBIT(FLAG:キャンセル済みED,18) == 1
	;出現している
	;クリアフラグのチェック
	IF イベントフラグ:99:0 >= 9 ||  GETBIT(FLAG:キャンセル済みED,18) == 1
	;クリア済み
		RETURN 1
		;PRINTLC [80] 偽見滝原
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [80] 偽見滝原
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [80] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;81,新市庁舎
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_81
;出現フラグのチェック 私家版新規ダンジョン
;クリアすると消えるタイプ
IF ダンジョンフラグ:84:0 == 1 || ダンジョンフラグ:81:0 == 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:81:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [81] 新市庁舎
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [81] 新市庁舎
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [81] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;82,異界化ビル
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_82
;出現フラグのチェック 依頼受諾済み クリアすると消えるタイプ
IF 依頼フラグ:29:0 >= 1
	;出現している
	;クリアフラグのチェック こっちはダンジョンのクリア判定を使う
	;実質依頼フラグ == 2でも同じ
	IF ダンジョンフラグ:82:5 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [82] 異界化ビル
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [82] 異界化ビル
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [82] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;83,平崎警察署
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_83
;出現フラグのチェック 東亜テレビクリア済み クリアすると消えるタイプ
IF ダンジョンフラグ:79:0 == 1 || ダンジョンフラグ:83:0 == 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:83:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [83] 平崎警察署
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [83] 平崎警察署
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [83] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;84,天堂天山邸
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_84
;出現フラグのチェック 依頼受諾済み クリアすると消える
;IF 依頼フラグ:32:0 >= 1
;私家版だと警察署クリアが出現条件　クリアすると消えるタイプ
IF ダンジョンフラグ:83:0 == 1 || ダンジョンフラグ:84:0 == 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:84:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [84] 天堂天山邸
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [84] 天堂天山邸
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [84] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;85,古墳迷宮
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_85
;出現フラグのチェック 私家版での追加ダンジョン 出現フラグが複雑
;新市庁舎クリア済みで未クリア　かつ
;	久美子を助けていて陥落済み
;	もしくは久美子を助けていない
;クリアすると消えるタイプ
;PTに存在しないキャラクターに対する陥落チェックがかなり面倒
;しょうがないので入れ子のＩＦ文を２回走らせるクソ処理

;まずはダンジョンのフラグチェック
IF ダンジョンフラグ:85:0 == 1
	;クリア済み
	RETURN 1
	;PRINTLC [85] 古墳迷宮
	;RESETCOLOR
ELSEIF	ダンジョンフラグ:78:0 == 1 && ダンジョンフラグ:85:0 == 0
	;久美子救出ルート
	LOCAL = GETCHARA([[キャラ:久美子]])
	IF ダンジョンフラグ:78:1 == 1 && FINDCHARA_B([[キャラ:久美子]]) == 1 && 陥落(LOCAL)
		;出現条件を満たしていて未クリア
		;PRINTLC [85] 古墳迷宮
	ELSE
		;出現条件を満たしてない
		;SETCOLOR COLOR("gray")
		;PRINTLC [85] ???
		;RESETCOLOR
	ENDIF
ELSEIF	ダンジョンフラグ:78:0 == 2 && ダンジョンフラグ:85:0 == 0
	;出現条件を満たしていて未クリア
	;PRINTLC [85] 古墳迷宮
ELSE
	;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [85] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;86,博物館
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_86
;出現フラグのチェック 私家版での追加ダンジョン
;市庁舎クリア済み クリアすると消えるタイプ
IF ダンジョンフラグ:78:0 >= 1 || ダンジョンフラグ:86:0 == 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:86:0 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [86] 博物館
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [86] 博物館
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [86] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;88,レオン自動車工場
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_88
;出現フラグのチェック 私家版での追加ダンジョン
;フラグ管理が分かりやすく書いてくれて助かるなーおれもなー
IF (イベントフラグ:27:0 == 1 && ダンジョンフラグ:88:1 == 0) || ダンジョンフラグ:88:1 == 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:88:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [88] レオン自動車工場
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [88] レオン自動車工場
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [88] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;89,天体博物館
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_89
;出現フラグのチェック 依頼受諾以上 数値的に管理
IF 依頼フラグ:33:0 >= 1
	;出現している
	;クリアフラグのチェック マルチエンディング 数値的に管理 0のみ未クリア
	IF ダンジョンフラグ:89:1 >= 1
	;クリア済み
		RETURN 1
		;PRINTLC [89] 天体博物館
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [89] 天体博物館
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [89] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;90,ＶＲ美術館
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_90
;出現フラグのチェック クリアすると消滅するタイプ
IF BASE:MASTER:LV >= 15
	;出現している
	;クリアフラグのチェック スナッピーに懐柔されるエンドでもクリアとする
	IF ダンジョンフラグ:90:1 >= 3
	;クリア済み
		RETURN 1
		;PRINTLC [90] ＶＲ美術館
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [90] ＶＲ美術館
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [90] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;92,ＶＲホラー・ハウス
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_92
;出現フラグのチェック
;処理上は90:1が3のときしか開かないが、
;VR美術館では4でも開けるメッセージを出しているので準ずる
;IF ダンジョンフラグ:90:1 >= 3
;私家版では美術館の懐柔ＥＤに対応済み
IF (ダンジョンフラグ:90:1 >= 3 && ダンジョンフラグ:92:0 == 0) || ダンジョンフラグ:92:0 >= 1
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:92:0 >= 1
	;クリア済み
		RETURN 1
		;PRINTLC [92] ＶＲホラー・ハウス
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [92] ＶＲホラー・ハウス
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [92] ???
	;RESETCOLOR
ENDIF


;--------------------------------------------------
;93,天海空港
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_93
;出現フラグのチェック
IF 依頼フラグ:34:0 == 1 || ダンジョンフラグ:93:1 >= 4
	;出現している
	;クリアフラグのチェック  マルチエンディングで数値的に管理 4/5がクリアフラグ
	IF ダンジョンフラグ:93:1 >= 4
	;クリア済み
		RETURN 1
		;PRINTLC [93] 天海空港
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [93] 天海空港
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [93] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;94,シーアーク
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_94
;出現フラグのチェック
;クリアとしても未クリアとしても混乱を招くので、関数は作るが表示しない
;つまり未実装処理の対象
IF ダンジョンフラグ:94:1 >= 1
	;出現している
	IF ダンジョンフラグ:94:1 > 10
	;クリア済み
		RETURN 1
		;PRINTLC [94] シーアーク
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [94] シーアーク
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [94] ???
	;RESETCOLOR
ENDIF

;--------------------------------------------------
;95,二上門地下
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_95
;出現フラグのチェック 私家版での新規ダンジョン
;クリアすると消えるタイプ
;読み方が分かりません　ふ・・・ふたなりもんちか？
IF 依頼フラグ:35:0 == 1 || ダンジョンフラグ:95:0 == 2
	;出現している クリアフラグは数値的に処理
	IF ダンジョンフラグ:95:0 == 2
	;クリア済み
		RETURN 1
		;PRINTLC [95] 二上門地下
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [95] 二上門地下
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [95] ???
	;RESETCOLOR
ENDIF




;--------------------------------------------------
;追記用のサンプルスクリプト
;--------------------------------------------------

;--------------------------------------------------
;S,ダンジョンの名前,備考,出現フラグ,クリアフラグ
;--------------------------------------------------
@DIARY_DUNGEON_FILTER_S
;出現フラグのチェック　
IF ダンジョンフラグ:1:1 != 0
	;出現している
	;クリアフラグのチェック
	IF ダンジョンフラグ:3:1 == 1
	;クリア済み
		RETURN 1
		;PRINTLC [ s] ダンジョンの名前
		;RESETCOLOR
	ELSE
	;出現しているが未クリア
		;PRINTLC [ s] ダンジョンの名前
	ENDIF
ELSE
;出現していない
	;SETCOLOR COLOR("gray")
	;PRINTLC [ s] ???
	;RESETCOLOR
ENDIF

