;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
;
;	Module		:NOUKIN.ERB
;	Facility	:納金関係の処理
;
;	Licence		:ライセンスフリー。
;
;	Modification Data:
;
;	Edit	Date			Author					Reason
;	001		20XX/XX/XX		----					新規作成
;	002		2011/xx/xx								金額を指定できるように、貢献度の上昇を上納した金額と等しく
;	003		2011/07/02		Ｎ鳥					ショップの品揃え告知、幹部END示唆
;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#

@SHOPCOMABLE_555
RESULTS = Payment
RETURN 1


@SHOP_COM_555
$NOUKIN_LOOP
;初期化
LOCAL = -1
;メッセージ
DRAWLINE
PRINTFORML Please input the amount of money to pay to the organization. （Contribution level to current organization：%TOSTR(FLAG:組織貢献度, "#,###")%）
PRINTFORML Target Amount:￥%TOSTR(MONEY:2, "#,###")%　Total Money:￥%TOSTR(MONEY, "#,###")%
CALL INPUT_MANY(0,MONEY)
LOCAL = RESULT
SIF RESULT == 0
	RETURN 0
;納金する前に確認(押し間違い対策)
DRAWLINE
PRINTFORML Are you sure you want to pay this amount?[￥%TOSTR(RESULT, "#,###")%]
CALL INPUT_YN,"Pay","Don't pay"
SIF RESULT != 0
	GOTO NOUKIN_LOOP
PRINTFORMW ￥%TOSTR(LOCAL, "#,###")% was paid. （Organization contribution level +%TOSTR(LOCAL, "#,###")%）
PRINTL
MONEY -= LOCAL
SELECTCASE FLAG:組織貢献度 + FLAG:名声 * 100
	CASE IS < 10000
		SIF FLAG:組織貢献度 + FLAG:名声 * 100 + LOCAL >= 10000
			PRINTW New equipment has been unlocked and is now available for purchase at the junk shop.
	CASE IS < 60000
		SIF FLAG:組織貢献度 + FLAG:名声 * 100 + LOCAL >= 60000
			PRINTW New equipment has been unlocked and is now available for purchase at the junk shop.
	CASE IS < 210000
		SIF FLAG:組織貢献度 + FLAG:名声 * 100 + LOCAL >= 210000
			PRINTW New equipment has been unlocked and is now available for purchase at the junk shop.
	CASE IS < 460000
		SIF FLAG:組織貢献度 + FLAG:名声 * 100 + LOCAL >= 460000
			PRINTW New equipment has been unlocked and is now available for purchase at the junk shop.
	CASE IS < 860000
		SIF FLAG:組織貢献度 + FLAG:名声 * 100 + LOCAL >= 860000
			PRINTW New equipment has been unlocked and is now available for purchase at the junk shop.
	CASE IS < 1460000
		SIF FLAG:組織貢献度 + FLAG:名声 * 100 + LOCAL >= 1460000
			PRINTW New equipment has been unlocked and is now available for purchase at the junk shop.
	CASE IS < 2260000
		SIF FLAG:組織貢献度 + FLAG:名声 * 100 + LOCAL >= 2260000
			PRINTW New equipment has been unlocked and is now available for purchase at the junk shop.
	CASE IS < 2500000
		SIF FLAG:組織貢献度 + FLAG:名声 * 100 + LOCAL >= 2500000
			PRINTFORMW %CALLNAME:MASTER% has been recommended for an executive position in the organization...
		SIF FLAG:組織貢献度 + FLAG:名声 * 100 + LOCAL >= 3110000
			PRINTW New equipment has been unlocked and is now available for purchase at the junk shop.
	CASE IS < 3110000
		SIF FLAG:組織貢献度 + FLAG:名声 * 100 + LOCAL >= 3110000
			PRINTW New equipment has been unlocked and is now available for purchase at the junk shop.
	CASE IS < 3500000
		SIF FLAG:組織貢献度 + FLAG:名声 * 100 + LOCAL >= 3500000
			PRINTFORMW %CALLNAME:MASTER% has been recommended for an executive position in the organization...
		SIF FLAG:組織貢献度 + FLAG:名声 * 100 + LOCAL >= 4000000
			PRINTW New equipment has been unlocked and is now available for purchase at the junk shop.
	CASE IS < 4000000
		SIF FLAG:組織貢献度 + FLAG:名声 * 100 + LOCAL >= 4000000
			PRINTW New equipment has been unlocked and is now available for purchase at the junk shop.
	CASE IS < 5000000
		SIF FLAG:組織貢献度 + FLAG:名声 * 100 + LOCAL >= 5000000
			PRINTW New equipment has been unlocked and is now available for purchase at the junk shop.
	CASE IS < 6500000
		IF FLAG:組織貢献度 + FLAG:名声 * 100 + LOCAL >= 6500000
			PRINTW New equipment has been unlocked and is now available for purchase at the junk shop.
			PRINTW All equipment restrictions have been canceled and all equipment is available for purchase.
		ENDIF
	CASEELSE
ENDSELECT
FLAG:組織貢献度 += LOCAL
SELECTCASE FLAG:組織貢献度 + FLAG:名声 * 100
	CASE IS < 10000
		MONEY:2 = 10000 - (FLAG:組織貢献度 + FLAG:名声 * 100)
	CASE IS < 60000
		MONEY:2 = 60000 - (FLAG:組織貢献度 + FLAG:名声 * 100)
	CASE IS < 210000
		MONEY:2 = 210000 - (FLAG:組織貢献度 + FLAG:名声 * 100)
	CASE IS < 460000
		MONEY:2 = 460000 - (FLAG:組織貢献度 + FLAG:名声 * 100)
	CASE IS < 860000
		MONEY:2 = 860000 - (FLAG:組織貢献度 + FLAG:名声 * 100)
	CASE IS < 1460000
		MONEY:2 = 1460000 - (FLAG:組織貢献度 + FLAG:名声 * 100)
	CASE IS < 2260000
		MONEY:2 = 2260000 - (FLAG:組織貢献度 + FLAG:名声 * 100)
	CASE IS < 2500000
		MONEY:2 = 2500000 - (FLAG:組織貢献度 + FLAG:名声 * 100)
	CASE IS < 3110000
		MONEY:2 = 3110000 - (FLAG:組織貢献度 + FLAG:名声 * 100)
	CASE IS < 3500000
		MONEY:2 = 3500000 - (FLAG:組織貢献度 + FLAG:名声 * 100)
	CASE IS < 4000000
		MONEY:2 = 4000000 - (FLAG:組織貢献度 + FLAG:名声 * 100)
	CASE IS < 5000000
		MONEY:2 = 5000000 - (FLAG:組織貢献度 + FLAG:名声 * 100)
	CASE IS < 6500000
		MONEY:2 = 6500000 - (FLAG:組織貢献度 + FLAG:名声 * 100)
	CASEELSE
		MONEY:2 = 0
ENDSELECT

