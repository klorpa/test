;====================
;条件
;====================
@PLAYABLE_COLOSSEUM_54
FOR LOCAL,0,10
	IF 店舗("種類",LOCAL) == 11 && 闘技場フラグ:54:0 == 0
		RESULTS = Rank Ｘ　ＶＳ Theater Major
		RETURN 1
	ENDIF
NEXT
RETURN 0


;====================
;内容
;====================
@COLOSSEUM_54
FLAG:逃走不可フラグ = 1
FLAG:会話不能フラグ = 1
FLAG:先制不意打ちキャンセル = 1
CUSTOMDRAWLINE =
PRINTL 
PRINTFORMW When %CALLNAME:MASTER% called on a theater outside business hours、there is a visitor
PRINTW The visitor seemed to be a coffin
PRINTL Demon：
PRINTW 「You call this theater！」
PRINTW 「The theater is something like this！」
PRINTL
PRINTL 1 死神 Mot appeared！
CUSTOMDRAWLINE =
WAIT




CALL SET_ENEMY,9,240,83,1,1
	CFLAG:(CHARANUM-1):ＨＰ補正 += 3000
	CFLAG:(CHARANUM-1):ＭＰ補正 += 9000
	BASE:(CHARANUM-1):剣撃 = 10
	BASE:(CHARANUM-1):飛具 = 10
	BASE:(CHARANUM-1):打撃 = 10
	BASE:(CHARANUM-1):戦技 = 10
	BASE:(CHARANUM-1):火炎 = 0
	BASE:(CHARANUM-1):氷結 = 0
	BASE:(CHARANUM-1):電撃 = 200
	BASE:(CHARANUM-1):衝撃 = -100
	BASE:(CHARANUM-1):神経 = 0
	BASE:(CHARANUM-1):破魔 = 0
	BASE:(CHARANUM-1):呪殺 = 0
	BASE:(CHARANUM-1):地変 = 0
	BASE:(CHARANUM-1):水撃 = 0
	BASE:(CHARANUM-1):疾風 = -100
	CFLAG:(CHARANUM-1):行動回数 = 3
	CSTR:(CHARANUM-1):思考パターン = 240
	ABL:(CHARANUM-1):スキル1 = 1006
	ABL:(CHARANUM-1):スキル2 = 2003
	ABL:(CHARANUM-1):スキル3 = 503
	ABL:(CHARANUM-1):スキル4 = 505
	ABL:(CHARANUM-1):スキル5 = 402
	ABL:(CHARANUM-1):スキル6 = 523
	ABL:(CHARANUM-1):スキル7 = 546
	CALL SYNC_STATUS,(CHARANUM-1)
	CALL HEALTH_CHARA,(CHARANUM-1)
CALL BATTLE_START


CUSTOMDRAWLINE =

PRINTL Mot：
PRINTW 「B-beautiful…。」
PRINTW Defenseeated Mot。



CUSTOMDRAWLINE =
WAIT
FLAG:逃走不可フラグ = 0
FLAG:会話不能フラグ = 0
FLAG:先制不意打ちキャンセル = 0
PRINTW ￥10000 obtained
MONEY += 10000
闘技場フラグ:54:0 = 1

FOR LOCAL,0,CHARANUM
	CALL HEALTH_CHARA,LOCAL
NEXT



;モトの思考パターン
@SET_ACTION_240,ARG


;ＨＰ５％以下
IF 現HP割合(ARG) < 5
	IF CFLAG:ARG:行動した回数 == 0
		IF CFLAG:ARG:魔法威力強化 < 32
			CFLAG:(CHARANUM-1):速度補正 = 24
			CALL CHECK_ACTIONABLE,ARG,503
				SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 503
			CALL RANDOM_TARGET,ARG,503
			RETURN 1
		ELSE
			CALL CHECK_ACTIONABLE,ARG,2003
			SIF RESULT == 0
			GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 2003
			CALL RANDOM_TARGET,ARG,2003
			RETURN 1
		ENDIF
	ELSEIF CFLAG:ARG:行動した回数 == 1
		IF CFLAG:ARG:魔法威力強化 < 32
			CFLAG:(CHARANUM-1):速度補正 = 24
			CALL CHECK_ACTIONABLE,ARG,503
				SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 503
			CALL RANDOM_TARGET,ARG,503
			RETURN 1
		ELSE
			CALL CHECK_ACTIONABLE,ARG,1006
			SIF RESULT == 0
			GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 1006
			CALL RANDOM_TARGET,ARG,1006
			RETURN 1
		ENDIF
	ELSEIF CFLAG:ARG:行動した回数 == 2
		CALL CHECK_ACTIONABLE,ARG,546
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:入力行動 = 546
		RETURN 1
	ENDIF
	
;ＨＰ5％以上50％以下
ELSEIF 現HP割合(ARG) >= 5 && 現HP割合(ARG) < 50
	IF CFLAG:ARG:行動した回数 == 0
		IF 現HP割合(ARG) < 25
			CFLAG:(CHARANUM-1):速度補正 = 28
			CALL CHECK_ACTIONABLE,ARG,402
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 402
			CALL RANDOM_TARGET,ARG,402
			RETURN 1
		ELSEIF CFLAG:MASTER:防御強化 > -7 || CFLAG:MASTER:命中強化 > -7
			CALL CHECK_ACTIONABLE,ARG,523
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 523
			CALL RANDOM_TARGET,ARG,523
			RETURN 1
		ELSEIF CFLAG:ARG:攻撃強化 < -11 || CFLAG:ARG:防御強化 < -11 || CFLAG:ARG:命中強化 < -11
			CALL CHECK_ACTIONABLE,ARG,505
				SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 505
			CALL RANDOM_TARGET,ARG,505
			RETURN 1
		
		ELSE
			SELECTCASE RAND:100
				CASE IS < 15
					CALL CHECK_ACTIONABLE,ARG,1006
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 1006
					CALL RANDOM_TARGET,ARG,1006
					RETURN 1
				CASE IS < 60
					CALL CHECK_ACTIONABLE,ARG,2003
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 2003
					CALL RANDOM_TARGET,ARG,2003
					RETURN 1
				CASE IS < 100
					CALL CHECK_ACTIONABLE,ARG,0
					SIF RESULT == 0
					GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 0
					CALL RANDOM_TARGET,ARG,0
					RETURN 1
			ENDSELECT
		ENDIF
	ELSEIF CFLAG:ARG:行動した回数 == 1
		IF 現HP割合(ARG) < 20
			CFLAG:(CHARANUM-1):速度補正 = 28
			CALL CHECK_ACTIONABLE,ARG,402
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 402
			CALL RANDOM_TARGET,ARG,402
			RETURN 1
		ELSEIF CFLAG:MASTER:防御強化 > -7 || CFLAG:MASTER:命中強化 > -7
			CALL CHECK_ACTIONABLE,ARG,523
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 523
			CALL RANDOM_TARGET,ARG,523
			RETURN 1
		ELSEIF CFLAG:ARG:攻撃強化 < -11 || CFLAG:ARG:防御強化 < -11 || CFLAG:ARG:命中強化 < -11
			CALL CHECK_ACTIONABLE,ARG,505
				SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 505
			CALL RANDOM_TARGET,ARG,505
			RETURN 1
		ELSE
			SELECTCASE RAND:100
				CASE IS < 15
					CALL CHECK_ACTIONABLE,ARG,1006
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 1006
					CALL RANDOM_TARGET,ARG,1006
					RETURN 1
				CASE IS < 60
					CALL CHECK_ACTIONABLE,ARG,2003
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 2003
					CALL RANDOM_TARGET,ARG,2003
					RETURN 1
				CASE IS < 100
					CALL CHECK_ACTIONABLE,ARG,0
					SIF RESULT == 0
					GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 0
					CALL RANDOM_TARGET,ARG,0
					RETURN 1
			ENDSELECT
		ENDIF
	ELSEIF CFLAG:ARG:行動した回数 == 2
		IF 現HP割合(ARG) < 15
			CFLAG:(CHARANUM-1):速度補正 = 28
			CALL CHECK_ACTIONABLE,ARG,402
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 402
			CALL RANDOM_TARGET,ARG,402
			RETURN 1
		ELSEIF CFLAG:MASTER:防御強化 > -7 || CFLAG:MASTER:命中強化 > -7
			CALL CHECK_ACTIONABLE,ARG,523
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 523
			CALL RANDOM_TARGET,ARG,523
			RETURN 1
		ELSEIF CFLAG:ARG:攻撃強化 < -11 || CFLAG:ARG:防御強化 < -11 || CFLAG:ARG:命中強化 < -11
			CALL CHECK_ACTIONABLE,ARG,505
				SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 505
			CALL RANDOM_TARGET,ARG,505
			RETURN 1
		ELSE
			SELECTCASE RAND:100
				CASE IS < 15
					CALL CHECK_ACTIONABLE,ARG,1006
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 1006
					CALL RANDOM_TARGET,ARG,1006
					RETURN 1
				CASE IS < 60
					CALL CHECK_ACTIONABLE,ARG,2003
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 2003
					CALL RANDOM_TARGET,ARG,2003
					RETURN 1
				CASE IS < 100
					CALL CHECK_ACTIONABLE,ARG,0
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 0
					CALL RANDOM_TARGET,ARG,0
					RETURN 1
			ENDSELECT
		ENDIF
	ENDIF

ELSEIF 現HP割合(ARG) >= 50
	IF CFLAG:ARG:行動した回数 == 0
		IF 現HP割合(ARG) < 65
			CFLAG:(CHARANUM-1):速度補正 = 28
			CALL CHECK_ACTIONABLE,ARG,402
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 402
			CALL RANDOM_TARGET,ARG,402
			RETURN 1
		ELSEIF CFLAG:MASTER:防御強化 > -7 || CFLAG:MASTER:命中強化 > -7
			CALL CHECK_ACTIONABLE,ARG,523
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 523
			CALL RANDOM_TARGET,ARG,523
			RETURN 1
		ELSEIF CFLAG:ARG:攻撃強化 < -11 || CFLAG:ARG:防御強化 < -11 || CFLAG:ARG:命中強化 < -11
			CALL CHECK_ACTIONABLE,ARG,505
				SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 505
			CALL RANDOM_TARGET,ARG,505
			RETURN 1
		
		ELSE
			SELECTCASE RAND:100
				CASE IS < 5
					CALL CHECK_ACTIONABLE,ARG,1006
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 1006
					CALL RANDOM_TARGET,ARG,1006
					RETURN 1
				CASE IS < 40
					CALL CHECK_ACTIONABLE,ARG,2003
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 2003
					CALL RANDOM_TARGET,ARG,2003
					RETURN 1
				CASE IS < 100
					CALL CHECK_ACTIONABLE,ARG,0
					SIF RESULT == 0
					GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 0
					CALL RANDOM_TARGET,ARG,0
					RETURN 1
			ENDSELECT
		ENDIF
	ELSEIF CFLAG:ARG:行動した回数 == 1
		IF 現HP割合(ARG) < 60
			CFLAG:(CHARANUM-1):速度補正 = 28
			CALL CHECK_ACTIONABLE,ARG,402
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 402
			CALL RANDOM_TARGET,ARG,402
			RETURN 1
		ELSEIF CFLAG:MASTER:防御強化 > -7 || CFLAG:MASTER:命中強化 > -7
			CALL CHECK_ACTIONABLE,ARG,523
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 523
			CALL RANDOM_TARGET,ARG,523
			RETURN 1
		ELSEIF CFLAG:ARG:攻撃強化 < -11 || CFLAG:ARG:防御強化 < -11 || CFLAG:ARG:命中強化 < -11
			CALL CHECK_ACTIONABLE,ARG,505
				SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 505
			CALL RANDOM_TARGET,ARG,505
			RETURN 1
		ELSE
			SELECTCASE RAND:100
				CASE IS < 3
					CALL CHECK_ACTIONABLE,ARG,1006
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 1006
					CALL RANDOM_TARGET,ARG,1006
					RETURN 1
				CASE IS < 10
					CALL CHECK_ACTIONABLE,ARG,2003
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 2003
					CALL RANDOM_TARGET,ARG,2003
					RETURN 1
				CASE IS < 100
					CALL CHECK_ACTIONABLE,ARG,0
					SIF RESULT == 0
					GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 0
					CALL RANDOM_TARGET,ARG,0
					RETURN 1
			ENDSELECT
		ENDIF
	ELSEIF CFLAG:ARG:行動した回数 == 2
		IF 現HP割合(ARG) < 55
			CFLAG:(CHARANUM-1):速度補正 = 28
			CALL CHECK_ACTIONABLE,ARG,402
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 402
			CALL RANDOM_TARGET,ARG,402
			RETURN 1
		ELSEIF CFLAG:MASTER:防御強化 > -7 || CFLAG:MASTER:命中強化 > -7
			CALL CHECK_ACTIONABLE,ARG,523
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 523
			CALL RANDOM_TARGET,ARG,523
			RETURN 1
		ELSEIF CFLAG:ARG:攻撃強化 < -11 || CFLAG:ARG:防御強化 < -11 || CFLAG:ARG:命中強化 < -11
			CALL CHECK_ACTIONABLE,ARG,505
				SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 505
			CALL RANDOM_TARGET,ARG,505
			RETURN 1
		ELSE
			SELECTCASE RAND:100
				CASE IS < 1
					CALL CHECK_ACTIONABLE,ARG,1006
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 1006
					CALL RANDOM_TARGET,ARG,1006
					RETURN 1
				CASE IS < 8
					CALL CHECK_ACTIONABLE,ARG,2003
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 2003
					CALL RANDOM_TARGET,ARG,2003
					RETURN 1
				CASE IS < 100
					CALL CHECK_ACTIONABLE,ARG,0
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 0
					CALL RANDOM_TARGET,ARG,0
					RETURN 1
			ENDSELECT
		ENDIF
	ENDIF

ELSE
	$DECIDE_ACTION
	CALL SEARCH_ACT,ARG
	IF RESULT == 0
		CFLAG:ARG:入力行動 = -1
		CFLAG:ARG:防御フラグ = 1
		RETURN 0
	ENDIF
;	PRINTFORML [{CFLAG:ARG:5}]のスキル数 {RESULT}
	LOCAL = RAND:RESULT
	;スキル番号決定
	LOCAL:1 = S:(10+LOCAL)
;	PRINTFORML [{CFLAG:ARG:5}]のスキル {LOCAL:1}
	$TARGET_LOOP
	
	CALL RANDOM_TARGET,ARG,LOCAL:1
	CALLFORM SKILL_TARGET_{LOCAL:1}
	;ここでスキル番号を行動内容に代入
	SIF CFLAG:ARG:ターゲット == -1
		GOTO DECIDE_ACTION
	CFLAG:ARG:入力行動 = LOCAL:1
ENDIF


