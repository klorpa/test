;=======================================================================
;エンカウント率
;=======================================================================
@ENCOUNT_RATE_65
SELECTCASE FLAG:現M
	CASE 0
		FLAG:未遭遇歩数 = 0
		FLAG:エンカウント率 = 0
		FLAG:MAG消費率 = 0
	CASEELSE
		FLAG:エンカウント率 = FLAG:未遭遇歩数 * 5
ENDSELECT



;=======================================================================
;エンカウント処理
;=======================================================================
@CHECK_ENCOUNT_65
#LOCALSIZE 3
IF RAND:100 < FLAG:エンカウント率
	;一方通行の処理
	CALL ONE_WAY(902, 912, 922, 932, 942, 952, 962, 972)
	CALL ENEMY_TABLE
	IF RAND:2 == 1
		ABL:(CHARANUM-1):アイテム2 = 1413
		ABL:(CHARANUM-1):入手確率2 = 5
	ELSE
		ABL:(CHARANUM-1):アイテム2 = 1414
		ABL:(CHARANUM-1):入手確率2 = 5
	ENDIF
	RETURN 1
ELSE
	FLAG:未遭遇歩数 += 1
	RETURN 0
ENDIF

;=======================================================================
;敵の種族の種類数
;=======================================================================
@CLASS_NUM_65
RETURN CLASS_NUM_COMMON("上級")
;=======================================================================
;敵の総数
;ARGは出現する敵の種類です
;=======================================================================
@ENEMY_NUM_65, ARG
RETURN ENEMY_NUM_COMMON("上級", ARG)

;=======================================================================
;敵の種類
;=======================================================================
@ENEMY_65, ARG
SELECTCASE FLAG:現M
	CASE 0
	CASE IS < 12
	CASE IS < 23
		SELECTCASE RAND:100
			CASE IS < 15
				SELECTCASE FLAG:現M
					CASE 13
						;15%でイヌガミ
						RETURN [[キャラ:イヌガミ]], 41+RAND:2
					CASE 18,19
						;15%でモー・ショボー
						RETURN [[キャラ:モー・ショボー]], 42+RAND:3
					CASE 16
						;15%でカラステング
						RETURN [[キャラ:カラステング]], 40+RAND:2
					CASE 12
						;15%でノズチ
						RETURN [[キャラ:ノズチ]], 41+RAND:2
					CASE 22
						;15%でモムノフ
						RETURN [[キャラ:モムノフ]], 42+RAND:2
					CASE 14,15
						;15%でネコマタ
						RETURN [[キャラ:ネコマタ]], 40+RAND:3
					CASE 20
						;15%でシルキー
						RETURN [[キャラ:シルキー]], 38+RAND:3
				ENDSELECT
			CASE IS < 25
				;10%でパワー
				RETURN [[キャラ:パワー]], 38+RAND:4
			CASE IS < 45
				;20%でモーリアン
				RETURN [[キャラ:アエロー]], 39+RAND:2
			CASE IS < 68
				;23%でソロネ
				RETURN [[キャラ:オセ]], 41+RAND:5
			CASE IS < 92
				;24%でハヌマーン
				RETURN [[キャラ:ヤクシニー]], 40+RAND:3
			CASE IS < 100
				;8%でドッペルゲンガー
				RETURN [[キャラ:ドッペルゲンガー]], 59+RAND:6
		ENDSELECT

ENDSELECT
