;=======================================================================
;必要レベル目安
;推奨LV 雑魚最低LV 雑魚最高LV ボスLV 
;=======================================================================
@GET_DUNGEON_LV_53
RETURN 31, 28, 31, 35
;=======================================================================
;エンカウント率
;=======================================================================
@ENCOUNT_RATE_53
IF DA:(FLAG:現X):(FLAG:現Y) == 11
	FLAG:エンカウント率 = 0
ELSE
	FLAG:エンカウント率 = 5 * MAX(FLAG:未遭遇歩数 - 5 , 0)
ENDIF
;=======================================================================
;エンカウント処理
;=======================================================================
@CHECK_ENCOUNT_53
IF DA:(FLAG:現X):(FLAG:現Y) == 11
	FLAG:エンカウント率 = 0
	RETURN 0
ENDIF
IF RAND:100 < FLAG:エンカウント率
	IF !RAND:3
		SELECTCASE FLAG:現M
			;LV42~45
			CASE 0,1,2,3,4
				SELECTCASE RAND:100
					CASE IS < 30
						CALL SET_ENEMY,8, [[キャラ:Ｓゾルダート]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓゾルダート]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓゾルダート]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 42 + RAND:2 * 3, 0
					CASE IS < 50
						CALL SET_ENEMY,8, [[キャラ:Ｓシュッツェ]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓシュッツェ]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓシュッツェ]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 45 + RAND:2 * 3, 0
					CASE IS < 70
						CALL SET_ENEMY,7, [[キャラ:Ｓゾルダート]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｓゾルダート]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓゾルダート]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓゾルダート]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｓゾルダート]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 42 + RAND:2 * 3, 0
					CASEELSE
						CALL SET_ENEMY,8, [[キャラ:Ｓゾルダート]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓゾルダート]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓゾルダート]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｓシュッツェ]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 42 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｓシュッツェ]], 42 + RAND:2 * 3, 0
				ENDSELECT
			;LV45~48
			CASE 5,6,7,8,9
				SELECTCASE RAND:100
					CASE IS < 20
						CALL SET_ENEMY,8, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 45 + RAND:2 * 3, 0
					CASE IS < 40
						CALL SET_ENEMY,8, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｖクラフト]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｓシュッツェ]], 45 + RAND:2 * 3, 0
					CASE IS < 60
						CALL SET_ENEMY,7, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 45 + RAND:2 * 3, 0
					CASE IS < 80
						CALL SET_ENEMY,8, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｖクラフト]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｖクラフト]], 45 + RAND:2 * 3, 0
					CASEELSE
						CALL SET_ENEMY,8, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓゾルダート]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｓシュッツェ]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 45 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｓシュッツェ]], 45 + RAND:2 * 3, 0
				ENDSELECT
			;LV50~53
			CASE 9,10,11,12,13
				SELECTCASE RAND:100
					CASE IS < 15
						CALL SET_ENEMY,7, [[キャラ:Ｓゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｍゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｍゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｍゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｓゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 50 + RAND:2 * 3, 0
					CASE IS < 30
						CALL SET_ENEMY,8, [[キャラ:Ｓゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｓシュッツェ]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｓシュッツェ]], 50 + RAND:2 * 3, 0
					CASE IS < 50
						CALL SET_ENEMY,7, [[キャラ:Ｍゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｍゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｍゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｍゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｍゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 50 + RAND:2 * 3, 0
					CASE IS < 60
						CALL SET_ENEMY,8, [[キャラ:Ｍゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｍゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｍゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｖクラフト]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｖクラフト]], 50 + RAND:2 * 3, 0
					CASE IS < 80
						CALL SET_ENEMY,8, [[キャラ:Ｓゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｖクラフト]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｖクラフト]], 50 + RAND:2 * 3, 0
					CASEELSE
						CALL SET_ENEMY,7, [[キャラ:Ｍゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｓゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｍゾルダート]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｓシュッツェ]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 50 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｖクラフト]], 50 + RAND:2 * 3, 0
				ENDSELECT
			;LV54
			CASE 14,15,16,17,18
				SELECTCASE RAND:100
					CASE IS < 10
						CALL SET_ENEMY,7, [[キャラ:Ｓゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｓゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 52 + RAND:2 * 3, 0
					CASE IS < 30
						CALL SET_ENEMY,7, [[キャラ:Ｓゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｓゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｓゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｓシュッツェ]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｓシュッツェ]], 52 + RAND:2 * 3, 0
					CASE IS < 52
						CALL SET_ENEMY,7, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｓシュッツェ]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｓシュッツェ]], 52 + RAND:2 * 3, 0
					CASE IS < 60
						CALL SET_ENEMY,7, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｖクラフト]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｖクラフト]], 52 + RAND:2 * 3, 0
					CASE IS < 75
						CALL SET_ENEMY,8, [[キャラ:Ｓゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｖクラフト]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｖクラフト]], 52 + RAND:2 * 3, 0
					CASE IS < 90
						CALL SET_ENEMY,7, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｓゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｓシュッツェ]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｖクラフト]], 52 + RAND:2 * 3, 0
					CASEELSE
						CALL SET_ENEMY,7, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,8, [[キャラ:Ｓゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,9, [[キャラ:Ｓゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,10, [[キャラ:Ｓゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,11, [[キャラ:Ｍゾルダート]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,12, [[キャラ:Ｓシュッツェ]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,13, [[キャラ:Ｓシュッツェ]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,14, [[キャラ:コマンダント]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,15, [[キャラ:Ｖクラフト]], 52 + RAND:2 * 3, 0
						CALL SET_ENEMY,16, [[キャラ:Ｖクラフト]], 52 + RAND:2 * 3, 0
				ENDSELECT
		ENDSELECT
	ELSEIF RAND:2
		LOCAL:1 = [[キャラ:牡牛カメーンＲ]]
		LOCAL:2 = [[キャラ:獅子カメーンＲ]]
		LOCAL:3 = [[キャラ:蠍カメーンＲ]]
		LOCAL:4 = [[キャラ:水瓶カメーンＲ]]
		FOR LOCAL, 1, 5
			SWAP LOCAL:(RAND:4+1), LOCAL:(RAND:4+1)
		NEXT
		;LOCAL:5 テーブルパターン
		;LOCAL:6 レベル
		SELECTCASE FLAG:現M
			;LV45
			CASE 0,1,2,3,4
				SELECTCASE RAND:100
					CASE IS < 20
						LOCAL:5 = 0
					CASE IS < 40
						LOCAL:5 = 1
					CASE IS < 55
						LOCAL:5 = 2
					CASE IS < 70
						LOCAL:5 = 3
					CASE IS < 0
						LOCAL:5 = 4
					CASE IS < 85
						LOCAL:5 = 5
					CASE IS < 0
						LOCAL:5 = 6
					CASE IS < 100
						LOCAL:5 = 7
					CASE IS < 0
						LOCAL:5 = 8
					CASE IS < 0
						LOCAL:5 = 9
				ENDSELECT
				LOCAL:6 = 40 + RAND:2 * 3
			;LV48
			CASE 5,6,7,8,9
				SELECTCASE RAND:100
					CASE IS < 15
						LOCAL:5 = 0
					CASE IS < 0
						LOCAL:30 = 1
					CASE IS < 45
						LOCAL:5 = 2
					CASE IS < 60
						LOCAL:5 = 3
					CASE IS < 75
						LOCAL:5 = 4
					CASE IS < 80
						LOCAL:5 = 5
					CASE IS < 85
						LOCAL:5 = 6
					CASE IS < 95
						LOCAL:5 = 7
					CASE IS < 100
						LOCAL:5 = 8
					CASE IS < 0
						LOCAL:5 = 9
				ENDSELECT
				LOCAL:6 = 42 + RAND:2 * 3
			;LV51
			CASE 9,10,11,12,13
				SELECTCASE RAND:100
					CASE IS < 10
						LOCAL:5 = 0
					CASE IS < 20
						LOCAL:5 = 1
					CASE IS < 30
						LOCAL:5 = 2
					CASE IS < 40
						LOCAL:5 = 3
					CASE IS < 50
						LOCAL:5 = 4
					CASE IS < 60
						LOCAL:5 = 5
					CASE IS < 70
						LOCAL:5 = 6
					CASE IS < 80
						LOCAL:5 = 7
					CASE IS < 90
						LOCAL:5 = 8
					CASE IS < 100
						LOCAL:5 = 9
				ENDSELECT
				LOCAL:6 = 48 + RAND:2 * 3
			;LV54
			CASE 14,15,16,17,18
				SELECTCASE RAND:100
					CASE IS < 0
						LOCAL:5 = 0
					CASE IS < 15
						LOCAL:39 = 1
					CASE IS < 0
						LOCAL:5 = 2
					CASE IS < 30
						LOCAL:5 = 3
					CASE IS < 45
						LOCAL:5 = 4
					CASE IS < 0
						LOCAL:5 = 5
					CASE IS < 60
						LOCAL:5 = 6
					CASE IS < 0
						LOCAL:5 = 7
					CASE IS < 80
						LOCAL:5 = 8
					CASE IS < 100
						LOCAL:5 = 9
				ENDSELECT
				LOCAL:6 = 50 + RAND:2 * 3
		ENDSELECT
		SELECTCASE LOCAL:5
			;一列一色
			CASE 0
				FOR LOCAL, 7, 12
					CALL SET_ENEMY, LOCAL, LOCAL:1, LOCAL:6, 0
				NEXT
			;二列一色
			CASE 1
				FOR LOCAL, 7, 17
					CALL SET_ENEMY, LOCAL, LOCAL:1, LOCAL:6, 0
				NEXT
			;一列二色
			CASE 2
				FOR LOCAL, 7, 12
					CALL SET_ENEMY, LOCAL, LOCAL:(1 + LOCAL % 2), LOCAL:6, 0
				NEXT
			;二列二色
			CASE 3
				FOR LOCAL, 7, 17
					CALL SET_ENEMY, LOCAL, LOCAL:(1 + (LOCAL > 11)), LOCAL:6, 0
				NEXT
			;二列二色B
			CASE 4
				FOR LOCAL, 7, 17
					CALL SET_ENEMY, LOCAL, LOCAL:(1 + LOCAL % 2), LOCAL:6, 0
				NEXT
			;三色一列
			CASE 5
				CALL SET_ENEMY, 7, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 8, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 9, LOCAL:3, LOCAL:6, 0
				CALL SET_ENEMY, 10, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 11, LOCAL:1, LOCAL:6, 0
			;三色二列
			CASE 6
				CALL SET_ENEMY, 7, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 8, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 9, LOCAL:3, LOCAL:6, 0
				CALL SET_ENEMY, 10, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 11, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 12, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 13, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 14, LOCAL:3, LOCAL:6, 0
				CALL SET_ENEMY, 15, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 16, LOCAL:1, LOCAL:6, 0
			;4色一列
			CASE 7
				CALL SET_ENEMY, 7, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 8, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 10, LOCAL:3, LOCAL:6, 0
				CALL SET_ENEMY, 11, LOCAL:4, LOCAL:6, 0
			;4色二列A
			CASE 8
				CALL SET_ENEMY, 7, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 8, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 10, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 11, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 12, LOCAL:3, LOCAL:6, 0
				CALL SET_ENEMY, 13, LOCAL:3, LOCAL:6, 0
				CALL SET_ENEMY, 15, LOCAL:4, LOCAL:6, 0
				CALL SET_ENEMY, 16, LOCAL:4, LOCAL:6, 0
			;4色2列B
			CASE 9
				CALL SET_ENEMY, 7, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 8, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 10, LOCAL:3, LOCAL:6, 0
				CALL SET_ENEMY, 11, LOCAL:4, LOCAL:6, 0
				CALL SET_ENEMY, 12, LOCAL:1, LOCAL:6, 0
				CALL SET_ENEMY, 13, LOCAL:2, LOCAL:6, 0
				CALL SET_ENEMY, 15, LOCAL:3, LOCAL:6, 0
				CALL SET_ENEMY, 16, LOCAL:4, LOCAL:6, 0
		ENDSELECT
		CALL ADJUST_IMPERIAL
		CALL ADJUST_KAMEN
	ELSE
		CALL ENEMY_TABLE
	ENDIF
	RETURN 1
ELSE
	FLAG:未遭遇歩数 += 1
	RETURN 0
ENDIF
;=======================================================================
;敵の種族の種類数
;=======================================================================
@CLASS_NUM_53
RETURN CLASS_NUM_COMMON("上級")
;=======================================================================
;敵の総数
;ARGは出現する敵の種類です
;=======================================================================
@ENEMY_NUM_53, ARG
RETURN ENEMY_NUM_COMMON("上級", ARG)
;=======================================================================
;敵の種類
;=======================================================================
@ENEMY_53, ARG
SELECTCASE FLAG:現M
;LV45
	CASE 0,1,2,3,4
		SELECTCASE RAND:100
			CASE IS < 20
				RETURN [[キャラ:タマモ]],38 + RAND:2 * 3
			CASE IS < 40
				RETURN [[キャラ:オトヒメ]], 42+ RAND:2 * 3
			CASE IS < 60
				RETURN [[キャラ:ライラ]],39 + RAND:2 * 3
			CASE IS < 75
				RETURN [[キャラ:セイギュウカイ]], 37 + RAND:2 * 3
			CASE IS < 90
				RETURN [[キャラ:カマソッソ]], 40 + RAND:2 * 3
			CASE IS < 100
				RETURN [[キャラ:レギオン]],40  + RAND:2 * 3
		ENDSELECT
	;LV48
	CASE 5,6,7,8,9
		SELECTCASE RAND:100
			CASE IS < 20
				RETURN [[キャラ:ヴァーチャー]],44 + RAND:2 * 3
			CASE IS < 40
				RETURN [[キャラ:サキュバス]],43 + RAND:2 * 3
			CASE IS < 60
				RETURN [[キャラ:タマモ]],42 + RAND:2 * 3
			CASE IS < 80
				RETURN [[キャラ:トラルテクトリ]],46 + RAND:2 * 3
			CASE IS < 100
				RETURN [[キャラ:ベルセルク]],45 + RAND:2 * 3
		ENDSELECT
	;LV51
	CASE 9,10,11,12,13
		SELECTCASE RAND:100
			CASE IS < 20
				RETURN [[キャラ:トラソルテオトル]], 46 + RAND:2 * 3
			CASE IS < 40
				RETURN [[キャラ:ブリジット]], 50 + RAND:2 * 3
			CASE IS < 60
				RETURN [[キャラ:スフィンクス]],49 + RAND:2 * 3
			CASE IS < 80
				RETURN [[キャラ:トラルテクトリ]], 48 + RAND:2 * 3
			CASE IS < 100
				RETURN [[キャラ:クラマテング]],48 + RAND:2 * 3
		ENDSELECT
	;LV54
	CASE 14,15,16,17,18
		SELECTCASE RAND:100
			CASE IS < 20
				RETURN [[キャラ:トラソルテオトル]], 50 + RAND:2 * 3
			CASE IS < 40
				RETURN [[キャラ:ソロネ]],51 + RAND:2 * 3
			CASE IS < 60
				RETURN [[キャラ:バステト]], 52 + RAND:2 * 3
			CASE IS < 80
				RETURN [[キャラ:トラルテクトリ]],50 + RAND:2 * 3
			CASE IS < 100
				RETURN [[キャラ:ケツアルカトル]], 55 
		ENDSELECT
ENDSELECT
;=======================================================================
;仮面党員ステータス補正
;=======================================================================
@ADJUST_KAMEN
FOR LOCAL:1, 7 , 17
	LOCAL = POS(LOCAL:1)
	SIF LOCAL < 0
		CONTINUE
	SELECTCASE NO:LOCAL
		CASE [[キャラ:牡牛カメーンＲ]]
			CFLAG:LOCAL:速度補正 = -10
		CASE [[キャラ:獅子カメーンＲ]]
			CFLAG:LOCAL:速度補正 = -10
		CASE [[キャラ:蠍カメーンＲ]]
			CFLAG:LOCAL:速度補正 = -10
		CASE [[キャラ:水瓶カメーンＲ]]
			CFLAG:LOCAL:速度補正 = -10
		CASE [[キャラ:ジョーカー]]
			CSTR:LOCAL:思考パターン = ジョーカー
			LOCAL:2 = FLAG:戦闘難易度 - 3 > 0 ? 100 + (FLAG:戦闘難易度 - 3) * 20 # 100
			CALL SET_BATTLE_STATUS(LOCAL, 120 * LOCAL:2, "ＨＰ")
			CALL SET_BATTLE_STATUS(LOCAL, 30 * LOCAL:2, "ＭＰ")
			CFLAG:LOCAL:速度補正 = 20
			CFLAG:LOCAL:行動回数 = 2
		CASE [[キャラ:エンジェルジョーカー]]
			CSTR:LOCAL:思考パターン = エンジェルジョーカー
			LOCAL:2 = FLAG:戦闘難易度 - 3 > 0 ? 100 + (FLAG:戦闘難易度 - 3) * 20 # 100
			CALL SET_BATTLE_STATUS(LOCAL, 120 * LOCAL:2, "ＨＰ")
			CALL SET_BATTLE_STATUS(LOCAL, 30 * LOCAL:2, "ＭＰ")
			CFLAG:LOCAL:速度補正 = 20
			CFLAG:LOCAL:行動回数 = 2
		CASE [[キャラ:メタル・マム]]
			LOCAL:2 = FLAG:戦闘難易度 - 3 > 0 ? 100 + (FLAG:戦闘難易度 - 3) * 20 # 100
			CALL SET_BATTLE_STATUS(LOCAL, 60 * LOCAL:2, "ＨＰ")
			CALL SET_BATTLE_STATUS(LOCAL, 12 * LOCAL:2, "ＭＰ")
			CFLAG:LOCAL:速度補正 = -20
			CFLAG:LOCAL:COOP被ダメージ補正 = 100
			CFLAG:LOCAL:行動回数 = 2
	ENDSELECT
	CALL SYNC_STATUS, LOCAL
	CALL HEALTH_CHARA, LOCAL
NEXT
;=======================================================================
;帝国兵ステータス補正
;=======================================================================
@ADJUST_IMPERIAL
FOR LOCAL:1, 7 , 17
	LOCAL = POS(LOCAL:1)
	SIF LOCAL < 0
		CONTINUE
	SELECTCASE NO:LOCAL
		CASE [[キャラ:Ｓゾルダート]]
			CSTR:LOCAL:思考パターン = ゾルダート
			CFLAG:LOCAL:物理被ダメージ補正 = 100
			CFLAG:LOCAL:魔法被ダメージ補正 = -50
		CASE [[キャラ:Ｍゾルダート]]
			CSTR:LOCAL:思考パターン = ゾルダート
			CFLAG:LOCAL:物理被ダメージ補正 = 100
			CFLAG:LOCAL:魔法被ダメージ補正 = -75
		CASE [[キャラ:Ｓシュッツェ]]
			CSTR:LOCAL:思考パターン = シャルフシュッチェ
			CFLAG:LOCAL:物理被ダメージ補正 = 150
			CFLAG:LOCAL:魔法被ダメージ補正 = -75
		CASE [[キャラ:Ｖクラフト]]
			CSTR:LOCAL:思考パターン = ヴィンスクラフト
		CASE [[キャラ:コマンダント]]
			CSTR:LOCAL:思考パターン = コマンダント
			CFLAG:LOCAL:物理被ダメージ補正 = 100
			CFLAG:LOCAL:魔法被ダメージ補正 = -75
		CASE [[キャラ:Longinus１１]], [[キャラ:Longinus１２]], [[キャラ:Longinus１３]]
			CSTR:LOCAL:思考パターン = 聖創騎士団１
			;HP5000 MP1500
			LOCAL:2 = FLAG:戦闘難易度 - 3 > 0 ? 100 + (FLAG:戦闘難易度 - 3) * 20 # 100
			CALL SET_BATTLE_STATUS(LOCAL, 50 * LOCAL:2, "ＨＰ")
			CALL SET_BATTLE_STATUS(LOCAL, 15 * LOCAL:2, "ＭＰ")
			CFLAG:LOCAL:速度補正 = 15
		CASE [[キャラ:Longinus１０]], [[キャラ:Longinus９]], [[キャラ:Longinus８]]
			CSTR:LOCAL:思考パターン = 聖創騎士団２
			;HP6000 MP2000
			LOCAL:2 = FLAG:戦闘難易度 - 3 > 0 ? 100 + (FLAG:戦闘難易度 - 3) * 20 # 100
			CALL SET_BATTLE_STATUS(LOCAL, 60 * LOCAL:2, "ＨＰ")
			CALL SET_BATTLE_STATUS(LOCAL, 20 * LOCAL:2, "ＭＰ")
			CFLAG:LOCAL:速度補正 = 20
		CASE [[キャラ:Longinus５]], [[キャラ:Longinus６]], [[キャラ:Longinus７]]
			CSTR:LOCAL:思考パターン = 聖創騎士団３
			;HP7000 MP2500
			LOCAL:2 = FLAG:戦闘難易度 - 3 > 0 ? 100 + (FLAG:戦闘難易度 - 3) * 20 # 100
			CALL SET_BATTLE_STATUS(LOCAL, 70 * LOCAL:2, "ＨＰ")
			CALL SET_BATTLE_STATUS(LOCAL, 25 * LOCAL:2, "ＭＰ")
			CFLAG:LOCAL:速度補正 = 20
		CASE [[キャラ:Longinus２]], [[キャラ:Longinus３]], [[キャラ:Longinus４]]
			CSTR:LOCAL:思考パターン = 聖創騎士団４
			;HP4000 MP3000
			LOCAL:2 = FLAG:戦闘難易度 - 3 > 0 ? 100 + (FLAG:戦闘難易度 - 3) * 20 # 100
			CALL SET_BATTLE_STATUS(LOCAL, 80 * LOCAL:2, "ＨＰ")
			CALL SET_BATTLE_STATUS(LOCAL, 30 * LOCAL:2, "ＭＰ")
			CFLAG:LOCAL:速度補正 = 20
		CASE [[キャラ:Longinus１]]
			CSTR:LOCAL:思考パターン = 聖創騎士団５
			LOCAL:2 = FLAG:戦闘難易度 - 3 > 0 ? 100 + (FLAG:戦闘難易度 - 3) * 20 # 100
			CALL SET_BATTLE_STATUS(LOCAL, 100 * LOCAL:2, "ＨＰ")
			CALL SET_BATTLE_STATUS(LOCAL, 30 * LOCAL:2, "ＭＰ")
	ENDSELECT
	CALL SET_BATTLE_STATUS(LOCAL, MAXBASE:LOCAL:攻撃, "銃攻撃")
	CALL SYNC_STATUS, LOCAL
	CALL HEALTH_CHARA, LOCAL
NEXT
;=======================================================================
;帝国兵思考パターン
;コマンダントがいる場合、指令を出す
;なお、自爆は指令があったときのみ
;いない場合、50％の確率で逃げる
;=======================================================================
@SET_ACTION_ゾルダート, ARG
;入力行動を-1とターゲットを-1にしておく
CFLAG:ARG:入力行動 = -1
CFLAG:ARG:ターゲット = -1
SIF CFLAG:ARG:入力行動 == [[スキル:逃走]] || CFLAG:ARG:入力行動 == [[スキル:自爆]]
	RETURN 0
IF !FINDCHARA_ENEMY([[キャラ:コマンダント]]) && RAND:2
	CFLAG:ARG:入力行動 = [[スキル:逃走]]
	RETURN 0
ENDIF
SELECTCASE RAND:100
	CASE IS < 50
		CFLAG:ARG:入力行動 = [[スキル:ＧＵＮ]]
	CASE IS < 70
		CFLAG:ARG:入力行動 = ABL:ARG:スキル1
	CASE IS < 90
		CFLAG:ARG:入力行動 = ABL:ARG:スキル2
	CASEELSE
		CFLAG:ARG:入力行動 = ABL:ARG:スキル3
ENDSELECT
;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:入力行動
SIF RESULT == 0
	CFLAG:ARG:入力行動 = [[スキル:ＧＵＮ]]
;ここまでターゲットが決まってなかったら、ランダムターゲットをよんで決定
SIF CFLAG:ARG:ターゲット == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:入力行動
RETURN 1

@SET_ACTION_シャルフシュッチェ, ARG
;入力行動を-1とターゲットを-1にしておく
CFLAG:ARG:入力行動 = -1
CFLAG:ARG:ターゲット = -1
SIF CFLAG:ARG:入力行動 == [[スキル:逃走]] || CFLAG:ARG:入力行動 == [[スキル:自爆]]
	RETURN 0
IF !FINDCHARA_ENEMY([[キャラ:コマンダント]]) && RAND:2
	CFLAG:ARG:入力行動 = [[スキル:逃走]]
	RETURN 0
ENDIF

SELECTCASE RAND:100
	CASE IS < 50
		CFLAG:ARG:入力行動 = [[スキル:ＧＵＮ]]
	CASE IS < 70
		CFLAG:ARG:入力行動 = ABL:ARG:スキル1
	CASE IS < 90
		CFLAG:ARG:入力行動 = ABL:ARG:スキル2
	CASEELSE
		CFLAG:ARG:入力行動 = ABL:ARG:スキル3
ENDSELECT
;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:入力行動
SIF RESULT == 0
	CFLAG:ARG:入力行動 = [[スキル:ＧＵＮ]]
;ここまでターゲットが決まってなかったら、ランダムターゲットをよんで決定
SIF CFLAG:ARG:ターゲット == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:入力行動
RETURN 1

@SET_ACTION_ヴィンスクラフト, ARG
;入力行動を-1とターゲットを-1にしておく
CFLAG:ARG:入力行動 = -1
CFLAG:ARG:ターゲット = -1
SIF CFLAG:ARG:入力行動 == [[スキル:逃走]] || CFLAG:ARG:入力行動 == [[スキル:自爆]]
	RETURN 0
IF !FINDCHARA_ENEMY([[キャラ:コマンダント]]) && RAND:2
	CFLAG:ARG:入力行動 = [[スキル:逃走]]
	RETURN 0
ENDIF
SELECTCASE RAND:100
	CASE IS < 30
		CFLAG:ARG:入力行動 = [[スキル:SpiralBomb]]
	CASE IS < 60
		CFLAG:ARG:入力行動 = [[スキル:StunGrenade]]
	CASE IS < 75
		CFLAG:ARG:入力行動 = [[スキル:毒ガス]]
	CASE IS < 90
		CFLAG:ARG:入力行動 = [[スキル:神経ガス]]
	CASEELSE
		CFLAG:ARG:入力行動 = [[スキル:MagicalMirror]]
ENDSELECT
;アクション実行不能かランダムでガードにする
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:入力行動
IF RESULT == 0 || RAND:4 == 0
	CFLAG:ARG:入力行動 = -1
	CFLAG:ARG:防御フラグ = 1
	RETURN 1
ENDIF
;ここまでターゲットが決まってなかったら、ランダムターゲットをよんで決定
SIF CFLAG:ARG:ターゲット == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:入力行動
RETURN 1
@SET_ACTION_コマンダント, ARG
;入力行動を-1とターゲットを-1にしておく
CFLAG:ARG:入力行動 = -1
CFLAG:ARG:ターゲット = -1
TSTR = 
;指令
IF RAND:3 == 0 && FLAG:経過ターン数 > 1
	TSTR = 特攻指令
ELSE
	IF RAND:2 && 現HP割合(ARG) < 30
		TSTR = 撤退指令
	ELSE
		SIF RAND:3 == 0
			TSTR = 突撃指令
	ENDIF
ENDIF
IF STRLENS(TSTR)
	CFLAG:ARG:入力行動 = [[スキル:ＤＵＭＭＹ]]
	CFLAG:ARG:ターゲット = 22
	RETURN 1
ENDIF
IF RAND:2
	CFLAG:ARG:入力行動 = [[スキル:シングルショット]]
ELSE
	CFLAG:ARG:入力行動 = [[スキル:連続撃ち]]
ENDIF
;アクション実行不能かランダムでガードにする
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:入力行動
IF RESULT == 0 || RAND:4 == 0
	CFLAG:ARG:入力行動 = -1
	CFLAG:ARG:防御フラグ = 1
	RETURN 1
ENDIF
;ここまでターゲットが決まってなかったら、ランダムターゲットをよんで決定
SIF CFLAG:ARG:ターゲット == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:入力行動
RETURN 1
;----------------------------
;周期行動　３属性攻撃は５ターンに一回づつ来るだけなので壁で余裕なきもする
;なお、SHOCKでしびれやすいのでSHOCK押しも有効
;反射も有効。とくにガイスティブ
;----------------------------
@SET_ACTION_聖創騎士団１, ARG
;入力行動を-1とターゲットを-1にしておく
CFLAG:ARG:入力行動 = -1
CFLAG:ARG:ターゲット = -1
IF CFLAG:ARG:１moreフラグ == 2
	IF RAND:2
		CFLAG:ARG:入力行動 = [[スキル:Longinus Copy]]
	ELSE
		CFLAG:ARG:入力行動 = [[スキル:ＭＧ３４]]
	ENDIF
ELSEIF CFLAG:ARG:行動した回数 == 0
	SELECTCASE (FLAG:経過ターン数 + NO:ARG) % 5
		CASE 0
			CFLAG:ARG:入力行動 = [[スキル:ＭＧ３４]]
				CFLAG:ARG:行動回数 = 2
		CASE 1
			CFLAG:ARG:入力行動 = [[スキル:Longinus Copy]]
		CASE 2
			CFLAG:ARG:入力行動 = ABL:ARG:スキル1
			CFLAG:ARG:行動回数 = 2
		CASE 3
			CFLAG:ARG:入力行動 = [[スキル:ＭＧ３４]]
		CASE 4
			CFLAG:ARG:入力行動 = [[スキル:ガイスティブブリッツ]]
	ENDSELECT
ELSEIF CFLAG:ARG:行動した回数 == 1
	SELECTCASE (FLAG:経過ターン数 + NO:ARG) % 5
		CASE 2
			CFLAG:ARG:入力行動 = [[スキル:Longinus Copy]]
		CASEELSE
			CFLAG:ARG:入力行動 = [[スキル:ＭＧ３４]]
	ENDSELECT
	CFLAG:ARG:行動回数 = 1
ENDIF
;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:入力行動
SIF RESULT == 0
	CFLAG:ARG:入力行動 = 0
;ここまでターゲットが決まってなかったら、ランダムターゲットをよんで決定
SIF CFLAG:ARG:ターゲット == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:入力行動
RETURN 1

;----------------------------
;周期行動　３属性攻撃は５ターンに一回づつ来るだけなので壁で余裕なきもする
;なお、SHOCKでしびれやすいのでSHOCK押しも有効
;----------------------------
@SET_ACTION_聖創騎士団２, ARG
;入力行動を-1とターゲットを-1にしておく
CFLAG:ARG:入力行動 = -1
CFLAG:ARG:ターゲット = -1
IF CFLAG:ARG:１moreフラグ == 2
	IF RAND:3
		CFLAG:ARG:入力行動 = [[スキル:Longinus Copy]]
	ELSEIF RAND:2
		CFLAG:ARG:入力行動 = ABL:ARG:スキル5
	ELSE
		CFLAG:ARG:入力行動 = [[スキル:ＭＧ３４]]
	ENDIF
ELSEIF CFLAG:ARG:行動した回数 == 0
	SELECTCASE (FLAG:経過ターン数 + NO:ARG) % 5
		CASE 0
			CFLAG:ARG:入力行動 = ABL:ARG:スキル5
		CASE 1
			CFLAG:ARG:入力行動 = [[スキル:Longinus Copy]]
		CASE 2
			CFLAG:ARG:入力行動 = ABL:ARG:スキル1
			CFLAG:ARG:行動回数 = 2
		CASE 3
			CFLAG:ARG:入力行動 = [[スキル:ＭＧ３４]]
			CFLAG:ARG:行動回数 = 2
		CASE 4
			CFLAG:ARG:入力行動 = [[スキル:ガイスティブブリッツ]]
	ENDSELECT
ELSEIF CFLAG:ARG:行動した回数 == 1
	SELECTCASE (FLAG:経過ターン数 + NO:ARG) % 5
		CASE 2
			CFLAG:ARG:入力行動 = [[スキル:Longinus Copy]]
		CASEELSE
			CFLAG:ARG:入力行動 = [[スキル:ＭＧ３４]]
	ENDSELECT
	CFLAG:ARG:行動回数 = 1
ENDIF
;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:入力行動
SIF RESULT == 0
	CFLAG:ARG:入力行動 = 0
;ここまでターゲットが決まってなかったら、ランダムターゲットをよんで決定
SIF CFLAG:ARG:ターゲット == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:入力行動
RETURN 1
@ENEMY_BATTLE_MESSAGE_K4023, ARG
IF CFLAG:ARG:入力行動 == [[スキル:ＤＵＭＭＹ]]
	PRINTFORMW %CALLNAME:ARG%は味方に%TSTR%をだした！
	FOR LOCAL, 7, 17
		LOCALS = ポジション{LOCAL}
		SIF FLAG:LOCALS < 0
			CONTINUE
		IF TSTR == "突撃指令"
			CFLAG:(FLAG:LOCALS):攻撃強化 += 4
			SIF CFLAG:(FLAG:LOCALS):攻撃強化 > 32
				CFLAG:(FLAG:LOCALS):攻撃強化 = 32
			CFLAG:(FLAG:LOCALS):防御強化 += 4
			SIF CFLAG:(FLAG:LOCALS):防御強化 > 32
				CFLAG:(FLAG:LOCALS):防御強化 = 32
			CFLAG:(FLAG:LOCALS):魔法威力強化 += 4
			SIF CFLAG:(FLAG:LOCALS):魔法威力強化 > 32
				CFLAG:(FLAG:LOCALS):魔法威力強化 = 32
			CFLAG:(FLAG:LOCALS):命中強化 += 4
			SIF CFLAG:(FLAG:LOCALS):命中強化 > 32
				CFLAG:(FLAG:LOCALS):命中強化 = 32
				CFLAG:(FLAG:LOCALS):回避強化 += 4
			SIF CFLAG:(FLAG:LOCALS):回避強化 > 32
				CFLAG:(FLAG:LOCALS):回避強化 = 32
		ELSEIF TSTR == "撤退指令"
			SIF FLAG:LOCALS != ARG
				CFLAG:(FLAG:LOCALS):入力行動 = [[スキル:逃走]]
				CALL RANDOM_TARGET, FLAG:LOCALS, CFLAG:ARG:入力行動
		ELSE
			IF NO:(FLAG:LOCALS) == [[キャラ:Ｍゾルダート]] || NO:(FLAG:LOCALS) == [[キャラ:Ｓゾルダート]]
				CFLAG:(FLAG:LOCALS):入力行動 = [[スキル:自爆]]
				CALL RANDOM_TARGET, FLAG:LOCALS, CFLAG:(FLAG:LOCALS):入力行動
			ENDIF
		ENDIF
	NEXT
	IF TSTR == "突撃指令"
		PRINTFORMW 敵の全能力が上がった！
	ELSEIF TSTR == "撤退指令"
		CFLAG:ARG:逃走フラグ = 1
		PRINTFORMW %CALLNAME:ARG%は逃走した！
	ENDIF
ENDIF
;----------------------------
;周期行動　６属性に増加。サブは中ランク
;周期見るのはわりとむずいけど、スキル増えた分反射が使いやすく
;なお、SHOCKでしびれやすいのでSHOCK押しも有効
;----------------------------
@SET_ACTION_聖創騎士団３, ARG
;入力行動を-1とターゲットを-1にしておく
CFLAG:ARG:入力行動 = -1
CFLAG:ARG:ターゲット = -1
IF CFLAG:ARG:１moreフラグ == 2
	IF !RAND:4
		CFLAG:ARG:入力行動 = ABL:ARG:スキル1
	ELSEIF !RAND:3
		CFLAG:ARG:入力行動 = ABL:ARG:スキル2
	ELSEIF RAND:2
		CFLAG:ARG:入力行動 = [[スキル:Longinus Copy]]
	ELSE
		CFLAG:ARG:入力行動 = [[スキル:ＭＧ３４]]
	ENDIF
ELSEIF CFLAG:ARG:行動した回数 == 0
	SELECTCASE (FLAG:経過ターン数 + NO:ARG) % 8
		CASE 0
			CFLAG:ARG:入力行動 = ABL:ARG:スキル1
		CASE 1
			CFLAG:ARG:入力行動 = [[スキル:Longinus Copy]]
		CASE 2
			CFLAG:ARG:入力行動 = ABL:ARG:スキル2
			CFLAG:ARG:行動回数 = 2
		CASE 3
			CFLAG:ARG:入力行動 = [[スキル:ガイスティブブリッツ]]
		CASE 4
			CFLAG:ARG:入力行動 = ABL:ARG:スキル1
		CASE 5
			CFLAG:ARG:入力行動 = [[スキル:ＭＧ３４]]
			CFLAG:ARG:行動回数 = 2
		CASE 6
			CFLAG:ARG:入力行動 = ABL:ARG:スキル2
			CFLAG:ARG:行動回数 = 2
		CASE 7
			CFLAG:ARG:入力行動 = [[スキル:ガイスティブブリッツ]]
	ENDSELECT
ELSEIF CFLAG:ARG:行動した回数 == 1
	CFLAG:ARG:入力行動 = RAND:2 ? [[スキル:Longinus Copy]] # [[スキル:ＭＧ３４]]
	CFLAG:ARG:行動回数 = 1
ENDIF
;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:入力行動
SIF RESULT == 0
	CFLAG:ARG:入力行動 = 0
;ここまでターゲットが決まってなかったら、ランダムターゲットをよんで決定
SIF CFLAG:ARG:ターゲット == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:入力行動
RETURN 1
;----------------------------
;9ターン周期　他よりランダム性が高めだが
;属性スキルのタイミングは固定
;使うターンは3つ重なるので注意
;反射と壁は使いにくくなってる
;
;DDMとペルソナ使いとシフターはスキルターンにあわせて行動すればかなり有利
;スキルターン以外は物理対策にテトラ有利・ガイスティブ反射は相変わらず有効
;電撃はめは相変わらず有効
;穴はこのへん
;----------------------------
@SET_ACTION_聖創騎士団４, ARG
;入力行動を-1とターゲットを-1にしておく
CFLAG:ARG:入力行動 = -1
CFLAG:ARG:ターゲット = -1
IF CFLAG:ARG:１moreフラグ == 2
	SELECTCASE RAND:100
		CASE IS < 50
			CFLAG:ARG:入力行動 = [[スキル:ガイスティブブリッツ]]
		CASE IS < 25
			CFLAG:ARG:入力行動 = [[スキル:Longinus Copy]]
		CASEELSE
			CFLAG:ARG:入力行動 = [[スキル:ＭＧ３４]]
	ENDSELECT
ELSEIF CFLAG:ARG:行動した回数 == 0
	SELECTCASE FLAG:経過ターン数 % 9
		CASE 0
			CFLAG:ARG:入力行動 = ABL:ARG:スキル1
		CASE 3
			CFLAG:ARG:入力行動 = ABL:ARG:スキル2
		CASE 6
			CFLAG:ARG:入力行動 = ABL:ARG:スキル3
		CASEELSE
			SELECTCASE RAND:100
				CASE IS < 20
					CFLAG:ARG:入力行動 = [[スキル:ガイスティブブリッツ]]
				CASE IS < 60
					CFLAG:ARG:入力行動 = [[スキル:Longinus Copy]]
				CASEELSE
					CFLAG:ARG:入力行動 = [[スキル:ＭＧ３４]]
			ENDSELECT
			CFLAG:ARG:行動回数 = RAND(1, 3)
	ENDSELECT
ELSEIF CFLAG:ARG:行動した回数 == 1
	CFLAG:ARG:入力行動 = RAND:2 ? [[スキル:Longinus Copy]] # [[スキル:ＭＧ３４]]
	CFLAG:ARG:行動回数 = 1
ENDIF
;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:入力行動
SIF RESULT == 0
	CFLAG:ARG:入力行動 = 0
;ここまでターゲットが決まってなかったら、ランダムターゲットをよんで決定
SIF CFLAG:ARG:ターゲット == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:入力行動
RETURN 1
@SET_ACTION_聖創騎士団５, ARG
#LOCALSIZE 1
;入力行動を-1とターゲットを-1にしておく
CFLAG:ARG:入力行動 = -1
CFLAG:ARG:ターゲット = -1
IF CFLAG:ARG:１moreフラグ == 2
	SELECTCASE RAND:100
		CASE IS < 50
			CFLAG:ARG:入力行動 = [[スキル:ガイスティブブリッツ]]
		CASE IS < 30
			CFLAG:ARG:入力行動 = [[スキル:Longinus Copy]]
		CASEELSE
			CFLAG:ARG:入力行動 = [[スキル:メギドラオン]]
	ENDSELECT
ELSEIF CFLAG:ARG:行動した回数 == 0
	SELECTCASE FLAG:経過ターン数 % 9
		CASE 0
			CFLAG:ARG:入力行動 = ABL:ARG:スキル1
		CASE 1
			CFLAG:ARG:入力行動 = [[スキル:突撃の狼煙]]
		CASE 3
			CFLAG:ARG:入力行動 = ABL:ARG:スキル2
		CASE 5
			CFLAG:ARG:入力行動 = [[スキル:メギドラオン]]
		CASE 6
			CFLAG:ARG:入力行動 = ABL:ARG:スキル3
		CASE 8
			CFLAG:ARG:入力行動 = [[スキル:メギドラオン]]
		CASEELSE
			CFLAG:ARG:入力行動 = RAND:3 ? [[スキル:Longinus Copy]] # [[スキル:ガイスティブブリッツ]]
	ENDSELECT
ELSEIF CFLAG:ARG:行動した回数 == 1
	CFLAG:ARG:入力行動 = [[スキル:Longinus Copy]]
	FOR LOCAL, 1, 7
		SIF POS(LOCAL) >= 0 && CFLAG:POS(LOCAL):ステート == GET_STATE_NUM("SHOCK")
			CFLAG:ARG:入力行動 = [[スキル:ナイス・ショート]]
	NEXT
ENDIF
;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:入力行動
SIF RESULT == 0
	CFLAG:ARG:入力行動 = 0
;ここまでターゲットが決まってなかったら、ランダムターゲットをよんで決定
SIF CFLAG:ARG:ターゲット == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:入力行動
RETURN 1
@SET_ACTION_ジョーカー, ARG
;入力行動を-1とターゲットを-1にしておく
CFLAG:ARG:入力行動 = -1
CFLAG:ARG:ターゲット = -1
IF CFLAG:ARG:１moreフラグ == 2
	CFLAG:ARG:入力行動 = [[スキル:妖花烈風]]
ELSEIF CFLAG:ARG:行動した回数 == 0
	IF CFLAG:ARG:集中フラグ
		CFLAG:ARG:入力行動 = [[スキル:徒花一閃]]
	ELSE
		SELECTCASE RAND:100
			CASE IS < 10
				CFLAG:ARG:入力行動 = [[スキル:百花繚乱]]
			CASE IS < 20
				CFLAG:ARG:入力行動 = [[スキル:徒花一閃]]
			CASE IS < 60
				CFLAG:ARG:入力行動 = [[スキル:妖花烈風]]
			CASEELSE
				CFLAG:ARG:入力行動 = 0
		ENDSELECT
	ENDIF
ELSEIF CFLAG:ARG:行動した回数 == 1
	FOR LOCAL, GETNUM(CFLAG, "攻撃強化"), GETNUM(CFLAG, "BS付着率強化") + 1
		IF CFLAG:ARG:LOCAL < -8
			CFLAG:ARG:入力行動 = [[スキル:デ・クンダ]]
			CFLAG:ARG:ターゲット = 22
			CFLAG:ARG:行動回数 = 3
			RETURN 1
		ENDIF
	NEXT
	IF CFLAG:ARG:集中フラグ
		CFLAG:ARG:入力行動 = [[スキル:旋風陣]]
	ELSE
		SELECTCASE RAND:100
			CASE IS < 20
				CFLAG:ARG:入力行動 = [[スキル:コンセントレイト]]
			CASE IS < 35
				CFLAG:ARG:入力行動 = [[スキル:百花繚乱]]
			CASE IS < 50
				CFLAG:ARG:入力行動 = [[スキル:徒花一閃]]
			CASE IS < 75
				CFLAG:ARG:入力行動 = [[スキル:妖花烈風]]
			CASEELSE
				CFLAG:ARG:入力行動 = 0
		ENDSELECT
	ENDIF
ELSE
	CFLAG:ARG:入力行動 = [[スキル:百花繚乱]]
	CFLAG:ARG:行動回数 = 2
ENDIF

;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:入力行動
SIF RESULT == 0
	CFLAG:ARG:入力行動 = 0
;ここまでターゲットが決まってなかったら、ランダムターゲットをよんで決定
SIF CFLAG:ARG:ターゲット == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:入力行動
RETURN 1

@SET_ACTION_エンジェルジョーカー, ARG
;入力行動を-1とターゲットを-1にしておく
CFLAG:ARG:入力行動 = -1
CFLAG:ARG:ターゲット = -1
;HP25%以下から3回行動
SIF 現HP割合(ARG) <= 25
	CFLAG:ARG:行動回数 = 3
IF !GETBIT(TFLAG:アルファブラスタ, 1)
	CFLAG:ARG:入力行動 = [[スキル:アルファブラスタ]]
ELSE
	SELECTCASE TFLAG:435 % 12
		CASE 0
			CFLAG:ARG:入力行動 = [[スキル:ガルダイン]]
		CASE 1
			CFLAG:ARG:入力行動 = RAND:2 ? [[スキル:穢れ無き威光]] # 0
		CASE 2
			CFLAG:ARG:入力行動 = RAND:2 ? [[スキル:聖王光臨剣]] # 0
		CASE 3
			CFLAG:ARG:入力行動 = [[スキル:アクアダイン]]
		CASE 4
			CFLAG:ARG:入力行動 = RAND:2 ? [[スキル:聖王光臨剣]] # 0
		CASE 5
			CFLAG:ARG:入力行動 = RAND:2 ? [[スキル:ランダマイザ]] # 0
		CASE 6
			CFLAG:ARG:入力行動 = [[スキル:アギダイン]]
		CASE 7
			CFLAG:ARG:入力行動 = RAND:2 ? [[スキル:聖王光臨剣]] # 0
		CASE 8
			CFLAG:ARG:入力行動 = RAND:2 ? [[スキル:穢れ無き威光]] # 0
		CASE 9
			CFLAG:ARG:入力行動 = [[スキル:マグダイン]]
		CASE 10
			CFLAG:ARG:入力行動 = RAND:2 ? [[スキル:ランダマイザ]] # 0
		CASE 11
			CFLAG:ARG:入力行動 = RAND:2 ? [[スキル:聖王光臨剣]] # 0
	ENDSELECT
	TFLAG:435++
ENDIF
;アクション実行不能
CALL CHECK_ACTIONABLE, ARG, CFLAG:ARG:入力行動
SIF RESULT == 0
	CFLAG:ARG:入力行動 = 0
;ここまでターゲットが決まってなかったら、ランダムターゲットをよんで決定
SIF CFLAG:ARG:ターゲット == -1
	CALL RANDOM_TARGET, ARG, CFLAG:ARG:入力行動
RETURN 1


;=======================================================================
;輪姦参加悪魔
;=======================================================================
@DUNGEON_RAPE_DEVIL_53
;ランダムにどの悪魔が出るか決定
;RETURN CSV番号 , 人数 , レベル
SELECTCASE RAND:4
	CASE 0
		RETURN [[キャラ:ソロネ]] , 3 + RAND:10 , CSVBASE([[キャラ:ソロネ]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 1
		RETURN [[キャラ:レギオン]] , 3 + RAND:10 , CSVBASE([[キャラ:レギオン]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 2
		RETURN [[キャラ:カマソッソ]] , 3 + RAND:10 , CSVBASE([[キャラ:カマソッソ]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 3
		RETURN [[キャラ:プリンシパリティ]] , 3 + RAND:10 , CSVBASE([[キャラ:プリンシパリティ]] , GETNUM(BASE , "LV") , 0) + RAND:3
ENDSELECT
