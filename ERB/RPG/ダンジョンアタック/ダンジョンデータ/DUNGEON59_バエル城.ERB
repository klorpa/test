;=======================================================================
;バール城
;突入には史人君必須、これ以降の偽典ダンジョンも同条件とする
;使用フラグ
;59:0 ムールムール撃破フラグ
;59:1 突入フラグ
;=======================================================================

;=======================================================================
;攻略条件
;=======================================================================

@PREREQUISITE_DUNGEON_59
SIF (イベントフラグ:70:0 == 10 && FINDCHARA_B(4761,0) == 2 && (FINDCHARA_B(4763,0) == 2 || FINDCHARA_B(4764,0) == 2)) || (イベントフラグ:70:0 == 11 && FINDCHARA_B(4761,0) == 2)  
	RETURN 1
RETURN 0

;=======================================================================
;ダンジョン名
;=======================================================================
@GET_DUNGEON_NAME_59
RESULTS = バール城

;=======================================================================
;フロア名表示
;=======================================================================
@FLOORNAME_59
PRINT バール城
SELECTCASE FLAG:現M
	CASE 0
		PRINTL   １Ｆ
	CASE 1
		PRINTL   ２Ｆ
	CASE 2
		PRINTL   ３Ｆ
	CASE 3
		PRINTL   ４Ｆ
	CASE 4
		PRINTL   ５Ｆ
	CASE 5
		PRINTL   ６Ｆ
	CASE 6
		PRINTL   ７Ｆ
	CASE 7
		PRINTL   ８Ｆ
	CASE 8
		PRINTL   ９Ｆ
	CASE 9
		PRINTL   １０Ｆ
	CASE 10
		PRINTL   ６０Ｆ
	CASEELSE
		PRINTL
ENDSELECT


;=======================================================================
;特殊タイル表示
;=======================================================================




;=======================================================================
;スタート地点入力
;=======================================================================
@START_DUNGEON_59,ARG
FLAG:現M = 0
FLAG:現X = 7
FLAG:現Y = 1
;CALL AUTOMAP

;=======================================================================
;攻略開始時のイベント
;=======================================================================
@EVENT_DUNGEON_START_59
IF ダンジョンフラグ:59:0 == 0
	CALL MESSAGE_WINDOW_D, "", "＞" + CALLNAME:MASTER + "は葛城と共に/＞バール城へとやってきた"
	CALL MESSAGE_WINDOW_D, "", "＞思えば葛城と共にここまで、長く苦しい道のりであった"
	IF イベントフラグ:70:0 == 10
		CALL MESSAGE_WINDOW_D, "", "＞しかし、イシュタルはとうとう復活し/＞あとは分霊として葛城をつけ狙うバールさえ倒せばすべてが終わる"
	ELSE
		CALL MESSAGE_WINDOW_D, "", "＞しかし、復活したイシュタルは葛城と" + CALLNAME:MASTER + "に敗れ/＞あとは分霊として葛城をつけ狙うバールさえ倒せばすべてが終わる"
	ENDIF
	CALL MESSAGE_WINDOW_D, "", "＞葛城の運命に決着をつけてやるため、今" + CALLNAME:MASTER + "達はバールに挑む…"
	ダンジョンフラグ:70:0 = 1
ENDIF

;=======================================================================
;脱出時のイベント
;=======================================================================
@EVENT_DUNGEON_END_59

;=======================================================================
;指定したマスに進入可能か
;=======================================================================
@CAN_ENTER_59,ARG,ARG:1

CALL CAN_ENTER,ARG,ARG:1
RETURN RESULT

;=======================================================================
;フロアデータ
;=======================================================================
@MAKE_FLOOR_59
SELECTCASE FLAG:現M
	CASE 0
	;１階
		FLAG:最大X = 14
		FLAG:最大Y = 14
					;01234567890123
		CALL MAKE_FLOOR_LINE, 0,"       8      "
		CALL MAKE_FLOOR_LINE, 1,"   111111111  "
		CALL MAKE_FLOOR_LINE, 2,"    2     2   "
		CALL MAKE_FLOOR_LINE, 3,"    1     1   "
		CALL MAKE_FLOOR_LINE, 4,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 5,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 6,"  2         2 "
		CALL MAKE_FLOOR_LINE, 7,"  1         1 "
		CALL MAKE_FLOOR_LINE, 8,"  1         1 "
		CALL MAKE_FLOOR_LINE, 9,"  11111111111 "
		CALL MAKE_FLOOR_LINE,10,"       1      "
		CALL MAKE_FLOOR_LINE,11,"       1      "
		CALL MAKE_FLOOR_LINE,12,"       1      "
		CALL MAKE_FLOOR_LINE,13,"       6      "
							    ;012345678


	CASE 1
	;２階
		FLAG:最大X = 14
		FLAG:最大Y = 14
					;01234567890123
		CALL MAKE_FLOOR_LINE, 0,"       6      "
		CALL MAKE_FLOOR_LINE, 1,"   111111111  "
		CALL MAKE_FLOOR_LINE, 2,"    2     2   "
		CALL MAKE_FLOOR_LINE, 3,"    1     1   "
		CALL MAKE_FLOOR_LINE, 4,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 5,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 6,"  2         2 "
		CALL MAKE_FLOOR_LINE, 7,"  1         1 "
		CALL MAKE_FLOOR_LINE, 8,"  1         1 "
		CALL MAKE_FLOOR_LINE, 9,"  1         1 "
		CALL MAKE_FLOOR_LINE,10,"  11111111111 "
		CALL MAKE_FLOOR_LINE,11,"       1      "
		CALL MAKE_FLOOR_LINE,12,"       1      "
		CALL MAKE_FLOOR_LINE,13,"       7      "

	CASE 2
	;３階
		FLAG:最大X = 14
		FLAG:最大Y = 14
					;01234567890123
		CALL MAKE_FLOOR_LINE, 0,"              "
		CALL MAKE_FLOOR_LINE, 1,"       7      "
		CALL MAKE_FLOOR_LINE, 2,"   111111111  "
		CALL MAKE_FLOOR_LINE, 3,"    2     2   "
		CALL MAKE_FLOOR_LINE, 4,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 5,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 6,"  2         2 "
		CALL MAKE_FLOOR_LINE, 7,"  1         1 "
		CALL MAKE_FLOOR_LINE, 8,"  1         1 "
		CALL MAKE_FLOOR_LINE, 9,"  11111111111 "
		CALL MAKE_FLOOR_LINE,10,"       1      "
		CALL MAKE_FLOOR_LINE,11,"       6      "
		CALL MAKE_FLOOR_LINE,12,"              "
		CALL MAKE_FLOOR_LINE,13,"              "

	CASE 3
	;４階
		FLAG:最大X = 14
		FLAG:最大Y = 14
					;01234567890123
		CALL MAKE_FLOOR_LINE, 0,"              "
		CALL MAKE_FLOOR_LINE, 1,"       6      "
		CALL MAKE_FLOOR_LINE, 2,"   111111111  "
		CALL MAKE_FLOOR_LINE, 3,"    2     2   "
		CALL MAKE_FLOOR_LINE, 4,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 5,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 6,"  2         2 "
		CALL MAKE_FLOOR_LINE, 7,"  1         1 "
		CALL MAKE_FLOOR_LINE, 8,"  1         1 "
		CALL MAKE_FLOOR_LINE, 9,"  11111111111 "
		CALL MAKE_FLOOR_LINE,10,"       1      "
		CALL MAKE_FLOOR_LINE,11,"       7      "
		CALL MAKE_FLOOR_LINE,12,"              "
		CALL MAKE_FLOOR_LINE,13,"              "


	CASE 4
	;５階
		FLAG:最大X = 14
		FLAG:最大Y = 14
					;01234567890123
		CALL MAKE_FLOOR_LINE, 0,"              "
		CALL MAKE_FLOOR_LINE, 1,"       7      "
		CALL MAKE_FLOOR_LINE, 2,"   111111111  "
		CALL MAKE_FLOOR_LINE, 3,"    2     2   "
		CALL MAKE_FLOOR_LINE, 4,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 5,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 6,"  2         2 "
		CALL MAKE_FLOOR_LINE, 7,"  1         1 "
		CALL MAKE_FLOOR_LINE, 8,"  11111111111 "
		CALL MAKE_FLOOR_LINE, 9,"       1      "
		CALL MAKE_FLOOR_LINE,10,"       6      "
		CALL MAKE_FLOOR_LINE,11,"              "
		CALL MAKE_FLOOR_LINE,12,"              "
		CALL MAKE_FLOOR_LINE,13,"              "
	


	CASE 5
	;６階
		FLAG:最大X = 14
		FLAG:最大Y = 14
					;01234567890123
		CALL MAKE_FLOOR_LINE, 0,"              "
		CALL MAKE_FLOOR_LINE, 1,"       6      "
		CALL MAKE_FLOOR_LINE, 2,"   111111111  "
		CALL MAKE_FLOOR_LINE, 3,"    2     2   "
		CALL MAKE_FLOOR_LINE, 4,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 5,"  11111 11111 "
		CALL MAKE_FLOOR_LINE, 6,"  2         2 "
		CALL MAKE_FLOOR_LINE, 7,"  1         1 "
		CALL MAKE_FLOOR_LINE, 8,"  11111111111 "
		CALL MAKE_FLOOR_LINE, 9,"       1      "
		CALL MAKE_FLOOR_LINE,10,"       7      "
		CALL MAKE_FLOOR_LINE,11,"              "
		CALL MAKE_FLOOR_LINE,12,"              "
		CALL MAKE_FLOOR_LINE,13,"              "
		

	CASE 6
	;７階
		FLAG:最大X = 14
		FLAG:最大Y = 14
					;01234567890123
		CALL MAKE_FLOOR_LINE, 0,"              "
		CALL MAKE_FLOOR_LINE, 1,"       7      "
		CALL MAKE_FLOOR_LINE, 2,"       1      "
		CALL MAKE_FLOOR_LINE, 3,"       1      "
		CALL MAKE_FLOOR_LINE, 4,"       1      "
		CALL MAKE_FLOOR_LINE, 5,"       1      "
		CALL MAKE_FLOOR_LINE, 6,"       4      "
		CALL MAKE_FLOOR_LINE, 7,"       6      "
		CALL MAKE_FLOOR_LINE, 8,"              "
		CALL MAKE_FLOOR_LINE, 9,"              "
		CALL MAKE_FLOOR_LINE,10,"              "
		CALL MAKE_FLOOR_LINE,11,"              "
		CALL MAKE_FLOOR_LINE,12,"              "
		CALL MAKE_FLOOR_LINE,13,"              "


	CASE 7
	;８階
		FLAG:最大X = 14
		FLAG:最大Y = 14
					;01234567890123
		CALL MAKE_FLOOR_LINE, 0,"              "
		CALL MAKE_FLOOR_LINE, 1,"   1114111    "
		CALL MAKE_FLOOR_LINE, 2,"   1111111    "
		CALL MAKE_FLOOR_LINE, 3,"    11111     "
		CALL MAKE_FLOOR_LINE, 4,"     111      "
		CALL MAKE_FLOOR_LINE, 5,"      1       "
		CALL MAKE_FLOOR_LINE, 6,"      1       "
		CALL MAKE_FLOOR_LINE, 7,"      7       "
		CALL MAKE_FLOOR_LINE, 8,"              "
		CALL MAKE_FLOOR_LINE, 9,"              "
		CALL MAKE_FLOOR_LINE,10,"              "
		CALL MAKE_FLOOR_LINE,11,"              "
		CALL MAKE_FLOOR_LINE,12,"              "
		CALL MAKE_FLOOR_LINE,13,"              "

	CASEELSE

ENDSELECT

;=======================================================================
;[5]調べる　実行時のイベント
;=======================================================================
@EVENT_CHECK_DUNGEON_59

;==========
;出口の処理
;==========
IF DA:(FLAG:現X):(FLAG:現Y) == 8
	CALL DUNGEON_EXIT
	RETURN 1
;========
;宝の処理
;========
;% 10は10で割ったあまり、つまり下一桁がでてきます
;そして、下一桁はタイルの種類を表す
ELSEIF DA:(FLAG:現X):(FLAG:現Y) % 10 == 3
;	CALL TREASURE_59
;	RETURN RESULT
;=======
;階段
;=======
ELSEIF DA:(FLAG:現X):(FLAG:現Y) == 6
SELECTCASE FLAG:現M
	CASE 0
		CALL DUNGEON_UPSTAIRS,1,7,12
	CASE 1
		CALL DUNGEON_UPSTAIRS,2,7,2
	CASE 2
		CALL DUNGEON_UPSTAIRS,3,7,10
	CASE 3
		CALL DUNGEON_UPSTAIRS,4,7,2
	CASE 4
		CALL DUNGEON_UPSTAIRS,5,7,9
	CASE 5
		CALL DUNGEON_UPSTAIRS,6,7,2
	CASE 6
		CALL DUNGEON_UPSTAIRS,7,7,6
	CASE 7

	CASEELSE
ENDSELECT

RETURN 1

ELSEIF DA:(FLAG:現X):(FLAG:現Y) == 7
SELECTCASE FLAG:現M
	CASE 0

	CASE 1
		CALL DUNGEON_DOWNSTAIRS,0,7,12
	CASE 2
		CALL DUNGEON_DOWNSTAIRS,1,7,1
	CASE 3
		CALL DUNGEON_DOWNSTAIRS,2,7,10
	CASE 4
		CALL DUNGEON_DOWNSTAIRS,3,7,2
	CASE 5
		CALL DUNGEON_DOWNSTAIRS,4,7,9
	CASE 6
		CALL DUNGEON_DOWNSTAIRS,5,7,2
	CASE 7
		CALL DUNGEON_DOWNSTAIRS,6,7,6

	CASEELSE
ENDSELECT
RETURN 1
;========
;イベント
;========
ELSEIF DA:(FLAG:現X):(FLAG:現Y) % 10 == 4

ELSE
	CALL MESSAGE_WINDOW_D, "", "＞Nothing seems to be here."
	RETURN 0
ENDIF

;=======================================================================
;タイル進入時のイベント
;=======================================================================
@EVENT_ENTER_DUNGEON_59,ARG
;ARG = 進入時の向き　0の場合ワープなど
;==========
;出口の処理
;==========
IF DA:(FLAG:現X):(FLAG:現Y) % 10 == 8
	CALL DUNGEON_EXIT
	RETURN 1
;========
;宝の処理
;========
ELSEIF DA:(FLAG:現X):(FLAG:現Y) % 10 == 3
	SELECTCASE FLAG:現M
	CASE 0
	CASE 1
	CASE 2
	CASE 3
	CASE 4
	CASE 5
	CASE 6
		
	CASE 7

		
	CASEELSE
ENDSELECT
	RETURN RESULT
;=======
;階段
;=======
ELSEIF DA:(FLAG:現X):(FLAG:現Y) == 6
SELECTCASE FLAG:現M
	CASE 0
		CALL DUNGEON_UPSTAIRS,1,7,12
	CASE 1
		CALL DUNGEON_UPSTAIRS,2,7,2
	CASE 2
		CALL DUNGEON_UPSTAIRS,3,7,10
	CASE 3
		CALL DUNGEON_UPSTAIRS,4,7,2
	CASE 4
		CALL DUNGEON_UPSTAIRS,5,7,9
	CASE 5
		CALL DUNGEON_UPSTAIRS,6,7,2
	CASE 6
		CALL DUNGEON_UPSTAIRS,7,6,6
	CASE 7

	CASEELSE
ENDSELECT

RETURN 1
ELSEIF DA:(FLAG:現X):(FLAG:現Y) == 7
SELECTCASE FLAG:現M
	CASE 0

	CASE 1
		CALL DUNGEON_DOWNSTAIRS,0,7,12
	CASE 2
		CALL DUNGEON_DOWNSTAIRS,1,7,1
	CASE 3
		CALL DUNGEON_DOWNSTAIRS,2,7,10
	CASE 4
		CALL DUNGEON_DOWNSTAIRS,3,7,2
	CASE 5
		CALL DUNGEON_DOWNSTAIRS,4,7,9
	CASE 6
		CALL DUNGEON_DOWNSTAIRS,5,7,2
	CASE 7
		CALL DUNGEON_DOWNSTAIRS,6,7,6

	CASEELSE
ENDSELECT
RETURN 1
;==========
;扉の処理
;==========
ELSEIF DA:(FLAG:現X):(FLAG:現Y) == 2
	CALL DUNGEON_DOOR,ARG
	RETURN 1
;========================
;イベント
;========================
ELSEIF DA:(FLAG:現X):(FLAG:現Y) % 10 == 4
SELECTCASE FLAG:現M
	CASE 6
		IF ダンジョンフラグ:59:0 == 0
		CALL MESSAGE_WINDOW_D, "", "＞バール城を上に上にと登っていく" + CALLNAME:MASTER + "達の前に、一体の悪魔が姿を現した"
		CALL MESSAGE_WINDOW_D, "悪魔", "葛城史人…久しぶりだな…待っていたぞ…"	
		CALL MESSAGE_WINDOW_D, "", "＞ふと見れば、葛城は震え上がりながらも怒りにその目を焦がしていることがわかる…/＞おそらく奴が初台を滅ぼしたムールムールだろう…"
		CALL MESSAGE_WINDOW_D, "ムールムール", "取るに足らぬ非力な少年が、随分とたくましくなったものだ。/人間とはわからぬものよの…"
		CALL MESSAGE_WINDOW_D, "ムールムール", "だが、貴様の命運もこれまで…あのお方の御手を煩わせるまでもない/所詮は虫けらだということを、思い知らせてくれよう！！"
		CALL MESSAGE_WINDOW_D, "", "1 Fallen　Murmur　appeared！！"
		FLAG:逃走不可フラグ = 1
		FLAG:会話不能フラグ = 1
		FLAG:先制不意打ちキャンセル = 1
		CALL SET_ENEMY,9,1707,70,0,5;ムールムール
		MAXBASE:(CHARANUM-1):破魔 = 0
		MAXBASE:(CHARANUM-1):呪殺 = 0
		CFLAG:(CHARANUM-1):行動回数 = 2
		BASE:(CHARANUM-1):力 += 6
		BASE:(CHARANUM-1):知恵 += 6
		BASE:(CHARANUM-1):魔力 += 6
		BASE:(CHARANUM-1):耐力 += 5
		BASE:(CHARANUM-1):速さ += 5
		BASE:(CHARANUM-1):運 += 5
		CALL BATTLE_START
		FLAG:逃走不可フラグ = 0
		FLAG:会話不能フラグ = 0
		FLAG:先制不意打ちキャンセル = 0
		CALL MESSAGE_WINDOW_D, "ムールムール", "バカな…貴様如きに…この私が…！"
		CALL MESSAGE_WINDOW_D, "", "＞ムールムールは消え去った…"
		ダンジョンフラグ:59:0 =1
		ELSE
			CALL MESSAGE_WINDOW_D, "", "＞誰もいない"
		ENDIF
	CASE 7
		CALL MESSAGE_WINDOW_D, "", "＞大広間の中に、一体の悪魔が鎮座している…"
		IF イベントフラグ:70:0 == 10
			CALL MESSAGE_WINDOW_D, "バール", "よくぞ来た…我が妻イシュタルよ…/そして我が息子、葛城史人よ…"
			CALL MESSAGE_WINDOW_D, "バール", "さあ、母なる神イシュタルよ、目覚めて息子の血を以てして汝が罪を贖うのだ！"
			IF FINDCHARA_B(4763,0) == 2
				CALL MESSAGE_WINDOW_D, "由宇香", "断ります。　それに私は、この世ではあなたの妻ではありません。"
				CALL MESSAGE_WINDOW_D, "バール", "イシュタルよ、目を覚ませ！　そしてわが愛にこたえてくれ！"
				CALL MESSAGE_WINDOW_D, "由宇香", "私を恐怖と憎悪の血で穢し、さらに私の愛する人まで奪おうとするか…/この堕ちたるものよ！"
				CALL MESSAGE_WINDOW_D, "由宇香", "我が手にかかりそれにふさわしい場所に行くがよい！"
			ELSE
				CALL MESSAGE_WINDOW_D, "泪", "嫌よ、私は史人についていくわ。"
				CALL MESSAGE_WINDOW_D, "バール", "何だと！　貴様、幾ら我が妻とはいえ許さぬぞ！"
			ENDIF
			FLAG:逃走不可フラグ = 1
			FLAG:会話不能フラグ = 1
			FLAG:先制不意打ちキャンセル = 1
			CALL SET_ENEMY,9,270,70,0,5;バエル
			MAXBASE:(CHARANUM-1):破魔 = 0
			MAXBASE:(CHARANUM-1):呪殺 = 0
			CFLAG:(CHARANUM-1):行動回数 = 2
			BASE:(CHARANUM-1):力 += 6
			BASE:(CHARANUM-1):知恵 += 6
			BASE:(CHARANUM-1):魔力 += 6
			BASE:(CHARANUM-1):耐力 += 5
			BASE:(CHARANUM-1):速さ += 5
			BASE:(CHARANUM-1):運 += 5
			CALL BATTLE_START
			FLAG:逃走不可フラグ = 0
			FLAG:会話不能フラグ = 0
			FLAG:先制不意打ちキャンセル = 0
			CALL MESSAGE_WINDOW_D, "バール", "私の負けだ、古の王の殺害者がそうしたように、我が血肉を受け、魔王となってこの帝都に君臨するのだ。"
			CALL SHOW_PICTURE, "D"
			CALL MESSAGE_WINDOW_D, "", "＞葛城は…"
			CALL INPUT_SELECT_D("[1] 了承した/[2] 拒否した")
				IF RESULT == 1
					CALL MESSAGE_WINDOW_D, "", "＞するとなんとバールは葛城から力を吸い上げていく！"
					CALL MESSAGE_WINDOW_D, "バール", "ふふ、素晴らしい聖王の力、よくぞ人の身でここまで蓄えたものよ/だが愚かな息子よ、もはや私の敵はいない/さあ、愚かな妻ともども消え去るがいい！"
					CALL SET_ENEMY,9,270,90,0,5;バエル
					MAXBASE:(CHARANUM-1):破魔 = 0
					MAXBASE:(CHARANUM-1):呪殺 = 0
					CFLAG:(CHARANUM-1):行動回数 = 3
					BASE:(CHARANUM-1):力 += 6
					BASE:(CHARANUM-1):知恵 += 6
					BASE:(CHARANUM-1):魔力 += 6
					BASE:(CHARANUM-1):耐力 += 5
					BASE:(CHARANUM-1):速さ += 5
					BASE:(CHARANUM-1):運 += 5
					CALL BATTLE_START
					FLAG:逃走不可フラグ = 0
					FLAG:会話不能フラグ = 0
					FLAG:先制不意打ちキャンセル = 0
					CALL MESSAGE_WINDOW_D, "バール", "バカな…聖王の…力が…敗れよう…とは…"
				ELSE
				ENDIF
					CALL MESSAGE_WINDOW_D, "", "＞するとバールは一体のヒキガエルになってしまった…/＞葛城が踏み潰すと、ヒキガエルは魔王だったとは思えない声を上げて潰れた"
					CALL MESSAGE_WINDOW_D, "", "＞もはや葛城とイシュタルの邪魔をする者はいない…/＞二人は幸せに過ごすことだろう"
					CALL MESSAGE_WINDOW_D, "", "＞葛城から報酬として500000円を受け取った"
					MONEY += 500000
					イベントフラグ:70:0 = 12
					FLAG:脱出 = 1
		ELSEIF イベントフラグ:70:0 == 11
			CALL MESSAGE_WINDOW_D, "バール", "愚かな息子よ…よもや我が妻、イシュタルを滅ぼそうとはな…"
			CALL MESSAGE_WINDOW_D, "バール", "貴様ら…許さぬぞッ！/二人まとめて、冥府の闇に落としてくれる！！"
			FLAG:逃走不可フラグ = 1
			FLAG:会話不能フラグ = 1
			FLAG:先制不意打ちキャンセル = 1
			CALL SET_ENEMY,9,270,90,0,5;バエル
			MAXBASE:(CHARANUM-1):破魔 = 0
			MAXBASE:(CHARANUM-1):呪殺 = 0
			CFLAG:(CHARANUM-1):行動回数 = 3
			BASE:(CHARANUM-1):力 += 6
			BASE:(CHARANUM-1):知恵 += 6
			BASE:(CHARANUM-1):魔力 += 6
			BASE:(CHARANUM-1):耐力 += 5
			BASE:(CHARANUM-1):速さ += 5
			BASE:(CHARANUM-1):運 += 5
			CALL BATTLE_START
			FLAG:逃走不可フラグ = 0
			FLAG:会話不能フラグ = 0
			FLAG:先制不意打ちキャンセル = 0
			CALL MESSAGE_WINDOW_D, "バール", "私の負けだ、古の王の殺害者がそうしたように、我が血肉を受け、魔王となってこの帝都に君臨するのだ。"
			CALL SHOW_PICTURE, "D"
			CALL MESSAGE_WINDOW_D, "", "＞葛城は…"
			CALL INPUT_SELECT_D("[1] 了承した/[2] 拒否した")
				IF RESULT == 1
					CALL MESSAGE_WINDOW_D, "", "＞するとなんとバールは葛城から力を吸い上げていく！"
					CALL MESSAGE_WINDOW_D, "バール", "ふふ、素晴らしい聖王の力、よくぞ人の身でここまで蓄えたものよ/だが愚かな息子よ、もはや私の敵はいない/さあ、愚かな妻ともども消え去るがいい！"
					CALL SET_ENEMY,9,270,105,0,5;バエル、イシュタル倒せてればこの位勝てるでしょうきっと
					MAXBASE:(CHARANUM-1):破魔 = 0
					MAXBASE:(CHARANUM-1):呪殺 = 0
					CFLAG:(CHARANUM-1):行動回数 = 4
					BASE:(CHARANUM-1):力 += 10
					BASE:(CHARANUM-1):知恵 += 10
					BASE:(CHARANUM-1):魔力 += 10
					BASE:(CHARANUM-1):耐力 += 10
					BASE:(CHARANUM-1):速さ += 10
					BASE:(CHARANUM-1):運 += 10
					CALL BATTLE_START
					FLAG:逃走不可フラグ = 0
					FLAG:会話不能フラグ = 0
					FLAG:先制不意打ちキャンセル = 0
					CALL MESSAGE_WINDOW_D, "バール", "バカな…聖王の…力が…敗れよう…とは…"
				ELSE
				ENDIF
			CALL MESSAGE_WINDOW_D, "", "＞するとバールは一体のヒキガエルになってしまった…/＞葛城が踏み潰すと、ヒキガエルは魔王だったとは思えない声を上げて潰れた"
			CALL MESSAGE_WINDOW_D, "", "＞・・・・・・・"
			CALL MESSAGE_WINDOW_D, "", "＞・・・・・"
			CALL MESSAGE_WINDOW_D, "", "＞・・・"
			CALL MESSAGE_WINDOW_D, "", "＞・"
			PRINTFORML 
			CUSTOMDRAWLINE =
			PRINTFORML 
			PRINTFORMW かくして%CALLNAME:MASTER%は葛城と共に、魔都・東京の新たなる支配者となった。
			PRINTFORML 
			PRINTFORMW 聖王の力を前に数多の悪魔が滅ぼされ、躯は廃墟に山と積まれていた。
			PRINTFORMW その圧倒的な力の庇護を求め、東京に住む多くの住民が聖王への恭順を誓った。
			PRINTFORMW 聖王に対抗するべく、嘗て%CALLNAME:MASTER%が所属していたファントムは宿敵葛葉と手を結んだ、とのうわさもある。
			PRINTFORML 
			PRINTFORMW しかし、それでももはや葛城の敵にはなりえないであろう。
			PRINTFORMW 全てのバール神の分霊を破り、バール神そのものと言っても過言ではない葛城にとって、敵と言えば唯一神程度。
			PRINTFORMW そしてその傍らには最強の悪魔使い、%CALLNAME:MASTER%がいる。
			PRINTFORMW 唯一神ですら手出しできないほどに、葛城と%CALLNAME:MASTER%の戦力は強大なのだ。
			PRINTFORML 
			PRINTFORMW かくして東京は、悪魔にすら恐れられる魔都としてその名を魔界にまで轟かせることとなった。
			PRINTFORMW 聖王・葛城史人とその\@ TALENT:MASTER:140 ? パートナー  # 妻 \@、%CALLNAME:MASTER%の名と共に…
			PRINTFORML 
			PRINTFORMW 　　　　　　　　―― Ending No.016 (偽典・女神転生　"新・聖王伝説")
			PRINTFORML 
			FLAG:5 = 9
			SETBIT FLAG:キャンセル済みED,16
			SETBIT FLAG:発見ED,16
			FLAG:脱出 = 1
			PRINTFORML [0]End [1]Continue [2]Start new-game plus
			CALL INPUTINT,0, 1, 2
				IF RESULT == 0
					QUIT
				ELSEIF RESULT == 1
					CALL REQUEST_50_DAY_END
				ELSEIF RESULT == 2
					CALL START_NEWGAME
					RETURN 1
				ENDIF
		ENDIF	
	CASEELSE
ENDSELECT

ELSEIF DA:(FLAG:現X):(FLAG:現Y) % 10 == 9
SELECTCASE FLAG:現M
	CASE 0
	CASE 1
		
	CASE 2
		
	CASE 3
		
	CASE 4

	CASE 5

	CASE 6
		
	CASE 7

ENDSELECT
ENDIF


;=======================================================================
;エンカウント率
;=======================================================================
@ENCOUNT_RATE_59
FLAG:エンカウント率 = FLAG:未遭遇歩数*5

;=======================================================================
;エンカウント処理
;=======================================================================
@CHECK_ENCOUNT_59
IF RAND:100 < FLAG:エンカウント率
	CALL ENEMY_TABLE
	RETURN 1
ELSE
	FLAG:未遭遇歩数 += 1
	RETURN 0
ENDIF

;=======================================================================
;敵の種族の種類数
;=======================================================================
@CLASS_NUM_59
RETURN CLASS_NUM_COMMON("上級")
;=======================================================================
;敵の総数
;ARGは出現する敵の種類です
;=======================================================================
@ENEMY_NUM_59, ARG
RETURN ENEMY_NUM_COMMON("上級", ARG)

;=======================================================================
;敵の種類
;=======================================================================
@ENEMY_59, ARG
	IF RAND:4 == 0
		RETURN 271, 55;ダゴン
	ELSEIF RAND:3 == 0
		RETURN 675, 57;ヘカトンケイル
	ELSEIF RAND:2 == 0
		RETURN 708, 60;ティアマト
	ELSE
		RETURN 475, 60;ワイルドハント
	ENDIF

