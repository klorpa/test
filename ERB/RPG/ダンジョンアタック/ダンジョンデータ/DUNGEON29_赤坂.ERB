;=======================================================================
;ê‘ç‚
;=======================================================================
;ïœêî É_ÉìÉWÉáÉìÉtÉâÉO:[[É_ÉìÉWÉáÉì:ê‘ç‚]]:X
;0 ê‘ç‚ínâ∫ÇÃèÓïÒÅiêNì¸èåè)
;1 ÉqÉãÉR
;2 ÉVÉáÅ[ÉgÅEÉ^Å[É~ÉiÉã
;ëºÉ_ÉìÉWÉáÉìÅEàÀóäÇ≈ä÷åWÇ∑ÇÈïœêî
;40- ÉÅÉbÉZÉìÉWÉÉÅ[ÇÃÉtÉâÉO
;80- ïÛî†
;=======================================================================
;ê^2ãåÉçÉbÉ|ÉìÉMÇê‘ç‚ÇÃÇ≥ÇÁÇ…â∫ëwÇÃÉ_ÉìÉWÉáÉìÇ∆ÇµÇƒìùçá
;ICBMóéÇøÇƒÇ»Ç¢ÇÃÇ≈ÉKÉCÉAã≥Ç™óéÇøÇ‘ÇÍÇƒÇ»Ç¢ÇÊÇ§Ç…Åïí∑òVÇÃòbÇïœçX
;=======================================================================
;çUó™èåè
;=======================================================================
@PREREQUISITE_DUNGEON_29
;[IF_DEBUG]
;	RETURN 1
;[ENDIF]
;èåèÅFê‘ç‚ÇÃèÓïÒÇìæÇƒÇ¢ÇÈ
IF É_ÉìÉWÉáÉìÉtÉâÉO:[[É_ÉìÉWÉáÉì:ê‘ç‚]]:0
	RETURN 1
ENDIF

RETURN 0



;=======================================================================
;É_ÉìÉWÉáÉìñº
;=======================================================================
@GET_DUNGEON_NAME_29
RESULTS = ê‘ç‚


;=======================================================================
;ÉtÉçÉAñºï\é¶
;=======================================================================
@FLOORNAME_29
PRINT ê‘ç‚
SELECTCASE FLAG:åªM
	CASE 0
		PRINTL ÅEÇaÇVÇe
	CASE 1
		PRINTL ÅEÇaÇUÇe
	CASE 2
		PRINTL ÅEÇaÇTÇe
	CASE 3
		PRINTL ÅEÇaÇSÇe
	CASE 4
		PRINTL ÅEÇaÇRÇe
	CASE 5
		PRINTL ÅEÇaÇQÇe
	CASE 6
		PRINTL ÅEÇaÇPÇe
ENDSELECT



;=======================================================================
;ÉXÉ^Å[Égínì_ì¸óÕ
;=======================================================================
@START_DUNGEON_29,ARG
#LOCALSSIZE 1
FLAG:åªM = 6
FLAG:åªX = 11
FLAG:åªY = 23
;CALL AUTOMAP


;=======================================================================
;ÉXÉ^Å[ÉgéûÉCÉxÉìÉg
;=======================================================================
@EVENT_DUNGEON_START_29

;=======================================================================
;íEèoéûÇÃÉCÉxÉìÉg
;=======================================================================
@EVENT_DUNGEON_END_29

;=======================================================================
;éwíËÇµÇΩÉ}ÉXÇ…êiì¸â¬î\Ç©
;=======================================================================
@CAN_ENTER_29,ARG,ARG:1
RESULT = 1
SELECTCASE DA:ARG:(ARG:1)
	CASE 12
		;è„Ç…ÇµÇ©êiÇﬂÇ»Ç¢ÅÅè„Ç©ÇÁÇÕñ≥óù
		;è„Ç≈Ç†ÇÈéûÅÅåªç›ÇÃYÇ™ARG:1ÇÊÇËè¨Ç≥Ç¢Ç∆Ç´
		IF ARG:1 > FLAG:åªY
			CALL SET_FLOOR_ANALYZE(2, FLAG:åªÉ_ÉìÉWÉáÉì, FLAG:åªM, ARG, ARG:1)
			RETURN 0
		ENDIF
	CASE 22
		IF ARG > FLAG:åªX
			CALL SET_FLOOR_ANALYZE(2, FLAG:åªÉ_ÉìÉWÉáÉì, FLAG:åªM, ARG, ARG:1)
			RETURN 0
		ENDIF
	CASE 32
		IF ARG:1 < FLAG:åªY
			CALL SET_FLOOR_ANALYZE(2, FLAG:åªÉ_ÉìÉWÉáÉì, FLAG:åªM, ARG, ARG:1)
			RETURN 0
		ENDIF
	CASE 42
		IF ARG < FLAG:åªX
			CALL SET_FLOOR_ANALYZE(2, FLAG:åªÉ_ÉìÉWÉáÉì, FLAG:åªM, ARG, ARG:1)
			RETURN 0
		ENDIF
	CASEELSE
		CALL CAN_ENTER,ARG,ARG:1
ENDSELECT
RETURN RESULT

;=======================================================================
;ÉtÉçÉAÉfÅ[É^
;=======================================================================
@MAKE_FLOOR_29
SELECTCASE FLAG:åªM
	;ÇaÇPÇe
	CASE 6
		FLAG:ç≈ëÂX = 33
		FLAG:ç≈ëÂY = 25
		;						           1         2         3  
		;						 012345678901234567890123456789012
		CALL MAKE_FLOOR_LINE, 0,"                                 "
		CALL MAKE_FLOOR_LINE, 1,"     1111111 4 11111   3         "
		CALL MAKE_FLOOR_LINE, 2,"     1 2 1   2 1   1   2         "
		CALL MAKE_FLOOR_LINE, 3,"   111 1 1 1 1 1 1 11111         "
		CALL MAKE_FLOOR_LINE, 4,"   1     1 2 1 1 2   111         "
		CALL MAKE_FLOOR_LINE, 5,"   1 111 1 11121 111 111         "
		CALL MAKE_FLOOR_LINE, 6,"     111 2 1     111 1           "
		CALL MAKE_FLOOR_LINE, 7,"   1 11111 1 1112111 1           "
		CALL MAKE_FLOOR_LINE, 8,"   1   111 2 1   111 1           "
		CALL MAKE_FLOOR_LINE, 9," 4 111 1111111 1 111 11123   12e "
		CALL MAKE_FLOOR_LINE,10," 2 111 111     1 111 111     1   "
		CALL MAKE_FLOOR_LINE,11," 1 111 111 4 111 111 111 1111111 "
		CALL MAKE_FLOOR_LINE,12," 1 111   1 2 111 111         111 "
		CALL MAKE_FLOOR_LINE,13," 1 111 121111111 111111111112111 "
		CALL MAKE_FLOOR_LINE,14," 1 111         1   2         1   "
		CALL MAKE_FLOOR_LINE,15," 12111 1 4 4 4 1 111 124 11111   "
		CALL MAKE_FLOOR_LINE,16,"   111 1 2 2 2   1   1           "
		CALL MAKE_FLOOR_LINE,17,"   111 11111111111 111           "
		CALL MAKE_FLOOR_LINE,18,"   1   1 2 1 2 111 111           "
		CALL MAKE_FLOOR_LINE,19," 121 411 4 1 1 111 11111         "
		CALL MAKE_FLOOR_LINE,20,"   1       4       1   1         "
		CALL MAKE_FLOOR_LINE,21,"   11111111111 t 1 1 321         "
		CALL MAKE_FLOOR_LINE,22,"     11111 2 1 2 2 1             "
		CALL MAKE_FLOOR_LINE,23,"     11111 8 1111111             "
		CALL MAKE_FLOOR_LINE,24,"                                 "
		;						 012345678901234567890123456789012
		;						           1         2         3  
		
	;ÇaÇQÇe
	CASE 5
		FLAG:ç≈ëÂX = 9
		FLAG:ç≈ëÂY = 9
;								012345678
		CALL MAKE_FLOOR_LINE,0,"         "
		CALL MAKE_FLOOR_LINE,1," 52123 7 "
		CALL MAKE_FLOOR_LINE,2,"   1   2 "
		CALL MAKE_FLOOR_LINE,3," 511 111 "
		CALL MAKE_FLOOR_LINE,4," 1   1   "
		CALL MAKE_FLOOR_LINE,5," 125 1 5 "
		CALL MAKE_FLOOR_LINE,6,"   1 1 2 "
		CALL MAKE_FLOOR_LINE,7,"   12511 "
		CALL MAKE_FLOOR_LINE,8,"         "
	;ÇaÇRÇe
	CASE 4
		FLAG:ç≈ëÂX = 9
		FLAG:ç≈ëÂY = 9
;								012345678
		CALL MAKE_FLOOR_LINE, 0,"         "
		CALL MAKE_FLOOR_LINE, 1," 111   4 "
		CALL MAKE_FLOOR_LINE, 2," 2 1   2 "
		CALL MAKE_FLOOR_LINE, 3," 6 11111 "
		CALL MAKE_FLOOR_LINE, 4,"   11111 "
		CALL MAKE_FLOOR_LINE, 5,"   11111 "
		CALL MAKE_FLOOR_LINE, 6,"     2 2 "
		CALL MAKE_FLOOR_LINE, 7,"     3 7 "
		CALL MAKE_FLOOR_LINE, 8,"         "
	;ÇaÇSÇe
	CASE 3
		FLAG:ç≈ëÂX = 33
		FLAG:ç≈ëÂY = 9
		;						            1         2         3  
		;						 012345678901234567890123456789012
		CALL MAKE_FLOOR_LINE, 0,"                                 "
		CALL MAKE_FLOOR_LINE, 1," 6 1<111<11111 1111121 1111111   "
		CALL MAKE_FLOOR_LINE, 2," 2 1   ] 1 2 1 1 ]   1 1   2     "
		CALL MAKE_FLOOR_LINE, 3," 1 111 1 1 1 1 1 111 1 12e 1 t21 "
		CALL MAKE_FLOOR_LINE, 4," 1 1   1   1   1 1   1 1       1 "
		CALL MAKE_FLOOR_LINE, 5," 1 1>11111>12111 1 111 111 4 111 "
		CALL MAKE_FLOOR_LINE, 6," 1 1   [   1   ] ] 1   111 2 1 2 "
		CALL MAKE_FLOOR_LINE, 7," 12111 1112111 111>12111111111 7 "
		CALL MAKE_FLOOR_LINE, 8,"                                 "
		;						 012345678901234567890123456789012
		;						            1         2         3  

	;ÇaÇTÇe
	CASE 2
		FLAG:ç≈ëÂX = 17
		FLAG:ç≈ëÂY = 33
		;						           1     
		;						 01234567890123456
		CALL MAKE_FLOOR_LINE, 0,"                 "
		CALL MAKE_FLOOR_LINE, 1," 4 111 11111 1 1 "
		CALL MAKE_FLOOR_LINE, 2," 2 111   2 1 2 1 "
		CALL MAKE_FLOOR_LINE, 3," 1111111 1 11111 "
		CALL MAKE_FLOOR_LINE, 4," 2 111 2 1     1 "
		CALL MAKE_FLOOR_LINE, 5," t 111 111 111 1 "
		CALL MAKE_FLOOR_LINE, 6,"       1     1 2 "
		CALL MAKE_FLOOR_LINE, 7," 1211111<111>111 "
		CALL MAKE_FLOOR_LINE, 8,"         1     1 "
		CALL MAKE_FLOOR_LINE, 9," 111 a 1 1 321 1 "
		CALL MAKE_FLOOR_LINE,10," 2 1 2 1 1   1 1 "
		CALL MAKE_FLOOR_LINE,11," 1 1 111 11121 1 "
		CALL MAKE_FLOOR_LINE,12,"   1   2 1     1 "
		CALL MAKE_FLOOR_LINE,13," 1111111 4 321 1 "
		CALL MAKE_FLOOR_LINE,14," 2     ] 1   1 1 "
		CALL MAKE_FLOOR_LINE,15," 4 121 1 11121 1 "
		CALL MAKE_FLOOR_LINE,16," 1   1 ] 1     1 "
		CALL MAKE_FLOOR_LINE,17," 111 1 1 1 32111 "
		CALL MAKE_FLOOR_LINE,18," 1   1 1 2     1 "
		CALL MAKE_FLOOR_LINE,19," 121 1>1 11111 1 "
		CALL MAKE_FLOOR_LINE,20," 1   1 1 2   1 2 "
		CALL MAKE_FLOOR_LINE,21," 11111 1 111 111 "
		CALL MAKE_FLOOR_LINE,22," 1 2 1 ] 1 2 1   "
		CALL MAKE_FLOOR_LINE,23," 1 1 1 1 1 b 121 "
		CALL MAKE_FLOOR_LINE,24," 1 1   1         "
		CALL MAKE_FLOOR_LINE,25," 1 111 111>11111 "
		CALL MAKE_FLOOR_LINE,26," 2 1           ] "
		CALL MAKE_FLOOR_LINE,27," 1 11111 1 T 1 1 "
		CALL MAKE_FLOOR_LINE,28,"       1 1 2 2 1 "
		CALL MAKE_FLOOR_LINE,29," 11111 1 1111111 "
		CALL MAKE_FLOOR_LINE,30," 2     1   111 2 "
		CALL MAKE_FLOOR_LINE,31," 1111111112111 6 "
		CALL MAKE_FLOOR_LINE,32,"                 "
		;						 01234567890123456
		;						           1     
	;ÇaÇUÇe
	CASE 1
		FLAG:ç≈ëÂX = 17
		FLAG:ç≈ëÂY = 17
;								 0         1      
;								 01234567890123456
		CALL MAKE_FLOOR_LINE, 0,"                 "
		CALL MAKE_FLOOR_LINE, 1," 1112111 111 321 "
		CALL MAKE_FLOOR_LINE, 2," 1     1 1 2   1 "
		CALL MAKE_FLOOR_LINE, 3," 1 11121 1 1 3 1 "
		CALL MAKE_FLOOR_LINE, 4,"   2   1   2 2 2 "
		CALL MAKE_FLOOR_LINE, 5," a 1 111 12111 1 "
		CALL MAKE_FLOOR_LINE, 6," 2 1 2   2     1 "
		CALL MAKE_FLOOR_LINE, 7," 111 11111211121 "
		CALL MAKE_FLOOR_LINE, 8,"                 "
		CALL MAKE_FLOOR_LINE, 9," 3 1>1111111 111 "
		CALL MAKE_FLOOR_LINE,10," 2 1   [ 1 ] 1 2 "
		CALL MAKE_FLOOR_LINE,11," 11121 1 1 1 1 b "
		CALL MAKE_FLOOR_LINE,12," 1     1   2 2   "
		CALL MAKE_FLOOR_LINE,13," 123 11111 11111 "
		CALL MAKE_FLOOR_LINE,14," 1   1     1   2 "
		CALL MAKE_FLOOR_LINE,15," 1<11121111121 1 "
		CALL MAKE_FLOOR_LINE,16,"                 "
	;ÇaÇVÇe
	CASE 0
		FLAG:ç≈ëÂX = 17
		FLAG:ç≈ëÂY = 17
;								 0         1
;								 01234567890123456
		CALL MAKE_FLOOR_LINE, 0,"                 "
		CALL MAKE_FLOOR_LINE, 1," a 1 1111111 111 "
		CALL MAKE_FLOOR_LINE, 2," 2 1 1 2 2 1   1 "
		CALL MAKE_FLOOR_LINE, 3," 111 1 1 1 1 421 "
		CALL MAKE_FLOOR_LINE, 4,"   2 1     1   1 "
		CALL MAKE_FLOOR_LINE, 5," 11411 4 111 421 "
		CALL MAKE_FLOOR_LINE, 6," 1   1 2 2 1   1 "
		CALL MAKE_FLOOR_LINE, 7," 124 1 1 1 11111 "
		CALL MAKE_FLOOR_LINE, 8," 1   1 2 1 1   1 "
		CALL MAKE_FLOOR_LINE, 9," 11111 1 1 1 121 "
		CALL MAKE_FLOOR_LINE,10," 1   1 2 2 1   1 "
		CALL MAKE_FLOOR_LINE,11," 124 111 1 11111 "
		CALL MAKE_FLOOR_LINE,12," 1   1     1 2   "
		CALL MAKE_FLOOR_LINE,13," 124 1 4 1 1 111 "
		CALL MAKE_FLOOR_LINE,14," 1   1 2 2 1 1 2 "
		CALL MAKE_FLOOR_LINE,15," 111 1111111 1 b "
		CALL MAKE_FLOOR_LINE,16,"                 "


ENDSELECT

;=======================================================================
;ì¡éÍÉ^ÉCÉãï\é¶
;=======================================================================
@TILE_MARK_COMMON_29_0, ARG , ARG:1 , ARG:2
SELECTCASE ARG / 10
	CASE 1
		RESULTS = Å@
	CASEELSE
		RETURN 1
ENDSELECT

@TILE_MARK_COMMON_29_9, ARG , ARG:1 , ARG:2
SELECTCASE ARG / 10
	CASE 1
		RESULTS = ST
	CASE 2 , 3 , 4
		RESULTS = Çd
	CASEELSE
		RETURN 1
ENDSELECT

@TILE_MARK_COMMON_29_2, ARG , ARG:1 , ARG:2
SIF GET_FLOOR_ANALYZE_T(ARG:1, ARG:2) < 2
	RETURN 1
SELECTCASE ARG / 10
	CASE 1
		RESULTS = Å™
	CASE 2
		RESULTS = Å©
	CASE 3
		RESULTS = Å´
	CASE 4
		RESULTS = Å®
	CASEELSE
		RETURN 1
ENDSELECT

@TILE_MARK_COMMON_29_4, ARG , ARG:1 , ARG:2
SELECTCASE ARG / 10
	;ÉÅÉbÉZÉìÉWÉÉÅ[
	CASE 600
		RESULTS = íb
	CASE 603 , 5
		RESULTS = ïê
	CASE 604
		RESULTS = é
	CASE 605 , 6
		RESULTS = ñh
	CASE 608 , 7
		SETCOLOR COLOR("RED")
		RESULTS = Çf
	CASE 400
		RESULTS = CB
	CASE 200 , 1 , 4
		RETURN 1
	CASEELSE
		SETCOLOR 0x00ff00
		RESULTS = Çç
ENDSELECT

;=======================================================================
;É^ÉCÉãíËã`
;=======================================================================
@DEFINE_TILES_29, ARGS, ARG, ARG:1
SELECTCASE ARGS
	CASE "t"
		RETURN 19
	CASE "e"
		RETURN 29
	CASE "a"
		RETURN 39
	CASE "b"
		RETURN 49
	CASE "["
		RETURN 12
	CASE "<"
		RETURN 22
	CASE "]"
		RETURN 32
	CASE ">"
		RETURN 42
ENDSELECT

;=======================================================================
;É^ÉCÉãí≤êÆ
;=======================================================================
@MAKE_FLOOR_LINE_COMMON_29, ARG, ARG:1, ARG:2
#LOCALSIZE 30
;LOCAL:3 ïÛî† É_ÉìÉWÉáÉìÉtÉâÉO:84~99
;LOCAL:4 ÉCÉxÉìÉg
;(0/0)Ç≈LOCALÇè¡ãé
SIF ARG:1 == 0 && ARG:2 == 0
	VARSET LOCAL
SELECTCASE ARG
	CASE 3
		IF GETBIT(É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):(FLAG:åªM+70), LOCAL:3)
			DA:(ARG:1):(ARG:2) = 1
		ELSE
			DA:(ARG:1):(ARG:2) = FLAG:åªM *1000 + LOCAL:3 * 10 + 3
		ENDIF
		LOCAL:3++
	CASE 4
		DA:(ARG:1):(ARG:2) = FLAG:åªM *1000 + LOCAL:4 * 10 + 4
		LOCAL:4++
	CASE 5
		;DA:(ARG:1):(ARG:2) = FLAG:åªM *1000 + LOCAL:5 * 10 + 5
		;LOCAL:5++
	CASE 6
		DA:(ARG:1):(ARG:2) = FLAG:åªM *1000 + LOCAL:6 * 10 + 6
		LOCAL:6++
	CASE 7
		DA:(ARG:1):(ARG:2) = FLAG:åªM *1000 + LOCAL:7 * 10 + 7
		LOCAL:7++
	CASE 8
		DA:(ARG:1):(ARG:2) = FLAG:åªM *1000 + LOCAL:8 * 10 + 8
		LOCAL:8++
	CASE 9
		DA:(ARG:1):(ARG:2) = FLAG:åªM *1000 + LOCAL:9 * 10 + 9
		LOCAL:9++
	
ENDSELECT
SIF FLAG:åªM == 0 && RANGE(ARG:1 , 17 , 23) && RANGE(ARG:2 , 2 , 10) && BASE:MASTER:ímåb < 10
	DA:(ARG:1):(ARG:2) = 0
	

;=======================================================================
;[5]í≤Ç◊ÇÈÅ@é¿çséûÇÃÉCÉxÉìÉg
;=======================================================================
@EVENT_CHECK_DUNGEON_29
CALL EVENT_DUNGEON_29 , 0 , 1
RETURN RESULT


;=======================================================================
;É^ÉCÉãêiì¸éûÇÃÉCÉxÉìÉg
;=======================================================================
@EVENT_ENTER_DUNGEON_29, ARG
;ARG = êiì¸éûÇÃå¸Ç´Å@0ÇÃèÍçáÉèÅ[ÉvÇ»Ç«
CALL EVENT_DUNGEON_29, ARG , 0
RETURN RESULT

@EVENT_DUNGEON_29, ARG, ARG:1
#DIM åè¬â¬î\ÉLÉÉÉâ , 7
SELECTCASE DA:(FLAG:åªX):(FLAG:åªY) % 10
;==========
;èoå˚ÇÃèàóù
;==========
	CASE 8
		CALL DUNGEON_EXIT
		RETURN 1
;========
;ïÛÇÃèàóù
;========
	CASE 3
		CALL TREASURE_29
		RETURN 1
	
;=======
;äKíi
;=======
	CASE 6
		CALL UPSTAIRS_29
		RETURN 1

	CASE 7
		CALL DOWNSTAIRS_29
		RETURN 1

;==========
;î‡ÇÃèàóù
;==========
	CASE 2
		CALL DUNGEON_DOOR,ARG
		RETURN 1

;========================
;ÉCÉxÉìÉg
;========================
	CASE 4
		LOCAL = DA:(FLAG:åªX):(FLAG:åªY) / 10 % 10
		SIF GETBIT(É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):(40+FLAG:åªM) , LOCAL) && ARG:1 == 0
			RETURN 0
		SELECTCASE DA:(FLAG:åªX):(FLAG:åªY) / 10
			;ÇaÇPÇeÅ@ÉCÉxÉìÉg
			CASE 600
				;íbñËâÆ
				CALL MESSAGE_WINDOW_D , "" , "ÅÑìÒêlëgÇÃÉhÉèÅ[ÉtÇ™íbñËédéñÇÇµÇƒÇ¢ÇÈÅcÅc"
				  IF ITEM:4070 == 1
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑÇ†Ç»ÇΩÇÕÉhÉèÅ[ÉtíBÇÃãªñ°Çé‰Ç´ÇªÇ§Ç»/å√Ç¢ïÛÇéùÇ¡ÇƒÇ¢ÇÈÇÃÇévÇ¢èoÇµÇΩ"
				     CALL MESSAGE_WINDOW_D , "íbñËâÆ" , "âΩÇ©ópÇ©ÅHÅ@ó‚Ç‚Ç©ÇµÇ»ÇÁÅc/ÇﬁÅcÅ@ÇøÇÂÇ¡Ç∆ë“ÇƒÇªÇ¢Ç¬ÇÕÅcÅI"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑÉhÉèÅ[ÉtíBÇÕêHÇ¢ì¸ÇÈÇÊÇ§Ç…DraupnirÇå©Ç¬ÇﬂÇƒÇ¢ÇÈ"
				     CALL MESSAGE_WINDOW_D , "íbñËâÆ" , "Ç»ÇÒÇ∆DraupnirÇ©Åc/Ç‹Ç≥Ç©Ç®ñ⁄Ç…Ç©Ç©ÇÈì˙Ç™Ç≠ÇÈÇ∆ÇÕÇ»Åc"
				     CALL MESSAGE_WINDOW_D , "íbñËâÆ" , "Ç±Ç¢Ç¬ÇÕê_ë„ÇÃë„ÅcÅ@ãCÇÃâìÇ≠Ç»ÇÈÇÊÇ§Ç»ëÂêÃÇ…/ÉhÉèÅ[ÉtÇÃíbñËåZíÌÇ…ÇÊÇ¡ÇƒçÏÇÁÇÍÇΩÇÒÇ∂Ç·ÇÊ"
				     CALL MESSAGE_WINDOW_D , "íbñËâÆ" , "ÇªÇµÇƒÉèÉVìôÇÕÇ»ÅAÇªÇÃåZíÌÇÃéqë∑Ç»ÇÒÇ∂Ç·/Ç»ÇÒÇ∆Ç‡äÔñ≠Ç»âèÇ∂Ç·ÇÌÇ¢"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑÇ†Ç»ÇΩÇÕDraupnirÇéËìnÇµÅAçDÇ´Ç»ÇæÇØå©ÇÈÇÊÇ§ì`Ç¶ÇΩ"
				     CALL MESSAGE_WINDOW_D , "íbñËâÆ" , "Ç®Ç®ÅAóLÇËìÔÇ¢ÅBÅ@ÅcÇ≈ÇÕîqå©Ç¢ÇΩÇ∑"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑã±ÇµÇ≠ò˙Ç¢Çƒê_ïÛÇéÛÇØéÊÇÈÇ∆ÅAäΩäÏÇ…ñûÇøÇΩï\èÓÇ≈/Ç†ÇÈÇ¢ÇÕËıÇ´ÅAÇ†ÇÈÇ¢ÇÕä¥íQÇµñ⁄ÇãPÇ©ÇπÇƒí≤Ç◊énÇﬂÇΩ"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑãCÇ™Ç¬Ç≠Ç∆ëºÇÃÉhÉèÅ[ÉtíBÇ‡èWÇ‹ÇËÅAëÂïœÇ»ìˆÇÌÇ¢Ç…Ç»Ç¡ÇƒÇ¢ÇΩ/ÇµÇ©ÇµìxÇí¥Ç¶ÇƒëõÇÆÇÊÇ§Ç»é“ÇÕÇ»Ç≠ÅAäFàÍólÇ…ê_ñ≠Ç…ÇµÇƒÇ¢ÇΩ"
				     CALL MESSAGE_WINDOW_D , "êeï˚" , "ç°ÇÃÉèÉVìôÇ©ÇÁå©ÇÍÇŒÅAëfñpÇ≈ítêŸÇ»ïîï™Ç‡Ç†ÇÈ/ÇªÇÃàÍï˚Ç≈ÅAÉèÉVìôÇ≈ÇÕìûíÍãyÇ—Ç‡Ç¬Ç©ÇÒïîï™Ç‡Ç†ÇÈ"
				     CALL MESSAGE_WINDOW_D , "êeï˚" , "ÇæÇ™ífåæÇ≈Ç´ÇÈÅBÇ±ÇÍÇÕÇ‹Ç≥ÇµÇ≠ÉhÉèÅ[ÉtÇÃã∆Åc/ÉèÉVìôÇÃç™åπÇ≈Ç†ÇËñ⁄ïWÇ≈Ç†ÇËÅAèÿç∂Ç≈Ç†ÇË·‡éùÇ»ÇÃÇæ"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑÉhÉèÅ[ÉtíBÇÃíÜÇ…ÇÕä¥ã…Ç‹Ç¡ÇƒãÉÇ´èoÇ∑é“Ç‡Ç¢ÇΩ/ìπÇÕà·Ç¶Ç«---à·Ç¢Ç∑Ç¨ÇÈÇ™---Ç†Ç»ÇΩÇ‡Ç‹ÇΩàÍóıÇÃêEêlÇ≈Ç†ÇÈ/îﬁÇÁÇ…ã§ä¥Ç∑ÇÈÇ∆Ç±ÇÎÇÕÇ†Ç¡ÇΩ"
				     CALL MESSAGE_WINDOW_D , "íbñËâÆ" , "Ç∂Ç·Ç™ÅcÅ@Ç«Ç§Ç‚ÇÁÇ±Ç¢Ç¬ÇÕÅuéÄÇÒÇ≈ÅvÇ®ÇÈÇÊÇ§Ç∂Ç·/ñ{óàÇÃóÕÇé∏Ç¡ÇƒÇ®ÇÈÅBï¿Ç‘Ç‡ÇÃÇ»Ç´ÇªÇÃñÇóÕÇ"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑÇ†Ç»ÇΩÇÕDraupnirÇì¸éËÇµÇΩåoà‹Çê‡ñæÇµÇΩ"
				     CALL MESSAGE_WINDOW_D , "êeï˚" , "ÉxÉãÅEÉfÉãÇ©ÇÁìæÇΩÇÃÇ≈Ç†ÇÍÇŒÅAçáì_Ç‡Ç¢Ç≠/ÉIÅ[ÉfÉBÉìÇ™ëßéqÇÃéÄÇìâÇÒÇ≈ã§Ç…ñÑëíÇµÇΩÇ∆ï∑Ç≠Ç©ÇÁÇ»"
				     CALL MESSAGE_WINDOW_D , "êeï˚" , "ïõëíïiÇ∆ÇµÇƒñªï{Ç…ìnÇ¡ÇΩÇΩÇﬂÅADraupnirÇ‡ÅuéÄÇÒÇæÅvñÛÇæÇ»/ëhÇ¡ÇΩÉxÉãÅEÉfÉãÇÕçƒìxéÄÇÒÇæÇ™ÅAÇ±Ç¢Ç¬ÇÕâ^ó«Ç≠åªê¢Ç…écÇ¡ÇΩÅAÇ∆"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑíbñËåZíÌÇ™âΩéñÇ©åæÇ®Ç§Ç∆Ç∑ÇÈÅBÇæÇ™êeï˚ÇÕÇªÇÍÇËıÇ¢ÇƒêßÇµÇΩ/êeï˚ÇÕÇ†Ç»ÇΩÇ…å¸Ç´íºÇÈÇ∆Ç±Ç§åæÇ¡ÇΩ"
				     CALL MESSAGE_WINDOW_D , "êeï˚" , "Ç»Ç†ó∑ÇÃï˚/ê‹ÇËì¸Ç¡ÇƒãMìaÇ…óäÇ›ÇΩÇ¢Ç±Ç∆Ç™Ç†ÇÈÇÃÇæÇ™"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑêeï˚ÇÕàÍåƒãzì¸ÇÍÇΩÇ†Ç∆ÅAë±ÇØÇΩ"
				     CALL MESSAGE_WINDOW_D , "êeï˚" , "Ç±ÇÃDraupnirÇÅAÉèÉVìôÇ…ë≈ÇøíºÇµÇ≥ÇπÇƒÇ≠ÇÍÇÒÇ©/ÉèÉVìôÇ»ÇÁÇªÇÍÇ™Ç≈Ç´ÇÈÅBÉèÉVìôÇ™Ç‚ÇÁÇÀÇŒÇ»ÇÁÇÒ/ÇªÇÍÇ±ÇªÇ™ÉèÉVìôÇÃê∂Ç´ÇΩèÿÇ∆Ç»ÇÈÇÃÇæ"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑífÇÈóùóRÇ»Ç«ÅAÇ†ÇÎÇ§î§Ç‡Ç»Ç¢ÅBÇ†Ç»ÇΩÇÕâıë¯ÇµÇΩ/ÉhÉèÅ[ÉtíBÇ©ÇÁäΩê∫Ç™Ç†Ç™ÇÈ"
				     CALL MESSAGE_WINDOW_D , "êeï˚" , "Ç®Ç®ÅIÅ@óLÇËìÔÇ¢ÅIÅ@Ç»Ç…ÅAã‡Ç‡éûä‘Ç‡éÊÇËÇÕÇπÇ /ë¶çèëçèoÇ≈éÊÇËä|Ç©ÇÈÇ∆ÇµÇÊÇ§"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑêeï˚ÇÃàÍê∫Ç…âûÅAÇ∆è•Ç∂ÅAÉhÉèÅ[ÉtíBÇÕã∞ÇÎÇµÇ¢ë¨Ç≥Ç≈çHñ[ì‡ÇÃéùÇøèÍÇ…éUÇ¡ÇΩ/ÉhÉâÉSÉìÇÃëßêÅÇ‡Ç©Ç≠Ç‚Ç∆Ç”Ç¢Ç≤ÇêÅÇ´çûÇ›ÅAèuÇ≠ä‘Ç…òFÇÕónä‚Ç∆âªÇµÇΩ"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑñTÇÁÇ≈ÇÕêFÇ∆ÇËÇ«ÇËÇÃçzêŒÇã‡í∆Ç≈ç”Ç´ÅAè¨ìÁÇ…ì¸ÇÍÇƒÅAòFÇ…Ç≠Ç◊ÇÈ/ã‡ã‚ì∑Ç…É~ÉXÉäÉãÅAÉIÉäÉnÉãÉRÉìÅAã‡ëÆÇΩÇøÇ™éüÅXÇ∆ónÇØÇƒÇ¢Ç≠"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑÇ–Ç∆ÇµÇ´ÇËónÇ©ÇµçûÇ‹ÇÍÇΩé‹îMÇÃè¨ìÁÇÕÅAì¯ÇÃåıç Çï˙ÇøénÇﬂÇΩ/ÇªÇ±Ç…ïÛè¸ÇéÊÇËï•Ç¡ÇΩDraupnirÇ™íæÇﬂÇÁÇÍÇÈ/Ç∑ÇÈÇ∆äÔñ≠Ç»Ç±Ç∆Ç…ÅADraupnirÇ™âÃÇ¢ÇæÇµÇΩ"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑä…Ç‚Ç©Ç…ÅAÇ∆Ç´Ç…ãCçÇÇ≠ÅAÉâÉCÉìÇ…èZÇ‹Ç§ÉçÅ[ÉåÉâÉCÇÃÇ≤Ç∆Ç≠/ãøÇ´ìnÇÈâÃê∫Ç…çáÇÌÇπÇƒÅAÉhÉèÅ[ÉtíBÇ‡âÃÇ¢ÇæÇµÇΩ"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑãCÇ™Ç¬ÇØÇŒÇ†Ç»ÇΩÇ‡âÃÇ¡ÇƒÇ¢ÇΩÅBêÌóÒÇëgÇﬁíáñÇÇΩÇøÇ‡ìØólÇæ/Ç»ÇÒÇ∆COMPÇ…Ç¢ÇΩíáñÇÇ‹Ç≈Ç™ÅAèüéËÇ…îÚÇ—èoÇµÇƒâÃÇ¡ÇƒÇ¢ÇÈ/ÇµÇ©ÇµÇ‡ÇÕÇ‚ç±ç◊Ç»Ç±Ç∆ÇÕãCÇ…Ç»ÇÁÇ»Ç©Ç¡ÇΩ"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑâÃÇ™ç≈çÇí™Ç…íBÇµÇΩÇ∆Ç´ÅAópà”Ç≥ÇÍÇΩííå^Ç…è¨ìÁÇÃâÃê∫Ç™ó¨ÇµçûÇ‹ÇÍÇΩ/ï–òrï™ÇæÇ¡ÇΩDraupnirÇÕÅAàÍëŒÇ∆Ç»Ç¡Çƒê^ÇÃépÇê¨ÇªÇ§Ç∆ÇµÇƒÇ¢ÇÈ"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑâÃÇÃÉeÉìÉ|Ç™ë¨Ç≠Ç»ÇÈÅBDraupnirÇÕã}ë¨Ç…ó‚Ç¶å≈Ç‹ÇÎÇ§Ç∆ÇµÇƒÇ¢ÇΩ/êvë¨Ç…ÅAÇµÇ©Çµê≥ämÇ…ïÛêŒÇ™õ∆ÇﬂçûÇ‹ÇÍÅAï∂ólÇ™çèÇ‹ÇÍÇÈ/âªèœÇÇ∑ÇÈÇ©ÇÃÇÊÇ§Ç…î¸ÇµÇ≠édè„Ç∞ÇÁÇÍÇƒÇ¢Ç≠"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑédè„Ç∞ÇÃè¨í∆Ç™ç≈å„ÇÃàÍâπÇçÇÇÁÇ©Ç…ëtÇ≈ÇΩ/âÃÇÕé~Ç›ÅAòFÇÃâŒÇ‡ñﬂÇËÅAÇªÇÍÇ‹Ç≈Ç∆ë≈Ç¡ÇƒïœÇÌÇ¡ÇΩê√é‚Ç™ñKÇÍÇÈ"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑíbñËåZíÌÇÕËıÇ´ÅAÉrÉçÅ[Éhí£ÇËÇÃÉvÉåÅ[ÉgÇ…òró÷Çç⁄ÇπÇƒêeï˚Ç…ìnÇµÇΩ/êeï˚ÇÕÇªÇÍÇéÛÇØéÊÇÈÇ∆Ç†Ç»ÇΩÇ…ãﬂÇ√Ç´ÅAã±ÇµÇ≠å£è„ÇµÇΩ"
				     CALL MESSAGE_WINDOW_D , "êeï˚" , "êVÇΩÇ»ê_òbÇÃíaê∂ÇæÇ»/éÛÇØéÊÇÁÇÍÇÊÅBÇ±ÇÍÇÕãMìaÇÃÇΩÇﬂÇ…ê∂Ç‹ÇÍÇΩÇÃÇæ"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑçHñ[ÇÕäΩê∫Ç…ïÔÇ‹ÇÍÇΩÅBó‚Çﬂå≠ÇÁÇ îMã∂ÇÃíÜÅAÇ†Ç»ÇΩÇÕçƒÇ—ó∑òHÇ…ñﬂÇ¡ÇΩ"
				     CALL MESSAGE_WINDOW_D , "" , "ÅÑShin DraupnirÇìæÇΩ"
				          ITEM:4070 -= 1
				            ITEM:4071 += 1
				                FLAG:ñºê∫ += 1000
				  ELSEIF ITEM:4071 == 1
				     CALL MESSAGE_WINDOW_D , "íbñËâÆ" , "ÇÊÇ§ÅAëÂè´ÅBåiãCÇÕÇ«Ç§ÇæÅH"
				  ELSE
				     CALL MESSAGE_WINDOW_D , "íbñËâÆ" , "å©ÇƒÇÃí ÇËñZÇµÇ¢ÇÒÇæ/Ç–Ç‚Ç©ÇµÇ»ÇÁãAÇ¡ÇƒÇ≠ÇÍ"
				  ENDIF
				     SETBIT É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):(40+FLAG:åªM) , LOCAL
			CASE 601
				;ÉÅÉbÉZÉìÉWÉÉÅ[
				CALL MESSAGE_WINDOW_D , "ÉRÉ{ÉãÉg" , "êÃÉgÉEÉLÉáÉEÇéÁÇ¡ÇƒÇ¢ÇΩÇ∆Ç©Ç¢Ç§/è´ñÂåˆÇÕÉoÉâÉoÉâÇ…êÁêÿÇÁÇÍÇƒïïàÛÇ≥ÇÍÇΩÇÒÇæÇ¡ÇƒÇÀ"
				CALL MESSAGE_WINDOW_D , "ÉRÉ{ÉãÉg" , "ÅcÅcÇ∂Ç·Ç†ç°ÇÕíNÇ™ÉgÉEÉLÉáÉEÇéÁÇ¡ÇƒÇÈÇÒÇæÇÎÇ§ÅH"
				SETBIT É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):(40+FLAG:åªM) , LOCAL
			CASE 602
				;ÉÅÉbÉZÉìÉWÉÉÅ[
				CALL MESSAGE_WINDOW_D , "å‰âBãèÉhÉèÅ[Ét" , "Ç±ÇÃï”ÇËÇ…ñÑÇ‹Ç¡Ç∆ÇÈïêäÌÇÕ ÇÌÇµÇÁÇÃÇ®ïÛÇ∂Ç·"
				SETBIT É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):(40+FLAG:åªM) , LOCAL
			;ÇaÇPÇeÅ@ÉCÉxÉìÉg
			CASE 603
				;ïêäÌâÆ
				CALL MESSAGE_WINDOW_D , "ïêäÌâÆ" , "Ç¢ÇÁÇ¡ÇµÇ·Ç¢"
				$WEAPONS_603
				CALL INPUT_SELECT_D, "âΩÇÃópÇæÇ¢ÅH//[1]îÉÇ§/[2]ÉXÉeÉCÉ^ÉXÇå©ÇÈ///[0]äOÇ…èoÇÈ" , , , 2
				IF RESULT == 1
					CALL MESSAGE_WINDOW_D , "ïêäÌâÆ" , "âΩÇÇ®îÉÇ¢è„Ç∞Ç≈ÅH"
					;10-15ÉåÉxÉãå¸ÇØGunÇ∆íeä€Ç1äÑà¯Ç´Ç≈îÃîÑ
					LOCALS = 
					LOCALS += "Desert Eagle," + TOSTR(ITEMPRICE:"Desert Eagle"*9/10) + ","
					LOCALS += "Gonzo Pistol," + TOSTR(ITEMPRICE:"Gonzo Pistol"*9/10) + ","
					LOCALS += "Howa Carbine," + TOSTR(ITEMPRICE:"Howa Carbine"*9/10) + ","
					LOCALS += "Dominator," + TOSTR(ITEMPRICE:Dominator*9/10) + ","
					LOCALS += "Poison Shell," + TOSTR(ITEMPRICE:"Poison Shell"*8/10) + ","
					LOCALS += "Nerve Shell," + TOSTR(ITEMPRICE:"Nerve Shell"*8/10) + ","
					LOCALS += "Curse Shell," + TOSTR(ITEMPRICE:"Curse Shell"*8/10) + ","
					CALL DUNGEON_SHOPS, 0, LOCALS
				ELSEIF RESULT == 2
					CALL SHOP_COM_110
				ELSE
					CALL MESSAGE_WINDOW_D , "ïêäÌâÆ" , "ñàìxÇ†ÇË Ç‹ÇΩÇ«Ç§Çº"
					RETURN 1
				ENDIF
				GOTO WEAPONS_603
			CASE 604
				;éèÍ
				CALL MESSAGE_WINDOW_D, "ÉoÅ[ÉeÉì", "Ç¢ÇÁÇ¡ÇµÇ·Ç¢"
				$BAR_LOOP
				CALL MESSAGE_WINDOW_D, "ÉoÅ[ÉeÉì", "Ç«Ç§Ç¢Ç¡ÇΩå‰ópÇ≈ÅH"
				CALL INPUT_SELECT_D, "[1]éÇà˘Çﬁ/[2]òbÇï∑Ç≠/////[0]äOÇ…èoÇÈ" , , , 2
				IF RESULT == 0
					CALL MESSAGE_WINDOW_D, "ÉoÅ[ÉeÉì", "Ç‹ÇΩ Ç«Ç§Çº"
				ELSEIF RESULT == 1
					CALL MESSAGE_WINDOW_D, "ÉoÅ[ÉeÉì", "ìXÇ≈ÇÃà˘éÇÕñ¢é¿ëïÇÁÇµÇ¢Ç≈Ç∑ÇÊ"
				ELSEIF RESULT == 2
					$BAR_LOOP_2
					CALL INPUT_SELECT_D , "ÅÑíNÇ…òbÇµÇ©ÇØÇÈÅH//[1]ÉRÉ{ÉãÉg/[2]ÉKÉCÉAã≥ìk/[3]ÉRÉ{ÉãÉg/[4]ÉRÉ{ÉãÉg/[0]Ç‚ÇﬂÇÈ" , , , 2
					IF RESULT == 0
						GOTO BAR_LOOP
					ELSEIF RESULT == 1
						CALL MESSAGE_WINDOW_D, "ÉRÉ{ÉãÉg", "Ç†ÇÒÇΩêVèhÇ¡ÇƒäXÇ…çsÇ¡ÇΩÇ±Ç∆Ç†ÇÈÇ©Ç¢ÅH/Ç†ÇªÇ±ÇÃínâ∫Ç”Ç©Å[Ç≠Ç…Ç·Ç†ÅA/Ç±Ç±Ç›ÇΩÇ¢Ç…ódê∏Ç™íÜêSÇ…Ç»Ç¡ÇƒçÏÇ¡ÇƒÇÈäXÇ™Ç†ÇÈÇÒÇæÇ∆ÇÊ"
						CALL MESSAGE_WINDOW_D, "ÉRÉ{ÉãÉg", "ÇªÇÒÇ≈ÇªÇÃódê∏ÇÃäXÇ…ÇÕñÚâÆÇ™Ç†ÇÈÇÒÇæÇ™ÇÊÅA/ÇªÇ±Ç≈ì≠Ç¢ÇƒÇÈódê∏ÇÃéqÇ™Ç¶ÇÁÇ¢ï õlÇ≥ÇÒÇÁÇµÇ¢ÇÒÇæÇ»Ç†"
					ELSEIF RESULT == 2
						CALL MESSAGE_WINDOW_D, "ÉKÉCÉAã≥ìk", "ínè„Ç∂Ç·Ç†é„íéã§ÇÈxÇµÇƒÇÈÉÅÉVÉAã≥ìkÇÃòAíÜÇ™ÉfÉJÉCäÁÇÇµÇƒÇ¢ÇÈÇ™/ínâ∫ê¢äEÇ≈ÇÕâ‰ÅXÉKÉCÉAã≥ìkÇÃï˚Ç™éÛÇØì¸ÇÍÇÁÇÍÇƒÇ¢ÇÈÇÃÇ≥/ÅcÅcñ{ìñÇæÇºÅI"
					ELSEIF RESULT == 3
						CALL MESSAGE_WINDOW_D, "ÉRÉ{ÉãÉg", "Ç±ÇÃäXÅAì¡Ç…ñkÇÃï˚ÇÕòcÇ…çLÇ™Ç¡ÇƒÇÈÇæÇÎÅH/Ç†Ç†Ç¢Ç§èäÇÕâ¥íBÇ™Ç®ïÛÇå@ÇËèoÇµÇΩÇ¬Ç¢Ç≈Ç…äXÇçLÇ∞ÇƒÇÈÇÃÇ≥/ÅcÅcÇ±ÇËÇ·ÉiÉCÉVÉáÇÃòbÇæÇØÇ«Ç»/â¥íBÇ™å@Ç¡ÇΩÇ®ïÛÅAínè„Ç©ÇÁÇ‡îÉÇ¢Ç…óàÇƒÇÈÇÒÇæÇ∫"
					ELSEIF RESULT == 4
						CALL MESSAGE_WINDOW_D, "ÉRÉ{ÉãÉg", "Ç†ÇÒÇΩêÌÇ¡ÇøÇ·Ç¡ÇΩÇËÇ∑ÇÈêlÇæÇÎÅH/ÅcÅcÇ¢Ç‚ÅAÉJÉbÉRå©ÇËÇ·ï™Ç©ÇÈÇÊ"
						CALL MESSAGE_WINDOW_D, "ÉRÉ{ÉãÉg", "ÇªÇÍÇ∂Ç·ÉhÉèÅ[ÉtÇÃíbñËâÆÇímÇ¡ÇƒÇÈÇ©Ç¢ÅH/ÉIÉåíBÇ™å@ÇËèoÇµÇΩïêäÌÇçÏÇËíºÇµÇΩÇË/êVÇµÇ¢ïêäÌÇçÏÇËèoÇµÇΩÇËÇµÇƒÇÈ/ÉEÉfÇÃÇ¢Ç¢ìzÇ≈Ç≥"
						CALL MESSAGE_WINDOW_D, "ÉRÉ{ÉãÉg", "Ç‹Ç†ÅAâÔÇ¡Ç∆Ç¢ÇƒÉ\ÉìÇÕñ≥Ç¢ÇÀ"
					ENDIF
					GOTO BAR_LOOP_2
				ENDIF
			CASE 605
				;ñhãÔâÆ
				CALL MESSAGE_WINDOW_D , "ñhãÔâÆ" , "Ç†Å[ÇÁ Ç¢ÇÁÇ¡ÇµÇ·Ç¢"
				$ARMORS_605
				CALL INPUT_SELECT_D, "âΩÇÃå‰ópÇ©ÇµÇÁÅH//[1]îÉÇ§/[2]ÉXÉeÉCÉ^ÉXÇå©ÇÈ///[0]äOÇ…èoÇÈ" , , , 2
				IF RESULT == 1
					CALL MESSAGE_WINDOW_D , "ñhãÔâÆ" , "âΩÇÇ®îÉÇ¢è„Ç∞Ç©ÇµÇÁÅH"
					;10-15ÉåÉxÉãå¸ÇØñhãÔÇ1äÑà¯Ç´Ç≈îÃîÑ
					LOCALS = 
					LOCALS += "Iron Pumpkin," + TOSTR(ITEMPRICE:"Iron Pumpkin"*9/10) + ","
					LOCALS += "Frog Helm," + TOSTR(ITEMPRICE:"Frog Helm"*9/10) + ","
					LOCALS += "Hard Ten Gallon," + TOSTR(ITEMPRICE:"Hard Ten Gallon"*9/10) + ","
					LOCALS += "Chain Beret," + TOSTR(ITEMPRICE:"Chain Beret"*9/10) + ","
					LOCALS += "Kaiser Armor," + TOSTR(ITEMPRICE:"Kaiser Armor"*9/10) + ","
					LOCALS += "Sun Armor," + TOSTR(ITEMPRICE:"Sun Armor"*9/10) + ","
					LOCALS += "Cyber Arm," + TOSTR(ITEMPRICE:"Cyber Arm"*9/10) + ","
					LOCALS += "Arm Bridge," + TOSTR(ITEMPRICE:"Arm Bridge"*9/10) + ","
					LOCALS += "Damascus Gloves," + TOSTR(ITEMPRICE:"Damascus Gloves"*9/10) + ","
					LOCALS += "Titanium Boots," + TOSTR(ITEMPRICE:"Titanium Boots"*9/10) + ","
					LOCALS += "Safety Boots," + TOSTR(ITEMPRICE:"Safety Boots"*9/10) + ","
					LOCALS += "Aerojet," + TOSTR(ITEMPRICE:Aerojet*9/10) + ","
					CALL DUNGEON_SHOPS, 0, LOCALS
				ELSEIF RESULT == 2
					CALL SHOP_COM_110
				ELSE
					CALL MESSAGE_WINDOW_D , "ñhãÔâÆ" , "Ç†ÇËÇ™Ç∆ Ç‹ÇΩÇ¢ÇÁÇµÇƒÇÀÇ•"
					RETURN 1
				ENDIF
				GOTO ARMORS_605
				
			CASE 606
				;ÉÅÉbÉZÉìÉWÉÉÅ[
				CALL MESSAGE_WINDOW_D , "êeï˚ÉhÉèÅ[Ét" , "ÉXÉ_É}Ç‚ÉRÉ_É}ÇÃòAíÜÇ™åæÇ§Ç…ÇÕ/Ç±ÇÃÉgÉEÉLÉáÉEÇÃÇ†ÇøÇ±ÇøÇ…ëÂòaÇÃê_ÅXÇ™ïïàÛÇ≥ÇÍÇ∆ÇÈÇÒÇæÇ∆ÇÊ/Ç»ÇÒÇ≈Ç‡ìVégÇ‚ë¬ìVégíBÇÃédã∆ÇÁÇµÇ¢Ç™ÇÀ"
				SETBIT É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):(40+FLAG:åªM) , LOCAL
			CASE 607
				;ÉÅÉbÉZÉìÉWÉÉÅ[
				CALL MESSAGE_WINDOW_D , "ÉtÉ@ÉNÉgÉäÅ[òJì≠é“" , "Ç‹Ç¡ÇΩÇ≠ínóÏÇÃìzÇÁ/êlégÇ¢Ç™çrÇ≠ÇƒÇ‡Ç§ÉwÉçÉwÉçÇæÇ∫"
				SETBIT É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):(40+FLAG:åªM) , LOCAL
			CASE 608
				;ÉKÉCÉAê_ìa
				CALL GAIA_TEMPLE_29
			CASE 609
				;ï«ÇÃóéèëÇ´
				CALL MESSAGE_WINDOW_D , "ï∂éö" , "ÅÑínóÏÇÃäX /Å@ì≠Ç´é“ÇÕäΩå}"
				CALL MESSAGE_WINDOW_D , "" , "ÅÑÅcÅcÇ∆ï«Ç…èëÇ¢ÇƒÇ†ÇÈ"
				SETBIT É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):(40+FLAG:åªM) , LOCAL
			;ÇaÇRÇeÅ@ÉCÉxÉìÉg
			CASE 400
				;ÉiÉìÉfÉBÇ≥ÇÒ
				CALL MESSAGE_WINDOW_D, "ÉiÉìÉfÉBÇ≥ÇÒ", "ÉiÉ}ÉXÉeÅI/ÉèÉ^ÉV ÉCÉìÉhÇ©ÇÁóàÇΩ ÉiÉìÉfÉBÇ≥ÇÒÉl/Ç‹ÇΩâÔÇ¶ÇΩêl Ç®Ç–Ç≥ÉlÅ[ Ç§ÇÍÇµÉlÅ["
				CALL MESSAGE_WINDOW_D, "ÉiÉìÉfÉBÇ≥ÇÒ", "ÉRÅ[ÉhÉuÉåÅ[ÉJÅ[ Él Ç‚Ç¡ÇƒÉl"
				CALL MESSAGE_WINDOW_D, "", "ÅÑÉiÉìÉfÉBÇ≥ÇÒÇ©ÇÁÅwXTHÅxÇ∆èëÇ©ÇÍÇΩÉQÅ[ÉÄÇÃÉpÉbÉPÅ[ÉWÇéÛÇØéÊÇ¡ÇΩÅc"
				CALL MESSAGE_WINDOW_D, "ÉiÉìÉfÉBÇ≥ÇÒ", "ÅcÅcÇ≤ÇﬂÇÒÉl Ç¢Ç‹ÉRÅ[ÉhÉuÉåÅ[ÉJÅ[èÄîıíÜÉl/Ç‹ÇΩç°ìxóVÇÒÇ≈Él"
			;ÇaÇSÇeÅ@ÉCÉxÉìÉg
			CASE 300
				;ÉÅÉbÉZÉìÉWÉÉÅ[
				CALL MESSAGE_WINDOW_D , "ÉuÉâÉEÉjÅ[" , "ÇªÇ±ÇÃäKíiÇ©ÇÁ/êlä‘ÇΩÇøÇÃèWÇ‹Ç¡ÇƒÇ¢ÇÈÉRÉ~ÉÖÉjÉeÉBÇ…çsÇØÇÈÇÊ"
				CALL MESSAGE_WINDOW_D , "ÉuÉâÉEÉjÅ[" , "ìzÇÁêlä‘Ç…ÇµÇƒÇÕÇ©Ç¡Ç±Ç¢Ç¢ÇÒÇæ/Ç‹Ç†ÅAåæÇ¡ÇøÇ·à´Ç¢ÇØÇ« Ç†ÇÒÇΩÇ∆ÇÕÇ≠ÇÁÇ◊ÉÇÉìÇ…Ç»ÇÁÇ»Ç¢ÇÀ"
				CALL MESSAGE_WINDOW_D , "ÉuÉâÉEÉjÅ[" , "ÇæÇØÇ«ÅAÇ†ÇÒÇ»Ç…Ç©Ç¡Ç±Ç¢Ç¢ÇÃÇ…/ínè„Ç©ÇÁì¶Ç∞ÇƒÇ´ÇΩÇÁÇµÇ¢ÇÒÇæ"
				
			;ÇaÇTÇeÅ@ÉCÉxÉìÉg
			CASE 200
				;ÉqÉãÉR
				IF É_ÉìÉWÉáÉìÉtÉâÉO:[[É_ÉìÉWÉáÉì:ê‘ç‚]]:1 == 0 && (àÀóäÉtÉâÉO:13:0 != 4 || FINDCHARA_B([[ÉLÉÉÉâ:ãeé}]]) != 2 )
					CALL MESSAGE_WINDOW_D , "ê∫" , "óàÇÈÇ»ÅIÅ@éÑÇ…ãﬂÇ√Ç≠Ç»ÅI"
					CALL MESSAGE_WINDOW_D , "É~ÉÖÅ[É^ÉìÉg" , "ãAÇÍÅI/Ç®Ç∆Ç»ÇµÇ≠ãAÇÁÇ Ç∆/ÇΩÇæÇ≈ÇÕÇ∑Ç‹ÇÒÇºÅI"
				ELSEIF É_ÉìÉWÉáÉìÉtÉâÉO:[[É_ÉìÉWÉáÉì:ê‘ç‚]]:1 == 0
					LOCAL = RESULT:1
					CALL MESSAGE_WINDOW_D , "ê∫" , "óàÇÈÇ»ÅIÅ@éÑÇ…ãﬂÇ√Ç≠Ç»ÅI"
					CALL MESSAGE_WINDOW_D , "É~ÉÖÅ[É^ÉìÉg" , "ãAÇÍÅI/Ç®Ç∆Ç»ÇµÇ≠ãAÇÁÇ Ç∆/ÇΩÇæÇ≈ÇÕÇ∑Ç‹ÇÒÇºÅI"
					CALL MESSAGE_WINDOW_D , "ê∫" , "ÅcÅcë“ÇƒÅI/ÅcÅcãMèóÇÕÅcÅcÅI"
					CALL MESSAGE_WINDOW_D , @"%CALLNAME:LOCAL%" , "Ç®ãvÇµÇ‘ÇËÇ≈Ç∑ÅAÉqÉãÉRól"
					CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"Ç®Ç® ä‘à·Ç¢Ç»Ç¢ÅI/ãeóùïQê_ÇÊÅAÇ®ë“ÇøÇµÇƒÇ®ÇËÇ‹ÇµÇΩÇºÅI"
					CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"ÅcÅcÇ∆Ç∑ÇÈÇ∆Ç®ëOÇ™%ANATANAME("àÀóäÇµÇΩè¢ä´ém" , "")%Ç©ÅH" , , "çƒóòópÇ∑ÇÈ"
					CALL INPUT_YN_D , "Yes" , "ïÒèVÇÇ‡ÇÁÇ§"
					IF RESULT == 0
						CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"ÇªÇ§Ç© àÀóäí ÇËîﬁèóÇñ≥éñã~èoÇµÇƒÇ≠ÇÍÇΩÇÊÇ§ÇæÇ»/ÇÊÇ≠Ç‚Ç¡ÇƒÇ≠ÇÍÇΩÅAóÁÇåæÇÌÇπÇƒÇ‡ÇÁÇ§Çº"
					ELSE
						CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"ÇªÇ§Ç≈Ç†Ç¡ÇΩÇ»ÅAñÒë©ÇÃïÒèVÇæÇ™ÅcÅc"
					ENDIF
					CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"Ç±ÇÃëÂÇ´Ç»ì≠Ç´Ç…å©çáÇ§ïÒèVÇÇ®ëOÇ…ìnÇµÇƒÇ‚ÇËÇΩÇ©Ç¡ÇΩÇÃÇæÇ™ÅcÅc/çœÇ‹Ç ÅAÇ±ÇÃínâ∫ê¢äEÇ≈ÇÕínè„ÇÃã‡ÇÕè\ï™Ç…ÇÕèWÇ‹ÇÁÇ ÇÃÇæ" , , "çƒóòópÇ∑ÇÈ"
					CALL MESSAGE_WINDOW_D , "" , @"ÅÑÉqÉãÉRÇ©ÇÁÉ{ÉçÉ{ÉçÇÃéÜïºÅè75000ï™Ç∆îjñÇñÓÇ2ñ{éÛÇØéÊÇ¡ÇΩ"
					CALL MESSAGE_WINDOW_D , "" , @"ÅÑ%CALLNAME:MASTER%ÇÕ95ÇÃñºê∫ÇìæÇΩ" , , "çƒóòópÇ∑ÇÈ"
					MONEY += 75000
					FLAG:ñºê∫ += 95
					CALL GET_ITEMS , "îjñÇñÓ" , 2
					IF CFLAG:MASTER:ëPà´íl >= 128
						CALL MESSAGE_WINDOW_D , @"%CALLNAME:LOCAL%" , "ÇªÇÍÇ≈ÉqÉãÉRólÅAÇ±ÇÍÇ©ÇÁî@âΩÇ¢ÇΩÇµÇ‹ÇµÇÂÇ§ÅH"
						CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"ïïàÛÇ≥ÇÍÅAé˙ÇÌÇÍÇƒÇ¢ÇÈê_ÅXÇã~ÇÌÇÀÇŒÇ»ÇËÇ‹ÇπÇ /ÇµÇ©ÇµéÑé©êgÇ…ÇªÇÃÇÊÇ§Ç»óÕÇÕñ≥Ç≠ÅAÇ±ÇÃínÇ…èZÇﬁé“íBÇ…Ç‡Ç‹ÇΩã≠é“ÇÕãèÇÁÇ ÅcÅc"
						CALL MESSAGE_WINDOW_D , @"%CALLNAME:LOCAL%" , @"ê_ã{ÇÃêXÇÃõﬁèóíBÇ‡ÅAéUÇËéUÇËÇ…Ç»Ç¡ÇƒÇµÇ‹Ç¢Ç‹ÇµÇΩÅcÅc/çƒÇ—îﬁÇÁÇåƒÇ—èWÇﬂÇÈéñÇ‡èoóàÇÈÇ©Ç‡ÇµÇÍÇ‹ÇπÇÒÇ™/èoóàÇΩÇ∆ÇµÇƒÇ‡éûä‘ÇÕîÒèÌÇ…Ç©Ç©ÇÈÇ≈ÇµÇÂÇ§"
						CALL MESSAGE_WINDOW_D , @"%CALLNAME:LOCAL%" , @"ÅcÅcÉqÉãÉRólÅAíÒàƒÇ™å‰ç¿Ç¢Ç‹Ç∑/%ANATANAME("Ç±ÇÃï˚" , "ól")%Ç…Ç®äËÇ¢ÇµÇƒÇ›ÇƒÇÕî@âΩÇ≈ÇµÇÂÇ§ÅH"
						CALL MESSAGE_WINDOW_D , @"%CALLNAME:LOCAL%" , @"ÉtÉ@ÉìÉgÉÄÅEÉ\ÉTÉGÉeÉBÇ…ëÆÇ∑ÇÈé“Ç≈ÇÕÇ†ÇËÇ‹Ç∑Ç™/ç°ÇÃéÑíBÇ…Ç∆Ç¡Çƒ\@ TALENT:MASTER:ÉIÉgÉR ? îﬁ # îﬁèó \@ÇÕç≈Ç‡êMópèoóàÇÈï˚ÇæÇ∆évÇ¢Ç‹Ç∑" , , "çƒóòópÇ∑ÇÈ"
						CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"Ç§ÇﬁÅcÅc/%ANATANAME("è¢ä´ém")%ÇÊÅAâ‰ÅXÇÃòbÇï∑Ç¢ÇƒÇ‡ÇÁÇ¶Ç Ç©ÅH"
						CALL INPUT_YN_D
						IF RESULT == 0
							;ínã_Ç™ÈxÇ≥ÇÍÇƒìVí√ê_ÇïïàÛÇµÇƒâ]ÅXÅAÇ∆Ç¢Ç§Ç∆Ç±ÇÎÇÕÉAÉ}ÉeÉâÉXÇã~èoÇ∑ÇÈéËëOÇ…Ç»Ç¡ÇƒÇ©ÇÁã≥Ç¶ÇƒÇ≠ÇÍÇÈ
							;ÇªÇÍÇ‹Ç≈ÇÕìsçáà´Ç¢Çµë˜Ç∑
							CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"ÇªÇ§Ç© ï∑Ç¢ÇƒÇ≠ÇÍÇÈÇ©"
							$Q_200
							CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"ìVí√ê_ ÇªÇµÇƒçëí√ê_Ç∆Ç¢Ç§ñºÇÕímÇ¡ÇƒÇ¢ÇÊÇ§/å≥ÇÊÇË Ç±ÇÃëÂòaÇÃínÇÕ â‰ÅXëÂòaê_ë∞Ç™é°ÇﬂÇƒÇ¢ÇΩÇÃÇæ"
							CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"ÇæÇ™ ê¢ãIññÇå}Ç¶ à´ñÇÇÃåQÇÍÇ™ ëÂòaÇÃínÇ…Ç‡åªÇÍÇÈÇ∆/ÇªÇÃç¨óêÇ…èÊÇ∂ ÉwÉuÉâÉCÇÃìVégíBÇÃéËÇ≈ ëÂòaÇÃê_ÅXÇÕïïàÛÇ≥ÇÍÇƒÇµÇ‹Ç¡ÇΩ" , , "çƒóòópÇ∑ÇÈ"
							CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"ÇªÇÃåãâ Ç™ç°ÇÃëÂòaÇæ/åÏÇËéËÇΩÇÈê_ÅXÇ≥Ç¶ïïÇ∂ÇÁÇÍÇƒÇ¢Ç»ÇØÇÍÇŒ/ëÂòaÇÕÇ±Ç±Ç‹Ç≈à´ñÇíBÇÃíµó¿ÊÎÁªÇ∑ÇÈínÇ∆ÇÕÇ»ÇÁÇ»Ç©Ç¡ÇΩÇÕÇ∏Ç»ÇÃÇæ"
							CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"ÅcÅcÇ±ÇÃínÇ…çƒÇ—ïΩâ∏ÇéÊÇËñﬂÇ∑Ç…ÇÕîﬁÇÁÇÃóÕÇ™ïKóvÇæ/ê_ÅXÇÃïïàÛÇâÇ´ ïúäàÇ≥ÇπÇÀÇŒÇ»ÇÁÇ /ÅcÅcÇªÇÍÇ™éÑÇÃê”îCÇ»ÇÃÇæÅcÅc"
							CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"ÅcÅcÇ«Ç§Ç©ê_ÅXÇÃïïàÛÇâÇ¢ÇƒÇÕÇ≠ÇÍÇ ÇæÇÎÇ§Ç©ÅH"
							CALL INPUT_SELECT_D, "[0]Yes/[1]No/[2]ïÒèVÇóvãÅÇ∑ÇÈ"
							SELECTCASE RESULT
								CASE 0
									CALL INCREASE_LD , 20
									CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"Ç®Ç®Ç¡ ÇªÇ§Ç©à¯Ç´éÛÇØÇƒÇ‡ÇÁÇ¶ÇÈÇ©"
									CALL MESSAGE_WINDOW_D , @"%CALLNAME:LOCAL%" , @"ÅcãMï˚ÇÃÇ®ãCéùÇøÇ…ÅAâΩÇÁÇ©ÇÃå`Ç≈ïÒÇ¢ÇΩÇ¢ÇÃÇ≈Ç∑Ç™/ímÇ¡ÇƒÇÃí ÇËç°Ç‚éÑÇ…Ç†ÇÈÇÃÇÕÇ±ÇÃêgàÍÇ¬ÇæÇØÇ≈Ç∑"
									CALL MESSAGE_WINDOW_D , @"%CALLNAME:LOCAL%" , @"Ç≈Ç∑Ç©ÇÁ%ANATANAME( , "ólÅA")%éÑÇÕãMï˚Ç…éÑé©êgÇï˘Ç∞Ç‹Ç∑"
									CALL MESSAGE_WINDOW_D , @"%CALLNAME:LOCAL%" , @"ãMï˚ÇÃñ]ÇﬁÇ‹Ç‹ÅAévÇ§Ç‹Ç‹Ç…éÑÇÇ®égÇ¢Ç≠ÇæÇ≥Ç¢/Ç±ÇÃínÇã~Ç§ÇΩÇﬂÇ…ñóßÇƒÇƒÇ≠ÇÍÇÈÇ∆êMÇ∂ÇƒÇ¢Ç‹Ç∑" , , "çƒóòópÇ∑ÇÈ"
									É_ÉìÉWÉáÉìÉtÉâÉO:[[É_ÉìÉWÉáÉì:ê‘ç‚]]:1 = 2
									
									CFLAG:LOCAL:êÌì¨éQâ¡ïsâ¬î\ = 0
									CFLAG:LOCAL:Ç±ÇÃèÍÇ…ãèÇ»Ç¢ÉtÉâÉO = 0
									àÀóäÉtÉâÉO:13:0 = 5
									
									CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"ê_ÅXÇÃïïÇ∂ÇÁÇÍÇƒÇ¢ÇÈínÇ…Ç¬Ç¢ÇƒÇÃèÓïÒÇÕÇ®ëOÇÃéññ±èäÇ…ìÕÇØÇƒÇ®Ç±Ç§/óÕÇ»Ç´éÑÇ…ë„ÇÌÇË ïKÇ∏ê¨ÇµêãÇ∞ÇƒÇ≠ÇÍ/óäÇﬁÅcÅc"
									
								CASE 1
									CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"ÇªÇ§Ç©ÅcÅcï∑Ç¢ÇƒÇÕÇ‡ÇÁÇ¶Ç Ç©ÅcÅc"
									É_ÉìÉWÉáÉìÉtÉâÉO:[[É_ÉìÉWÉáÉì:ê‘ç‚]]:1 = 1
									IF CFLAG:LOCAL:à¯åpÇ¨âÒêî == 0
										CFLAG:LOCAL:Ç±ÇÃèÍÇ…ãèÇ»Ç¢ÉtÉâÉO = 1
										CALL REMOVE_POSITION, CPOS(LOCAL)
									ENDIF
									
								CASE 2
									CALL INCREASE_LD , 20
									CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"Ç”ÇﬁÅcÅc/Ç¢Ç‚ ÇªÇÍÇ‡ìñëRÇ∆Ç¢Ç§Ç‡ÇÃ âΩÇπÇªÇ§ä»íPÇ…ÇÕÇ¢Ç©Ç édéñÇæ/ÇæÇ™ ç°ÇÃâ‰ÅXÇ…ÇÕìûíÍÇ®ëOÇÃñûë´ÇµÇ§ÇÈïÒèVÇ»Ç«ópà”Ç≈Ç´Ç‹Ç¢ÅcÅc"
									CALL MESSAGE_WINDOW_D , @"%CALLNAME:LOCAL%" , @"éÑÇ…Ç‡Ç†ÇÈÇÃÇÕÇ±ÇÃêgàÍÇ¬ÅAï•Ç¶ÇÈï®ÇÕéùÇøçáÇÌÇπÇƒÇ¢Ç‹ÇπÇÒ/ÅcÅcÇµÇ©ÇµÅAÇ‡ÇµãMï˚Ç™ñ]ÇﬁÇÃÇ≈ÇµÇΩÇÁ/éÑé©êgÇà»Ç¡ÇƒïÒèVÇ∆Ç¢Ç§éñÇ…ÇµÇƒÇ¢ÇΩÇæÇØÇ‹ÇπÇÒÇ©ÅH"
									CALL MESSAGE_WINDOW_D , @"%CALLNAME:LOCAL%" , @"å≥ÇÕÇ∆åæÇ¶ÇŒ%ANATANAME("ãMï˚ól" , "ól")%Ç…ã~Ç¡ÇƒÇ¢ÇΩÇæÇ¢ÇΩñΩÇ≈Ç∑"
									CALL MESSAGE_WINDOW_D , @"%CALLNAME:LOCAL%" , @"ÇªÇÍÇ™ê_ÅXÇÃïïàÛÇâÇ≠à◊Ç…Ç»ÇÈÇ»ÇÁÇŒÅA/%ANATANAME("ãMï˚ól" , "ól")%Ç…Ç±ÇÃêgëSÇƒÇï˘Ç∞ÇƒÇ‡ç\ÇÌÇ»Ç¢Ç∆évÇ¡ÇƒÇ¢Ç‹Ç∑" , , "çƒóòópÇ∑ÇÈ"
									CALL INPUT_YN_D , "à¯Ç´éÛÇØÇÈ" , "Ç‚ÇﬂÇƒÇ®Ç≠"
									IF RESULT == 0
										CALL MESSAGE_WINDOW_D , @"%CALLNAME:LOCAL%" , @"ÅcÅcà¯Ç´éÛÇØÇƒÇ¢ÇΩÇæÇØÇÈÇÃÇ≈Ç∑ÇÀ"
										CALL MESSAGE_WINDOW_D , @"%CALLNAME:LOCAL%" , @"ä¥é”ÇÅBÇªÇµÇƒÅAç°ì˙ÇÊÇËéÑÇÕ%ANATANAME("ãMï˚ól" , "ól")%ÇÃï®Ç≈Ç∑" , , "çƒóòópÇ∑ÇÈ"
										CALL MESSAGE_WINDOW_D , @"%CALLNAME:LOCAL%" , @"Ç«Ç§Ç©Ç≤ñûë´çsÇ≠Ç‹Ç≈éÑÇÇ®égÇ¢Ç≠ÇæÇ≥Ç¢/ÅcÅcÇªÇµÇƒÅAïKÇ∏Ç‚îﬁÇÁÇã~Ç¡ÇƒÇ≠ÇæÇ≥Ç¢" , , "çƒóòópÇ∑ÇÈ"
										É_ÉìÉWÉáÉìÉtÉâÉO:[[É_ÉìÉWÉáÉì:ê‘ç‚]]:1 = 2
										
										CFLAG:LOCAL:Ç±ÇÃèÍÇ…ãèÇ»Ç¢ÉtÉâÉO = 0
										CFLAG:LOCAL:êÌì¨éQâ¡ïsâ¬î\ = 0
										SIF CFLAG:LOCAL:à¯åpÇ¨âÒêî == 0
											TALENT:LOCAL:é„ñ° = 1
										àÀóäÉtÉâÉO:13:0 = 5
										CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"ê_ÅXÇÃïïÇ∂ÇÁÇÍÇƒÇ¢ÇÈínÇ…Ç¬Ç¢ÇƒÇÃèÓïÒÇÕÇ®ëOÇÃéññ±èäÇ…ìÕÇØÇƒÇ®Ç±Ç§/óÕÇ»Ç´éÑÇ…ë„ÇÌÇË ïKÇ∏ê¨ÇµêãÇ∞ÇƒÇ≠ÇÍ/óäÇﬁÅcÅc"
									ELSE
										CALL MESSAGE_WINDOW_D , @"%CALLNAME:LOCAL%" , @"ÅcÅcÇªÇ§Ç≈Ç∑Ç©ÅcÅc"
									
										É_ÉìÉWÉáÉìÉtÉâÉO:[[É_ÉìÉWÉáÉì:ê‘ç‚]]:1 = 1
										IF CFLAG:LOCAL:à¯åpÇ¨âÒêî == 0
											CFLAG:LOCAL:Ç±ÇÃèÍÇ…ãèÇ»Ç¢ÉtÉâÉO = 1
											CALL REMOVE_POSITION, CPOS(LOCAL)
										ENDIF
									ENDIF
							ENDSELECT
						ELSE
							CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"ÇªÇ§Ç©ÅcÅcï∑Ç¢ÇƒÇÕÇ‡ÇÁÇ¶Ç Ç©ÅcÅc"
							É_ÉìÉWÉáÉìÉtÉâÉO:[[É_ÉìÉWÉáÉì:ê‘ç‚]]:1 = 1
							
							IF CFLAG:LOCAL:à¯åpÇ¨âÒêî == 0
								CFLAG:LOCAL:Ç±ÇÃèÍÇ…ãèÇ»Ç¢ÉtÉâÉO = 1
								CALL REMOVE_POSITION, CPOS(LOCAL)
							ENDIF
						ENDIF
						
					ELSE
						CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"ÇªÇÍÇ≈ÇÕìπíÜãCÇïtÇØÇƒãAÇÁÇÍÇÊ/Ç±Ç±ÇÕínè„ÇÃé“Ç™í∑ãèÇ∑Ç◊Ç´ínÇ≈ÇÕÇ»Ç¢"
						CALL MESSAGE_WINDOW_D , @"%CALLNAME:LOCAL%" , @"%ANATANAME("ãMï˚ól" , "ól")%Ç…èïÇØÇƒÇ¢ÇΩÇæÇ¢ÇΩå‰â∂ÇÕÅAåàÇµÇƒñYÇÍÇ‹ÇπÇÒ/Ç«Ç§Ç©ÅAÇ®å≥ãCÇ≈ÅcÅc"
						IF CFLAG:LOCAL:à¯åpÇ¨âÒêî == 0
							CALL ÉLÉÉÉâçÌèú , LOCAL
						ENDIF
						É_ÉìÉWÉáÉìÉtÉâÉO:[[É_ÉìÉWÉáÉì:ê‘ç‚]]:1 = -1
					ENDIF
				ELSEIF É_ÉìÉWÉáÉìÉtÉâÉO:[[É_ÉìÉWÉáÉì:ê‘ç‚]]:1 == 1
					
					CALLF FINDCHARA_B([[ÉLÉÉÉâ:ãeé}]])
					LOCAL = RESULT:1
					GOTO Q_200
				ELSEIF É_ÉìÉWÉáÉìÉtÉâÉO:[[É_ÉìÉWÉáÉì:ê‘ç‚]]:1 == 2
					CALL MESSAGE_WINDOW_D , "ÉqÉãÉR" , @"ê_ÅXÇÃïïÇ∂ÇÁÇÍÇƒÇ¢ÇÈínÇ…Ç¬Ç¢ÇƒÇÃèÓïÒÇÕ/Ç®ëOÇÃéññ±èäÇ…ìÕÇØÇƒÇ®Ç±Ç§/óÕÇ»Ç´éÑÇ…ë„ÇÌÇË ïKÇ∏ê¨ÇµêãÇ∞ÇƒÇ≠ÇÍ/óäÇﬁÅcÅc"
				
				ELSEIF É_ÉìÉWÉáÉìÉtÉâÉO:[[É_ÉìÉWÉáÉì:ê‘ç‚]]:1 == -1
					CALL MESSAGE_WINDOW_D , "" , @"ÅÑíNÇ‡ãèÇ»Ç¢ÅcÅc"
				ENDIF
			CASE 201
				;ÉÅÉbÉZÉìÉWÉÉÅ[
				IF É_ÉìÉWÉáÉìÉtÉâÉO:[[É_ÉìÉWÉáÉì:ê‘ç‚]]:1 == 0 && (àÀóäÉtÉâÉO:13:0 != 4 || FINDCHARA_B([[ÉLÉÉÉâ:ãeé}]]) != 2 )
					CALL MESSAGE_WINDOW_D , "É~ÉÖÅ[É^ÉìÉg" , "Ç»ÇÒÇæÇ®ëOÇÕÅH/Ç®ëOÇ»Ç«Ç™óàÇƒÇ‡ Ç†ÇÃï˚Ç…âÔÇ¶ÇÈÇ‡ÇÃÇ©"
				ELSEIF É_ÉìÉWÉáÉìÉtÉâÉO:[[É_ÉìÉWÉáÉì:ê‘ç‚]]:1 != 0
					CALL MESSAGE_WINDOW_D , "É~ÉÖÅ[É^ÉìÉg" , "ÉqÉãÉRólÇÕ/ïïàÛÇ≥ÇÍÇµê_ÅXÇÃîÈñßÇímÇ¡ÇƒÇ¢ÇΩÇÃÇ≈/í«ÇÌÇÍÇƒÇ¢ÇΩÇÃÇæ"
				ELSE
					CALL MESSAGE_WINDOW_D , "É~ÉÖÅ[É^ÉìÉg" , "Ç»ÇÒÇæÇ®ëOÇÕÅcÅc/Ç†Ç¡ãMèóÇÕÅI"
					CALL MESSAGE_WINDOW_D , "É~ÉÖÅ[É^ÉìÉg" , "Ç«Ç§ÇºÇ®í ÇËâ∫Ç≥Ç¢/Ç†ÇÃï˚ÇÕÇ±ÇÃâúÇ…Ç¢ÇÁÇ¡ÇµÇ·Ç¢Ç‹Ç∑"
				ENDIF
				SETBIT É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):(40+FLAG:åªM) , LOCAL
			CASE 202
				;ÉÅÉbÉZÉìÉWÉÉÅ[
				IF É_ÉìÉWÉáÉìÉtÉâÉO:[[É_ÉìÉWÉáÉì:ê‘ç‚]]:1 == 0
					CALL MESSAGE_WINDOW_D , "É~ÉÖÅ[É^ÉìÉg" , "ÅcÇ®ëOÇÁâΩÇµÇ…Ç´ÇΩÅH"
					CALL MESSAGE_WINDOW_D , "É~ÉÖÅ[É^ÉìÉg" , "Ç±Ç±ÇÕÇ®ëOÇÁÇÃÇÊÇ§Ç»/ïÅí ÇÃêlä‘Ç™óàÇÈèäÇ∆ÇÕà·Ç§/Ç≥Ç¡Ç≥Ç∆ãAÇËÇ»" , "/" , "ÉçÉOÇécÇ≥Ç»Ç¢/É{É^ÉìÇóòópÇ∑ÇÈ/çƒóòópÇ∑ÇÈ"
				ELSE
					CALL MESSAGE_WINDOW_D , "É~ÉÖÅ[É^ÉìÉg" , "ÅcÅcâ‰ÅXÉ~ÉÖÅ[É^ÉìÉgÇÕ/ínè„Ç≈ÇµÇ¢ÇΩÇ∞ÇÁÇÍÇΩÇ†Ç∞Ç≠/ínâ∫Ç…í«ï˙Ç≥ÇÍÇΩÇÃÇæ"
				ENDIF
				SETBIT É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):(40+FLAG:åªM) , LOCAL
			;ÇaÇVÇeÅ@ÉCÉxÉìÉg
			CASE 0
				CALL MESSAGE_WINDOW_D , "É~ÉÖÅ[É^ÉìÉg" , "ê≠ï{Ç‚ÉÅÉVÉAã≥ìkíBÇÕàŸå`ÇÃéÑíBÇ/ínè„ÇÊÇËí«ï˙ÇµÇΩ/èZÇﬁèÍèäÇé∏Ç≠ÇµÇΩéÑíBÇ…ÇÕ/ínâ∫Ç÷ì¶Ç∞ÇÈÇŸÇ© ê∂Ç´ÇÈìπÇÕñ≥Ç©Ç¡ÇΩÅcÅc"
				CALL MESSAGE_WINDOW_D ,  "É~ÉÖÅ[É^ÉìÉg" , "Ç±ÇÃç¶Ç›ÅcÅc/ínè„Ç™ñ≈Ç—ÇÈì˙Ç‹Ç≈ ìzÇÁÇ™éÄÇ…ê‚Ç¶ÇÈÇªÇÃéûÇ‹Ç≈/åàÇµÇƒñYÇÍÇÕÇµÇ»Ç¢ÅcÅc"
				SETBIT É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):(40+FLAG:åªM) , LOCAL
				
			CASE 1
				;ï«ÇÃóéèëÇ´
				CALL MESSAGE_WINDOW_D , "ï∂éö" , "ÅÑÅgÉ~ÉÖÅ[É^ÉìÉgÅEÉRÉ~ÉÖÉjÉeÉBÅ[Åh/Å@ínè„ÇÃêlä‘ ì¸ÇÈÇ◊Ç©ÇÁÇ∏"
				CALL MESSAGE_WINDOW_D , "" , "ÅÑÅcÅcÇ∆ï«Ç…èëÇ¢ÇƒÇ†ÇÈ"
				SETBIT É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):(40+FLAG:åªM) , LOCAL
			CASE 2
				;ÉÅÉbÉZÉìÉWÉÉÅ[
				CALL MESSAGE_WINDOW_D , "ÉKÉCÉAã≥ìk" , "Ç±ÇÃìåãûÇÃínÇ…ÇÕëÂòaê_ë∞ÇÃê_ÅXÇ™ïïàÛÇ≥ÇÍÇƒÇ¢ÇÈÇ∆Ç¢Ç§"
				CALL MESSAGE_WINDOW_D , "ÉKÉCÉAã≥ìk" , "îﬁÇÁÇÃã¶óÕÇìæÇƒÅA/â‰ÅXÉKÉCÉAã≥ÇÃãwìGÉÅÉVÉAã≥ìkÇ«Ç‡Çì¢Çøñ≈Ç⁄Ç∑Ç◊Ç≠/Ç±ÇÃê_ÅXÇÃïúäàÇë“Ç¡ÇƒÇ¢ÇÈÇÃÇæÅcÅc"
				SETBIT É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):(40+FLAG:åªM) , LOCAL
			CASE 3
				;ÉÅÉbÉZÉìÉWÉÉÅ[
				CALL MESSAGE_WINDOW_D , "É~ÉÖÅ[É^ÉìÉg" , "è´ñÂåˆÇ…ÇÕñÇäEÇ…Ç‡çsÇØÇÈóÕÇ™Ç†ÇÈÇªÇ§Çæ"
				CALL MESSAGE_WINDOW_D ,  "É~ÉÖÅ[É^ÉìÉg" , "ÅcÅcÇ±ÇÒÇ»èäÇ≈ïÈÇÁÇµÇƒÇΩÇ¡ÇƒÉÜÉÅÇ‡ÉLÉ{ÉEÇ‡ñ≥Ç¢Çµ/Ç¢Ç¡ÇªñÇäEÇ…òAÇÍÇƒçsÇ¡ÇƒÇ‡ÇÁÇ¢ÇΩÇ¢ÇÊ" , "/" , "ÉçÉOÇécÇ≥Ç»Ç¢/É{É^ÉìÇóòópÇ∑ÇÈ/çƒóòópÇ∑ÇÈ"
				SETBIT É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):(40+FLAG:åªM) , LOCAL
			CASE 4
				;í∑òV
				IF !GETBIT(É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):(40+FLAG:åªM) , LOCAL)
					CALL MESSAGE_WINDOW_D , "É~ÉÖÅ[É^ÉìÉgí∑òV" , "ÅcÅcínè„ÇÃäXÇ™ÇªÇ§Ç≈Ç†ÇÈÇÊÇ§Ç…ÅAÇ±Ç±Ç‡å≥ÅXÉgÉEÉLÉáÉEÇÃäXÇæÇ¡ÇΩ/ÇæÇ™Ç±Ç±Ç™à´ñÇÇÃëÉåAÇ∆âªÇµ ïïçΩÇ≥ÇÍë≈ÇøéÃÇƒÇÁÇÍÇÈÇ∆/Ç¢Ç¬ÇµÇ©ínè„ÇÃêlä‘Ç…ÇÕñYÇÍãéÇÁÇÍ/ínè„Çí«ÇÌÇÍÇΩé“ÇæÇØÇ™Ç–Ç¡ÇªÇËÇ∆ïÈÇÁÇ∑ÇÊÇ§Ç…Ç»Ç¡ÇΩ"
					CALL MESSAGE_WINDOW_D , "É~ÉÖÅ[É^ÉìÉg" , "ïÅí ÇÃêlä‘Ç‚ÉÅÉVÉAã≥ìkíBÇÕ/â‰ÅXÇÃÇÊÇ§Ç»èXÇ¢É~ÉÖÅ[É^ÉìÉgÇ™/ínè„Ç…èZÇﬁÇ±Ç∆ÇãñÇ≥Ç∏í«ï˙ÇµÇΩ"
					CALL MESSAGE_WINDOW_D , "É~ÉÖÅ[É^ÉìÉg" , "â‰ÅXÇÕÇ‚Ç¡Ç∆ÇÃévÇ¢Ç≈Ç±Ç±Ç÷ì¶Ç∞âÑÇ—/ÇªÇµÇƒåıÇ©ÇÁâìÇ¥ÇØÇÁÇÍÇ»Ç™ÇÁê∂Ç´ÇƒÇ´ÇΩÇÃÇæ"
				ENDIF
				CALL MESSAGE_WINDOW_D , "É~ÉÖÅ[É^ÉìÉg" , "ÅcÅcâ‰ÅXÇÕâΩÇ‡Ç¢ÇÁÇ  âΩÇ‡ñ]Ç‹Ç /ÇΩÇæÇ‡Ç§àÍìx åıÇ™ó~ÇµÇ¢ÅcÅc"
				SETBIT É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):(40+FLAG:åªM) , LOCAL
			CASE 5
				;ïêäÌâÆ
				CALL MESSAGE_WINDOW_D , "ïêäÌâÆ" , "Ç¢ÇÁÇ¡ÇµÇ·Ç¢"
				$WEAPONS_5
				CALL INPUT_SELECT_D, "âΩÇÃópÇæÇ¢ÅH//[1]îÉÇ§/[2]ÉXÉeÉCÉ^ÉXÇå©ÇÈ///[0]äOÇ…èoÇÈ" , , , 2
				IF RESULT == 1
					CALL MESSAGE_WINDOW_D , "ïêäÌâÆ" , "âΩÇÇ®îÉÇ¢è„Ç∞Ç≈ÅH"
					;20ÉåÉxÉãå¸ÇØGunÇ∆íeä€Ç1äÑà¯Ç´Ç≈îÃîÑ
					LOCALS = 
					LOCALS += "Gyrojet," + TOSTR(ITEMPRICE:Gyrojet*9/10) + ","
					LOCALS += "Remington Çl710," + TOSTR(ITEMPRICE:"Remington Çl710"*9/10) + ","
					LOCALS += "Holy Shell," + TOSTR(ITEMPRICE:"Holy Shell"*8/10) + ","
					LOCALS += "Curse Shell," + TOSTR(ITEMPRICE:"Curse Shell"*8/10) + ","
					LOCALS += "Dispel Shot," + TOSTR(ITEMPRICE:"Dispel Shot"*8/10) + ","
					CALL DUNGEON_SHOPS, 0, LOCALS
				ELSEIF RESULT == 2
					CALL SHOP_COM_110
				ELSE
					CALL MESSAGE_WINDOW_D , "ïêäÌâÆ" , "ñàìxÇ†ÇË Ç‹ÇΩÇ«Ç§Çº"
					RETURN 1
				ENDIF
				GOTO WEAPONS_5
			CASE 6
				;ñhãÔâÆ
				CALL MESSAGE_WINDOW_D , "ñhãÔâÆ" , "Ç†Å[ÇÁ Ç¢ÇÁÇ¡ÇµÇ·Ç¢"
				$ARMORS_6
				CALL INPUT_SELECT_D, "âΩÇÃå‰ópÇ©ÇµÇÁÅH//[1]îÉÇ§/[2]ÉXÉeÉCÉ^ÉXÇå©ÇÈ///[0]äOÇ…èoÇÈ" , , , 2
				IF RESULT == 1
					CALL MESSAGE_WINDOW_D , "ñhãÔâÆ" , "âΩÇÇ®îÉÇ¢è„Ç∞Ç©ÇµÇÁÅH"
					;20ÉåÉxÉãå¸ÇØñhãÔÇ1äÑà¯Ç´Ç≈îÃîÑ
					LOCALS = 
					LOCALS += "Plate Bandana," + TOSTR(ITEMPRICE:"Plate Bandana"*9/10) + ","
					LOCALS += "Tang Lion Happi," + TOSTR(ITEMPRICE:"Tang Lion Happi"*9/10) + ","
					LOCALS += "Whirlwind Gauntlet," + TOSTR(ITEMPRICE:"Whirlwind Gauntlet"*9/10) + ","
					LOCALS += "CrscntMoon Greaves," + TOSTR(ITEMPRICE:"CrscntMoon Greaves"*9/10) + ","
					CALL DUNGEON_SHOPS, 0, LOCALS
				ELSEIF RESULT == 2
					CALL SHOP_COM_110
				ELSE
					CALL MESSAGE_WINDOW_D , "ñhãÔâÆ" , "Ç†ÇËÇ™Ç∆ Ç‹ÇΩÇ¢ÇÁÇµÇƒÇÀÇ•"
					RETURN 1
				ENDIF
				GOTO ARMORS_6
			CASE 7
				;ÉKÉCÉAê_ìa
				CALL GAIA_TEMPLE_29
		ENDSELECT
		RETURN 1
		
;========================
;ÇªÇÃëº
;========================
	CASE 9
		SELECTCASE DA:(FLAG:åªX):(FLAG:åªY) / 10
			;ÉVÉáÅ[ÉgÅEÉ^Å[É~ÉiÉã
			CASE 1
				CALLFORM S_TERMINAL_{FLAG:åªÉ_ÉìÉWÉáÉì}
			;ÉGÉåÉxÅ[É^Å[
			CASE 2
				CALL DUNGEON_ELEVATOR, 29
			CASE 3
				CALL DUNGEON_ELEVATOR, 39
			CASE 4
				CALL DUNGEON_ELEVATOR, 49
		ENDSELECT
		RETURN 1
ENDSELECT
RETURN 0

;=======================================================================
;ïÛî†ÇÃíÜêg
;=======================================================================
@TREASURE_29
SELECTCASE DA:(FLAG:åªX):(FLAG:åªY) / 10
	CASE 600
		LOCALS = PoisonArrow
		LOCAL = 1
	CASE 601
		LOCALS = ñÇñ@ÇÃî†
		LOCALS:1 = ÉKÅ[ÉlÉbÉg
		LOCALS:2 = Life stone
		LOCAL = 8
		LOCAL:1 = 1
	CASE 602
		LOCALS = LuIncense
		LOCAL = 1
	CASE 500
		LOCALS = ñÇñ@ÇÃî†
		LOCALS:1 = É_ÉCÉÑÉÇÉìÉh
		LOCALS:2 = Life stone
		LOCAL = 8
		LOCAL:1 = 1
	CASE 400
		LOCALS = Youtou Nihil
		LOCAL = 1
	CASE 200
		LOCALS = MegidoStone
		LOCAL = 1
	CASE 201
		LOCALS = ëPçsÇÃêŒ
		LOCAL = 1
	CASE 202
		LOCALS = Dis-Stone
		LOCAL = 2
	CASE 100
		LOCALS = Nameless Sword
		LOCAL = 1
	CASE 101
		LOCALS = ñÇñ@ÇÃî†
		LOCALS:1 = ÉpÅ[Éã
		LOCALS:2 = Life stone
		LOCAL = 8
		LOCAL:1 = 1
	CASE 102
		LOCALS = ÉÅÉ^ÉãÉJÅ[Éh
		LOCAL = 1
	CASE 103
		LOCALS = ñÇñ@ÇÃî†
		LOCALS:1 = ÉãÉrÅ[
		LOCALS:2 = Life stone
		LOCAL = 8
		LOCAL:1 = 1
	CASEELSE
ENDSELECT
IF LOCALS == "Åè"
	CALL GET_TREASURE_MONEY, 0, LOCAL, FLAG:åªÉ_ÉìÉWÉáÉì, FLAG:åªM + 70, (DA:(FLAG:åªX):(FLAG:åªY) / 10) % 100
ELSEIF LOCALS == "ñÇâ›"
	CALL GET_TREASURE_MONEY, 1, LOCAL, FLAG:åªÉ_ÉìÉWÉáÉì, FLAG:åªM + 70, (DA:(FLAG:åªX):(FLAG:åªY) / 10) % 100
ELSEIF LOCALS == "MAG" || LOCALS == "ÇlÇ`Çf"
	CALL GET_TREASURE_MAG, 0, LOCAL, FLAG:åªÉ_ÉìÉWÉáÉì, FLAG:åªM + 70, (DA:(FLAG:åªX):(FLAG:åªY) / 10) % 100
ELSEIF LOCALS == "„©"
	;LOCALS:1 éÌóﬁ LOCAL É_ÉÅÅ[ÉWó orämó¶ LOCALS:2 ëäê´
	CALL GET_TREASURE_TRAP, LOCALS:1, LOCAL, GET_TYPE_NUM(LOCALS:2), FLAG:åªÉ_ÉìÉWÉáÉì, FLAG:åªM + 70, (DA:(FLAG:åªX):(FLAG:åªY) / 10) % 100
ELSEIF LOCALS == "ñÇñ@ÇÃî†"
	IF GETNUM(ITEM, LOCALS:1) == -1 || GETNUM(ITEM, LOCALS:2) == -1
		PRINTL ÅÑÉAÉCÉeÉÄñºÇÃéwíËÇ™ä‘à·Ç¡ÇƒÇ‹Ç∑
		PRINTW ÅÑÉAÉCÉeÉÄÇÃéÊìæèàóùÇíÜífÇµÇ‹Ç∑
	ELSE
		CALL MAGIC_BOX , LOCAL , GETNUM(ITEM, LOCALS:1) , GETNUM(ITEM, LOCALS:2) , LOCAL:1 , FLAG:åªÉ_ÉìÉWÉáÉì, FLAG:åªM + 70, (DA:(FLAG:åªX):(FLAG:åªY) / 10) % 100
	ENDIF
ELSE
	IF GETNUM(ITEM, LOCALS) == -1
		PRINTL ÅÑÉAÉCÉeÉÄñºÇÃéwíËÇ™ä‘à·Ç¡ÇƒÇ‹Ç∑
		PRINTW ÅÑÉAÉCÉeÉÄÇÃéÊìæèàóùÇíÜífÇµÇ‹Ç∑
	ELSE
		CALL GET_TREASURE, GETNUM(ITEM, LOCALS), LOCAL , FLAG:åªÉ_ÉìÉWÉáÉì, FLAG:åªM + 70, (DA:(FLAG:åªX):(FLAG:åªY) / 10) % 100
	ENDIF
ENDIF
RETURN 1

;=======================================================================
;äKíiíuÇ´èÍ
;=======================================================================
@UPSTAIRS_29
;à íuÇ∆IDÇ™ëŒâûÇµÇƒÇ¢ÇÈÇÕÇ∏Ç»ÇÃÇ≈ÅAìØIDÇÃäKíiÇíTÇ≥ÇπÇÍÇŒó«Ç¢
CALL DUNGEON_UPSTAIRS_ID, FLAG:åªM+1 , DA:(FLAG:åªX):(FLAG:åªY) + 1000 + 1
RETURN 1

@DOWNSTAIRS_29
CALL DUNGEON_DOWNSTAIRS_ID, FLAG:åªM-1 , DA:(FLAG:åªX):(FLAG:åªY) - 1000 - 1
RETURN 1
;=======================================================================
;ÉGÉåÉxÅ[É^Å[íËã`
;=======================================================================
@DUNGEON_ELEVATOR_29, ARG
VARSET RESULT, -1
VARSET RESULTS
SELECTCASE ARG
	CASE 29
		RESULT:1 = 6
		RESULT:2 = 3
		RETURN -1
	CASE 39
		RESULT:1 = 2
		RESULT:2 = 1
		RESULT:3 = 0
		RETURN -1
	CASE 49
		RESULT:1 = 2
		RESULT:2 = 1
		RESULT:3 = 0
		RETURN -1
ENDSELECT
;=======================================================================
;ÇrÉ^Å[É~ÉiÉã
;=======================================================================
@S_TERMINAL_29
#LOCALSSIZE 1
SELECTCASE FLAG:åªM
	CASE 6
		SETBIT É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):2 , 0
	CASE 3
		SETBIT É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):2 , 1
	CASE 2
		SETBIT É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):2 , 2
ENDSELECT
LOCALS = 
SIF GETBIT(É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):2 , 0) && FLAG:åªM != 6
	LOCALS += "[1] ÇaÇPÇeÇ÷/"
SIF GETBIT(É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):2 , 1) && FLAG:åªM != 3
	LOCALS += "[2] ÇaÇSÇeÇ÷/"
SIF GETBIT(É_ÉìÉWÉáÉìÉtÉâÉO:(FLAG:åªÉ_ÉìÉWÉáÉì):2 , 2) && FLAG:åªM != 2
	LOCALS += "[3] ÇaÇTÇeÇ÷/"
LOCALS += "[0] óòópÇµÇ»Ç¢/[100] é©é∫Ç÷ñﬂÇÈ"
CALL MESSAGE_WINDOW_D, "", "ÅÑÇrÉ^Å[É~ÉiÉãÇ™Ç†ÇÈ/ÅÑÇ«Ç§ÇµÇ‹Ç∑Ç©ÅH"
CALL INPUT_SELECT_D, LOCALS
IF RESULT == 0
	RETURN 0
ELSEIF RESULT == 100
	FLAG:íEèo = 1
	RETURN 0
ELSEIF RESULT == 1
	CALL DUNGEON_WORP_ID,6,19,1
	RETURN 0
ELSEIF RESULT == 2
	CALL DUNGEON_WORP_ID,3,19,1
	RETURN 0
ELSE
	CALL DUNGEON_WORP_ID,2,19,1
	RETURN 0
ENDIF
RETURN 0

;=======================================================================
;ÉGÉìÉJÉEÉìÉgó¶
;=======================================================================
@ENCOUNT_RATE_29
SELECTCASE FLAG:åªM
	CASEELSE
		FLAG:ÉGÉìÉJÉEÉìÉgó¶ = MAX(FLAG:ñ¢ëòãˆï‡êî * 5 - 25, 0)
		FLAG:MAGè¡îÔó¶ = 100
ENDSELECT
FLAG:ÉGÉìÉJÉEÉìÉgó¶ = 0
;=======================================================================
;ÉGÉìÉJÉEÉìÉgèàóù
;=======================================================================
@CHECK_ENCOUNT_29
#LOCALSIZE 3
IF RAND:100 < FLAG:ÉGÉìÉJÉEÉìÉgó¶
	CALL ENEMY_TABLE
	RETURN 1
ELSE
	FLAG:ñ¢ëòãˆï‡êî += 1
	RETURN 0
ENDIF

;=======================================================================
;ìGÇÃéÌë∞ÇÃéÌóﬁêî
;=======================================================================
@CLASS_NUM_29
SELECTCASE FLAG:åªM
	;ínóÏäX
	CASE 3 TO 6
		RETURN CLASS_NUM_COMMON("èâãâ")
	;É~ÉÖÅ[É^ÉìÉgÅEÉRÉ~ÉÖÉjÉeÉBÅ[
	CASEELSE
		RETURN CLASS_NUM_COMMON("íÜãâ")
ENDSELECT

;=======================================================================
;ìGÇÃëçêî
;=======================================================================
@ENEMY_NUM_29, ARG
SELECTCASE FLAG:åªM
	;ínóÏäX
	CASE 3 TO 6
		RETURN ENEMY_NUM_COMMON("íÜãâ", ARG)
	;É~ÉÖÅ[É^ÉìÉgÅEÉRÉ~ÉÖÉjÉeÉBÅ[
	CASEELSE
		RETURN ENEMY_NUM_COMMON("è„ãâ", ARG)
ENDSELECT
;=======================================================================
;ìGÇÃéÌóﬁ
;=======================================================================
@ENEMY_29, ARG
SELECTCASE FLAG:åªM
	;ê‘ç‚
	;ínóÏÇÃäX
	CASE 3 TO 6
		SELECTCASE RAND:100
			CASE IS < 15
				RETURN [[ÉLÉÉÉâ:ÉmÉbÉJÅ[]], 15
			CASE IS < 30
				RETURN [[ÉLÉÉÉâ:ÉuÉâÉEÉjÅ[]], 17
			CASE IS < 50
				RETURN [[ÉLÉÉÉâ:ÉJÉnÉN]], 17
			CASE IS < 70
				RETURN [[ÉLÉÉÉâ:ÉcÉ`ÉOÉÇ]], 18
			CASE IS < 85
				RETURN [[ÉLÉÉÉâ:ÉRÉbÉpÉeÉìÉO]], 19
			CASE IS < 95
				RETURN [[ÉLÉÉÉâ:ÉhÉîÉFÉãÉKÅ[]], 23
			CASE IS < 100
				IF RAND:2 == 1
					RETURN [[ÉLÉÉÉâ:ÉJÉâÉXÉeÉìÉO]], 28
				ELSEIF RAND:2 == 1
					RETURN [[ÉLÉÉÉâ:ÉEÉxÉãÉä]], 33
				ELSE
					RETURN [[ÉLÉÉÉâ:ÉeÉBÉ^Å[Éì]], 45
				ENDIF
		ENDSELECT
	;É~ÉÖÅ[É^ÉìÉgÅEÉRÉ~ÉÖÉjÉeÉBÅ[
	CASE 0 TO 2
		SELECTCASE RAND:100
			CASE IS < 15
				RETURN [[ÉLÉÉÉâ:É_Å[ÉNÉGÉãÉt]], 19
			CASE IS < 30
				RETURN [[ÉLÉÉÉâ:ÉcÉ`ÉOÉÇ]], 19
			CASE IS < 45
				RETURN [[ÉLÉÉÉâ:ÉmÉYÉ`]], 19
			CASE IS < 60
				RETURN [[ÉLÉÉÉâ:ì¡çUë‡]], 20
			CASE IS < 75
				RETURN [[ÉLÉÉÉâ:ÉlÉRÉ}É^]], 22
			CASE IS < 90
				RETURN [[ÉLÉÉÉâ:ÉhÉîÉFÉãÉKÅ[]], 25
			CASE IS < 100
				RETURN [[ÉLÉÉÉâ:ÉoÉìÉVÅ[]], 27
		ENDSELECT
ENDSELECT
;=================================
;ì¡éÍí≤êÆ
;=================================
@SET_ENEMY_STATUS_29, ARG
#LOCALSIZE 1
SELECTCASE NO:ARG
	CASE [[ÉLÉÉÉâ:ÉmÉbÉJÅ[]]
		ABL:ARG:ÉXÉLÉã3 = [[ÉXÉLÉã:ÉfÉBÉAÉâÉ}]]
		ABL:ARG:ÉXÉLÉã5 = [[ÉXÉLÉã:É\ÉjÉbÉNÉpÉìÉ`]]
		ABL:ARG:ÉXÉLÉã2 = [[ÉXÉLÉã:É}ÉOÉiÉX]]
		ABL:ARG:ÉXÉLÉã7 = [[ÉXÉLÉã:É}ÉnÅEÉ}ÉOÉi]]
	CASE [[ÉLÉÉÉâ:ÉuÉâÉEÉjÅ[]]
		ABL:ARG:ÉXÉLÉã2 = [[ÉXÉLÉã:ÉOÉâÉCÉo]]
		ABL:ARG:ÉXÉLÉã5 = [[ÉXÉLÉã:É}ÉnÅEÉOÉâÉC]]
	CASE [[ÉLÉÉÉâ:ÉJÉnÉN]]
		ABL:ARG:ÉXÉLÉã1 = [[ÉXÉLÉã:ÉAÉMÉâÉI]]
		ABL:ARG:ÉXÉLÉã4 = [[ÉXÉLÉã:ÉyÉìÉpÉgÉâ]]
	CASEELSE
ENDSELECT

@GAIA_TEMPLE_29
IF ABL:MASTER:ëÆê´LC == 1
	CALL MESSAGE_WINDOW_D , "ÉKÉCÉAã≥éiç’" , "ÉçÉEÉTÉCÉhÇÃégìkÇﬂë¶çèÇ±ÇÃèÍÇ©ÇÁóßÇøãéÇÍÇ°ÅI"
	IF MONEY < 5000
		RETURN 1
	ELSE
		CALL MESSAGE_WINDOW_D , "ÉKÉCÉAã≥éiç’" , "ÅcÅcÇ™ÅAÅè5000ÇäÒêiÇ∑ÇÈÇÃÇ≈Ç†ÇÍÇŒï÷ãXÇê}Ç¡ÇƒÇ‡ó«Ç¢Çº"
		CALL INPUT_YN, "ï•Ç§" , "ï•ÇÌÇ»Ç¢"
		SIF RESULT == 1
			RETURN 1
		MONEY -= 5000
	ENDIF
ENDIF
;ÉKÉCÉAê_ìa
CALL MESSAGE_WINDOW_D , "éiç’" , "Ç±Ç±ÇÕ ÉKÉCÉAê_ìa"
$GAIA
CALL INPUT_SELECT_D, "âΩÇÃópÇæÅH//[1]ÉAÉCÉeÉÄÇîÉÇ§/[2]ÉXÉeÉCÉ^ÉXÇå©ÇÈ///[0]äOÇ…èoÇÈ" , , , 2
IF RESULT == 1
	CALL MESSAGE_WINDOW_D , "éiç’" , "Ç«ÇÍÇ…Ç∑ÇÈÇÃÇæÅH"
	;ÉJÉIÉXånÉAÉCÉeÉÄÇ1äÑà¯Ç´Ç≈
	LOCALS = 
	LOCALS += "PoisonArrow," + TOSTR(ITEMPRICE:"PoisonArrow"*9/10) + ","
	LOCALS += "Â¡ì≈éM," + TOSTR(ITEMPRICE:Â¡ì≈éM*9/10) + ","
	LOCALS += "DeadlyNeedle," + TOSTR(ITEMPRICE:DeadlyNeedle*9/10) + ","
	LOCALS += "Prayer Beads," + TOSTR(ITEMPRICE:"Prayer Beads"*9/10) + ","
	CALL DUNGEON_SHOPS, 0, LOCALS
ELSEIF RESULT == 2
	CALL SHOP_COM_110
ELSE
	CALL MESSAGE_WINDOW_D , "éiç’" , "Ç±ÇÃê¢Ç…ç¨ì◊ÇÇ‡ÇΩÇÁÇ≥ÇÒ"
	RETURN 1
ENDIF
GOTO GAIA


;=======================================================================
;ó÷ä≠éQâ¡à´ñÇ
;=======================================================================
@DUNGEON_RAPE_DEVIL_29
;ÉâÉìÉ_ÉÄÇ…Ç«ÇÃà´ñÇÇ™èoÇÈÇ©åàíË
;RETURN CSVî‘çÜ , êlêî , ÉåÉxÉã
SELECTCASE RAND:4
	CASE 0
		RETURN [[ÉLÉÉÉâ:ÉEÉxÉãÉä]] , 3 + RAND:10 , CSVBASE([[ÉLÉÉÉâ:ÉEÉxÉãÉä]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 1
		RETURN [[ÉLÉÉÉâ:ÉeÉBÉ^Å[Éì]] , 3 + RAND:10 , CSVBASE([[ÉLÉÉÉâ:ÉeÉBÉ^Å[Éì]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 2
		RETURN [[ÉLÉÉÉâ:ÉcÉ`ÉOÉÇ]] , 3 + RAND:10 , CSVBASE([[ÉLÉÉÉâ:ÉcÉ`ÉOÉÇ]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 3
		RETURN [[ÉLÉÉÉâ:ÉmÉYÉ`]] , 3 + RAND:10 , CSVBASE([[ÉLÉÉÉâ:ÉmÉYÉ`]] , GETNUM(BASE , "LV") , 0) + RAND:3
ENDSELECT







;=======================================================================
;ÉQÅ[ÉÄÉIÅ[ÉoÅ[
;=======================================================================




