
;=======================================================================
;貪欲界
;ボス・妖獣チェフェイ
;ダンジョンナンバー43　ＭＡＰ0~2
;=======================================================================




;=======================================================================
;攻略条件
;=======================================================================
@PREREQUISITE_DUNGEON_43
;特になし
IF イベントフラグ:2:0 == 1 && BASE:MASTER:LV > 30
	RETURN 1
ELSE
	RETURN 0
ENDIF



;=======================================================================
;ダンジョン名
;=======================================================================
@GET_DUNGEON_NAME_43
RESULTS = World of Greed


;=======================================================================
;フロア名表示
;=======================================================================
@FLOORNAME_43
PRINT World of Greed 
SELECTCASE FLAG:現M
	CASE 0
		PRINTL ３Ｆ Northwest
	CASE 1
		PRINTL ３Ｆ Southwest
	CASE 2
		PRINTL ３Ｆ Northeast
	CASE 3
		PRINTL ３Ｆ Southeast

	CASE 4
		PRINTL ２Ｆ Northwest
	CASE 5
		PRINTL ２Ｆ Southwest
	CASE 6
		PRINTL ２Ｆ Northeast
	CASE 7
		PRINTL ２Ｆ Southeast
		
	CASE 8
		PRINTL １Ｆ Northwest
	CASE 9
		PRINTL １Ｆ Southwest
	CASE 10
		PRINTL １Ｆ Northeast
	CASE 11
		PRINTL １Ｆ Southeast
		
	CASE 12
		PRINTL Basement １Ｆ

	CASE 13
		PRINTL １Ｆ Center
	CASE 14
		PRINTL ２Ｆ Center
	CASE 15
		PRINTL ３Ｆ Center
	CASE 16
		PRINTL ４Ｆ

	CASEELSE
		PRINTL
ENDSELECT


;=======================================================================
;特殊タイル表示
;=======================================================================
@TILE_MARK_43_0_19_1
RESULTS = →
@TILE_MARK_43_0_1_14
RESULTS = ↓

@TILE_MARK_43_1_1_0
RESULTS = ↑
@TILE_MARK_43_1_19_13
RESULTS = →
@TILE_MARK_43_1_1_13
RESULTS = Ｗ
@TILE_MARK_43_1_3_8
RESULTS = Ｗ
@TILE_MARK_43_1_8_6
RESULTS = Ｗ
@TILE_MARK_43_1_7_11
RESULTS = Ｗ
@TILE_MARK_43_1_5_13
RESULTS = Ｗ

@TILE_MARK_43_2_0_1
RESULTS = ←
@TILE_MARK_43_2_18_14
RESULTS = ↓

@TILE_MARK_43_3_18_0
RESULTS = ↑
@TILE_MARK_43_3_0_13
RESULTS = ←
@TILE_MARK_43_3_15_7
RESULTS = 落
@TILE_MARK_43_3_18_11
RESULTS = 落

@TILE_MARK_43_4_19_1
RESULTS = →
@TILE_MARK_43_4_1_14
RESULTS = ↓
@TILE_MARK_43_4_3_14
RESULTS = ↓

@TILE_MARK_43_5_1_0
RESULTS = ↑
@TILE_MARK_43_5_3_0
RESULTS = ↑
@TILE_MARK_43_5_19_11
RESULTS = →
@TILE_MARK_43_5_19_13
RESULTS = →
@TILE_MARK_43_5_1_7
RESULTS = Ｗ
@TILE_MARK_43_5_6_13
RESULTS = Ｗ

@TILE_MARK_43_6_0_1
RESULTS = ←
@TILE_MARK_43_6_18_14
RESULTS = ↓
@TILE_MARK_43_6_14_3
RESULTS = 落

@TILE_MARK_43_7_18_0
RESULTS = ↑
@TILE_MARK_43_7_0_11
RESULTS = ←
@TILE_MARK_43_7_0_13
RESULTS = ←

@TILE_MARK_43_8_19_1
RESULTS = →
@TILE_MARK_43_8_19_5
RESULTS = →

@TILE_MARK_43_8_1_14
RESULTS = ↓
@TILE_MARK_43_8_3_14
RESULTS = ↓
@TILE_MARK_43_8_5_14
RESULTS = ↓
@TILE_MARK_43_8_9_1
RESULTS = Ｗ
@TILE_MARK_43_8_1_3
RESULTS = Ｗ
@TILE_MARK_43_8_7_5
RESULTS = Ｗ

@TILE_MARK_43_9_1_0
RESULTS = ↑
@TILE_MARK_43_9_3_0
RESULTS = ↑
@TILE_MARK_43_9_5_0
RESULTS = ↑
@TILE_MARK_43_9_19_13
RESULTS = →
@TILE_MARK_43_9_3_3
RESULTS = Ｔ

@TILE_MARK_43_10_0_1
RESULTS = ←
@TILE_MARK_43_10_0_5
RESULTS = ←
@TILE_MARK_43_10_14_14
RESULTS = ↓

@TILE_MARK_43_11_14_0
RESULTS = ↑
@TILE_MARK_43_11_0_13
RESULTS = ←

;=======================================================================
;スタート地点入力
;=======================================================================
@START_DUNGEON_43,ARG
FLAG:現M = 2
FLAG:現X = 18
FLAG:現Y = 1
;CALL AUTOMAP

;=======================================================================
;スタート時イベント
;=======================================================================
@EVENT_DUNGEON_START_43
IF FLAG:DEBUG
	PRINTFORMW 「Welcome, to my penis land」
	PRINTFORMW %CALLNAME:MASTER%がその魔界に足を踏み入れると魔神皇ハザマの幻影が話しかけてきた.
	PRINTFORMW 先を急ぐ%CALLNAME:MASTER%は無視する事にした.
	PRINTFORMW 「Kuh...Don't ignore me!!」
	PRINTFORMW 「ま, 待たないかっ...」
	PRINTFORMW 可哀想なので%CALLNAME:MASTER%は五分だけ話を聞いてやることにした.
	PRINTFORMW この魔界は魔神皇ハザマの呼びかけに応えた, 魔界の一つ.
	PRINTFORMW 貪欲界と言うらしい.
	PRINTFORMW この魔界の主は齢30歳を超えた魔法使いや, 引き篭もり高校生ハザマさえも食ってしまうらしい.
	PRINTFORMW おちんちんをシコシコしてもらって欲望を満たす為だけに悪魔を召喚する辺り...
	PRINTFORMW 魔神皇も所詮は高校生かと%CALLNAME:MASTER%は呆れながらに思った.
ELSEIF ダンジョンフラグ:7:1 == 1
	PRINTFORMW One of the parting gifts of Diety Emperor Hazama, the World of Greed.
	PRINTFORMW A hell wherein a man's work is questioned...
ELSE
	PRINTFORMW One of the demon worlds created by Deity Emperor Hazama, the World of Greed.
	PRINTFORMW A hell wherein a man's work is questioned...
ENDIF
;=======================================================================
;指定したマスに進入可能か
;=======================================================================
@CAN_ENTER_43,ARG,ARG:1
IF FLAG:現M == 2 && ARG == 10 && ARG:1 == 1 && ダンジョンフラグ:43:50 == 0
	ダンジョンフラグ:43:50 = 1
ENDIF
IF FLAG:現M == 2 && ARG == 12 && ARG:1 == 1 && ダンジョンフラグ:43:50 == 0
	ダンジョンフラグ:43:50 = 1
ENDIF
IF FLAG:現M == 0 && ARG == 11 && ARG:1 == 1
	IF ダンジョンフラグ:43:50 == 0
		PRINTW The door is shut
		CLEARLINE 1
		RETURN 0
	ELSEIF ダンジョンフラグ:43:50 == 1
		ダンジョンフラグ:43:50 = 0
		RETURN 1
	ENDIF
ENDIF
IF FLAG:現M == 2 && ARG == 11 && ARG:1 == 1
	IF ダンジョンフラグ:43:50 == 0
		PRINTW The door is shut
		CLEARLINE 2
		RETURN 0
	ELSEIF ダンジョンフラグ:43:50 == 1
		ダンジョンフラグ:43:50 = 0
		RETURN 1
	ENDIF
ENDIF


IF FLAG:現M == 2 && ARG == 16 && ARG:1 == 6 && ダンジョンフラグ:43:51 == 0
	ダンジョンフラグ:43:51 = 1
ENDIF
IF FLAG:現M == 2 && ARG == 16 && ARG:1 == 8 && ダンジョンフラグ:43:51 == 1
	ダンジョンフラグ:43:51 = 0
ENDIF
IF FLAG:現M == 2 && ARG == 16 && ARG:1 == 7
	IF ダンジョンフラグ:43:51 == 0
		PRINTW The door is shut
		CLEARLINE 3
		RETURN 0
	ELSEIF ダンジョンフラグ:43:51 == 1
		ダンジョンフラグ:43:51 = 0
		RETURN 1
	ENDIF
ENDIF


IF FLAG:現M == 2 && ARG == 18 && ARG:1 == 10 && ダンジョンフラグ:43:52 == 0
	ダンジョンフラグ:43:52 = 1
ENDIF
IF FLAG:現M == 3 && ARG == 18 && ARG:1 == 3 && ダンジョンフラグ:43:52 == 0
	ダンジョンフラグ:43:52 = 1
ENDIF
IF FLAG:現M == 2 && ARG == 18 && ARG:1 == 9
	IF ダンジョンフラグ:43:52 == 0
		PRINTW The door is shut
		CLEARLINE 4
		RETURN 0
	ELSEIF ダンジョンフラグ:43:52 == 1
		ダンジョンフラグ:43:52 = 0
		RETURN 1
	ENDIF
ENDIF
IF FLAG:現M == 3 && ARG == 18 && ARG:1 == 4
	IF ダンジョンフラグ:43:52 == 0
		PRINTW The door is shut
		CLEARLINE 5
		RETURN 0
	ELSEIF ダンジョンフラグ:43:52 == 1
		ダンジョンフラグ:43:52 = 0
		RETURN 1
	ENDIF
ENDIF


IF FLAG:現M == 4 && ARG == 8 && ARG:1 == 1 && ダンジョンフラグ:43:53 == 0
	ダンジョンフラグ:43:53 = 1
ENDIF
IF FLAG:現M == 4 && ARG == 8 && ARG:1 == 2
	IF ダンジョンフラグ:43:53 == 0
		PRINTW The door is shut
		CLEARLINE 1
		RETURN 0
	ELSEIF ダンジョンフラグ:43:53 == 1
		ダンジョンフラグ:43:53 = 0
		RETURN 1
	ENDIF
ENDIF


IF FLAG:現M == 5 && ARG == 3 && ARG:1 == 3 && ダンジョンフラグ:43:54 == 0
	ダンジョンフラグ:43:54 = 1
ENDIF
IF FLAG:現M == 5 && ARG == 3 && ARG:1 == 2 && ダンジョンフラグ:43:54 == 1
	ダンジョンフラグ:43:54 = 0
ENDIF
IF FLAG:現M == 5 && ARG == 3 && ARG:1 == 4 && ダンジョンフラグ:43:54 == 1
	ダンジョンフラグ:43:54 = 0
ENDIF
IF FLAG:現M == 5 && ARG == 2 && ARG:1 == 3
	IF ダンジョンフラグ:43:54 == 0
		PRINTW The door is shut
		CLEARLINE 1
		RETURN 0
	ELSEIF ダンジョンフラグ:43:54 == 1
		ダンジョンフラグ:43:54 = 0
		RETURN 1
	ENDIF
ENDIF


IF FLAG:現M == 5 && ARG == 14 && ARG:1 == 11 && ダンジョンフラグ:43:58 == 0
	ダンジョンフラグ:43:58 = 1
ENDIF
IF FLAG:現M == 5 && ARG == 15 && ARG:1 == 11 && ダンジョンフラグ:43:58 == 1
	ダンジョンフラグ:43:58 = 0
ENDIF
IF FLAG:現M == 5 && ARG == 13 && ARG:1 == 11 && ダンジョンフラグ:43:58 == 1
	ダンジョンフラグ:43:58 = 0
ENDIF
IF FLAG:現M == 5 && ARG == 14 && ARG:1 == 12
	IF ダンジョンフラグ:43:58 == 0
		PRINTW The door is shut
		CLEARLINE 1
		RETURN 0
	ELSEIF ダンジョンフラグ:43:58 == 1
		ダンジョンフラグ:43:58 = 0
		RETURN 1
	ENDIF
ENDIF



IF FLAG:現M == 6 && ARG == 14 && ARG:1 == 1 && ダンジョンフラグ:43:55 == 0
	ダンジョンフラグ:43:55 = 1
ENDIF
IF FLAG:現M == 6 && ARG == 14 && ARG:1 == 2 && ダンジョンフラグ:43:55 == 1
	ダンジョンフラグ:43:55 = 0
ENDIF
IF FLAG:現M == 6 && ARG == 14 && ARG:1 == 7 && ダンジョンフラグ:43:55 == 1
	ダンジョンフラグ:43:55 = 0
ENDIF
IF FLAG:現M == 6 && ARG == 13 && ARG:1 == 1
	IF ダンジョンフラグ:43:55 == 0
		PRINTW The door is shut
		CLEARLINE 1
		RETURN 0
	ELSEIF ダンジョンフラグ:43:55 == 1
		ダンジョンフラグ:43:55 = 0
		ダンジョンフラグ:43:56 = 1
		RETURN 1
	ENDIF
ENDIF
IF FLAG:現M == 6 && ARG == 15 && ARG:1 == 1
	IF ダンジョンフラグ:43:55 == 0
		PRINTW The door is shut
		CLEARLINE 2
		RETURN 0
	ELSEIF ダンジョンフラグ:43:55 == 1
		ダンジョンフラグ:43:55 = 0
		ダンジョンフラグ:43:56 = 1
		RETURN 1
	ENDIF
ENDIF


IF FLAG:現M == 6 && ARG == 12 && ARG:1 == 1 && ダンジョンフラグ:43:56 == 0
	ダンジョンフラグ:43:56 = 1
ENDIF
IF FLAG:現M == 6 && ARG == 16 && ARG:1 == 1 && ダンジョンフラグ:43:56 == 0
	ダンジョンフラグ:43:56 = 1
ENDIF
IF FLAG:現M == 6 && ARG == 12 && ARG:1 == 2 && ダンジョンフラグ:43:56 == 1
	ダンジョンフラグ:43:56 = 0
ENDIF
IF FLAG:現M == 6 && ARG == 16 && ARG:1 == 2 && ダンジョンフラグ:43:56 == 1
	ダンジョンフラグ:43:56 = 0
ENDIF
IF FLAG:現M == 6 && ARG == 11 && ARG:1 == 1
	IF ダンジョンフラグ:43:56 == 0
		PRINTW The door is shut
		CLEARLINE 1
		RETURN 0
	ELSEIF ダンジョンフラグ:43:56 == 1
		ダンジョンフラグ:43:56 = 0
		RETURN 1
	ENDIF
ENDIF
IF FLAG:現M == 6 && ARG == 17 && ARG:1 == 1
	IF ダンジョンフラグ:43:56 == 0
		PRINTW The door is shut
		CLEARLINE 2
		RETURN 0
	ELSEIF ダンジョンフラグ:43:56 == 1
		ダンジョンフラグ:43:56 = 0
		RETURN 1
	ENDIF
ENDIF


IF FLAG:現M == 7 && ARG == 16 && ARG:1 == 5 && ダンジョンフラグ:43:57 == 0
	ダンジョンフラグ:43:57 = 1
ENDIF
IF FLAG:現M == 7 && ARG == 16 && ARG:1 == 4 && ダンジョンフラグ:43:57 == 1
	ダンジョンフラグ:43:57 = 0
ENDIF
IF FLAG:現M == 7 && ARG == 17 && ARG:1 == 5
	IF ダンジョンフラグ:43:57 == 0
		PRINTW The door is shut
		CLEARLINE 1
		RETURN 0
	ELSEIF ダンジョンフラグ:43:57 == 1
		ダンジョンフラグ:43:57 = 0
		RETURN 1
	ENDIF
ENDIF

IF FLAG:現M == 8 && ARG == 3 && ARG:1 == 7 && ダンジョンフラグ:43:59 == 0
	ダンジョンフラグ:43:59 = 1
ENDIF
IF FLAG:現M == 8 && ARG == 4 && ARG:1 == 7 && ダンジョンフラグ:43:59 == 1
	ダンジョンフラグ:43:59 = 0
ENDIF
IF FLAG:現M == 8 && ARG == 4 && ARG:1 == 8 && ダンジョンフラグ:43:59 == 1
	ダンジョンフラグ:43:59 = 0
ENDIF
IF FLAG:現M == 8 && ARG == 3 && ARG:1 == 6
	IF ダンジョンフラグ:43:59 == 0
		PRINTW The door is shut
		CLEARLINE 1
		RETURN 0
	ELSEIF ダンジョンフラグ:43:59 == 1
		ダンジョンフラグ:43:59 = 0
		RETURN 1
	ENDIF
ENDIF

IF FLAG:現M == 8 && ARG == 16 && ARG:1 == 1 && ダンジョンフラグ:43:60 == 0
	ダンジョンフラグ:43:60 = 1
ENDIF
IF FLAG:現M == 8 && ARG == 15 && ARG:1 == 1 && ダンジョンフラグ:43:60 == 1
	ダンジョンフラグ:43:60 = 0
ENDIF
IF FLAG:現M == 8 && ARG == 17 && ARG:1 == 1
	IF ダンジョンフラグ:43:60 == 0
		PRINTW The door is shut
		CLEARLINE 1
		RETURN 0
	ELSEIF ダンジョンフラグ:43:60 == 1
		ダンジョンフラグ:43:60 = 0
		RETURN 1
	ENDIF
ENDIF

IF FLAG:現M == 9 && ARG == 17 && ARG:1 == 13 && ダンジョンフラグ:43:61 == 0
	ダンジョンフラグ:43:61 = 1
ENDIF
IF FLAG:現M == 9 && ARG == 16 && ARG:1 == 13 && ダンジョンフラグ:43:61 == 1
	ダンジョンフラグ:43:61 = 0
ENDIF
IF FLAG:現M == 9 && ARG == 18 && ARG:1 == 13
	IF ダンジョンフラグ:43:61 == 0
		PRINTW The door is shut
		CLEARLINE 1
		RETURN 0
	ELSEIF ダンジョンフラグ:43:61 == 1
		ダンジョンフラグ:43:61 = 0
		RETURN 1
	ENDIF
ENDIF


IF FLAG:現M == 13 && ARG == 6 && ARG:1 == 7 && ダンジョンフラグ:43:62 == 0
	ダンジョンフラグ:43:62 = 1
ENDIF
IF FLAG:現M == 13 && ARG == 5 && ARG:1 == 7 && ダンジョンフラグ:43:62 == 1
	ダンジョンフラグ:43:62 = 0
ENDIF
IF FLAG:現M == 13 && ARG == 6 && ARG:1 == 8 && ダンジョンフラグ:43:62 == 1
	ダンジョンフラグ:43:62 = 0
ENDIF
IF FLAG:現M == 13 && ARG == 6 && ARG:1 == 6
	IF ダンジョンフラグ:43:62 == 0
		PRINTW The door is shut
		CLEARLINE 1
		RETURN 0
	ELSEIF ダンジョンフラグ:43:62 == 1
		ダンジョンフラグ:43:62 = 0
		RETURN 1
	ENDIF
ENDIF

IF FLAG:現M == 14 && ARG == 14 && ARG:1 == 10 && ダンジョンフラグ:43:63 == 0
	ダンジョンフラグ:43:63 = 1
ENDIF
IF FLAG:現M == 14 && ARG == 14 && ARG:1 == 8 && ダンジョンフラグ:43:63 == 1
	ダンジョンフラグ:43:63 = 0
ENDIF
IF FLAG:現M == 14 && ARG == 14 && ARG:1 == 9
	IF ダンジョンフラグ:43:63 == 0
		PRINTW The door is shut
		CLEARLINE 1
		RETURN 0
	ELSEIF ダンジョンフラグ:43:63 == 1
		ダンジョンフラグ:43:63 = 0
		RETURN 1
	ENDIF
ENDIF


IF FLAG:現M == 14 && ARG == 3 && ARG:1 == 5 && ダンジョンフラグ:43:64 == 0
	ダンジョンフラグ:43:64 = 1
ENDIF
IF FLAG:現M == 14 && ARG == 3 && ARG:1 == 6 && ダンジョンフラグ:43:64 == 1
	ダンジョンフラグ:43:64 = 0
ENDIF
IF FLAG:現M == 14 && ARG == 2 && ARG:1 == 5
	IF ダンジョンフラグ:43:64 == 0
		PRINTW The door is shut
		CLEARLINE 1
		RETURN 0
	ELSEIF ダンジョンフラグ:43:64 == 1
		ダンジョンフラグ:43:64 = 0
		RETURN 1
	ENDIF
ENDIF

IF FLAG:現M == 14 && ARG == 1 && ARG:1 == 7 && ダンジョンフラグ:43:65 == 0
	ダンジョンフラグ:43:65 = 1
ENDIF
IF FLAG:現M == 14 && ARG == 1 && ARG:1 == 6 && ダンジョンフラグ:43:65 == 1
	ダンジョンフラグ:43:65 = 0
ENDIF
IF FLAG:現M == 14 && ARG == 2 && ARG:1 == 7
	IF ダンジョンフラグ:43:65 == 0
		PRINTW The door is shut
		CLEARLINE 1
		RETURN 0
	ELSEIF ダンジョンフラグ:43:65 == 1
		ダンジョンフラグ:43:65 = 0
		RETURN 1
	ENDIF
ENDIF


IF FLAG:現M == 14 && ARG == 6 && ARG:1 == 8 && ダンジョンフラグ:43:66 == 0
	ダンジョンフラグ:43:66 = 1
ENDIF
IF FLAG:現M == 14 && ARG == 6 && ARG:1 == 9 && ダンジョンフラグ:43:66 == 1
	ダンジョンフラグ:43:66 = 0
ENDIF
IF FLAG:現M == 14 && ARG == 5 && ARG:1 == 8
	IF ダンジョンフラグ:43:66 == 0
		PRINTW The door is shut
		CLEARLINE 1
		RETURN 0
	ELSEIF ダンジョンフラグ:43:66 == 1
		ダンジョンフラグ:43:66 = 0
		RETURN 1
	ENDIF
ENDIF

IF FLAG:現M == 14 && ARG == 4 && ARG:1 == 10 && ダンジョンフラグ:43:67 == 0
	ダンジョンフラグ:43:67 = 1
ENDIF
IF FLAG:現M == 14 && ARG == 4 && ARG:1 == 9 && ダンジョンフラグ:43:67 == 1
	ダンジョンフラグ:43:67 = 0
ENDIF
IF FLAG:現M == 14 && ARG == 5 && ARG:1 == 10
	IF ダンジョンフラグ:43:67 == 0
		PRINTW The door is shut
		CLEARLINE 1
		RETURN 0
	ELSEIF ダンジョンフラグ:43:67 == 1
		ダンジョンフラグ:43:67 = 0
		RETURN 1
	ENDIF
ENDIF

CALL CAN_ENTER,ARG,ARG:1
RETURN RESULT

;=======================================================================
;フロアデータ
;=======================================================================
@MAKE_FLOOR_43
SELECTCASE FLAG:現M
	CASE 0
		;PRINTL ３Ｆ北西
		FLAG:最大X = 20 
		FLAG:最大Y = 15 
							    ;01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"                    "
		CALL MAKE_FLOOR_LINE, 1," 1 11121111211111119"
		CALL MAKE_FLOOR_LINE, 2," 2 2 1 1            "
		CALL MAKE_FLOOR_LINE, 3," 111 2 1            "
		CALL MAKE_FLOOR_LINE, 4," 2 1 7 1            "
		CALL MAKE_FLOOR_LINE, 5," 1 1   1            "
		CALL MAKE_FLOOR_LINE, 6," 1 11111            "
		CALL MAKE_FLOOR_LINE, 7," 1                  "
		CALL MAKE_FLOOR_LINE, 8," 2                  "
		CALL MAKE_FLOOR_LINE, 9," 1                  "
		CALL MAKE_FLOOR_LINE,10," 1                  "
		CALL MAKE_FLOOR_LINE,11," 1                  "
		CALL MAKE_FLOOR_LINE,12," 1                  "
		CALL MAKE_FLOOR_LINE,13," 1                  "
		CALL MAKE_FLOOR_LINE,14," 9                  "

	CASE 1
		;PRINTL ３Ｆ南西
		FLAG:最大X = 20 
		FLAG:最大Y = 15
							    ;01234567890123456789
		CALL MAKE_FLOOR_LINE, 0," 9                  "
		CALL MAKE_FLOOR_LINE, 1," 1                  "
		CALL MAKE_FLOOR_LINE, 2," 1                  "
		CALL MAKE_FLOOR_LINE, 3," 1                  "
		CALL MAKE_FLOOR_LINE, 4," 1                  "
		CALL MAKE_FLOOR_LINE, 5," 1                  "
		CALL MAKE_FLOOR_LINE, 6," 2   1219           "
		CALL MAKE_FLOOR_LINE, 7," 1     2            "
		CALL MAKE_FLOOR_LINE, 8," 129   1            "
		CALL MAKE_FLOOR_LINE, 9," 1   7              "
		CALL MAKE_FLOOR_LINE,10," 2 1 2              "
		CALL MAKE_FLOOR_LINE,11," 11111 9            "
		CALL MAKE_FLOOR_LINE,12," 2 1   2            "
		CALL MAKE_FLOOR_LINE,13," 9 1 921211111111129"
		CALL MAKE_FLOOR_LINE,14,"                    "

		CALL SET_TILE,5,6,ダンジョンフラグ:43:19,0,3
		CALL SET_TILE,7,8,ダンジョンフラグ:43:20,0,3


	CASE 2
		;PRINTL ３Ｆ北東
		FLAG:最大X = 20 
		FLAG:最大Y = 15 
								;01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"                    "
		CALL MAKE_FLOOR_LINE, 1,"9111111111121 121 8 "
		CALL MAKE_FLOOR_LINE, 2,"            2 1 1 2 "
		CALL MAKE_FLOOR_LINE, 3,"            121 1 1 "
		CALL MAKE_FLOOR_LINE, 4,"            1 2 1 2 "
		CALL MAKE_FLOOR_LINE, 5,"            1 7 1 1 "
		CALL MAKE_FLOOR_LINE, 6,"            1   1 1 "
		CALL MAKE_FLOOR_LINE, 7,"            1   2 1 "
		CALL MAKE_FLOOR_LINE, 8,"            1111121 "
		CALL MAKE_FLOOR_LINE, 9,"                  2 "
		CALL MAKE_FLOOR_LINE,10,"                  1 "
		CALL MAKE_FLOOR_LINE,11,"                  1 "
		CALL MAKE_FLOOR_LINE,12,"                  1 "
		CALL MAKE_FLOOR_LINE,13,"                  1 "
		CALL MAKE_FLOOR_LINE,14,"                  9 "

	CASE 3
		;PRINTL ３Ｆ南東
		FLAG:最大X = 20
		FLAG:最大Y = 15 
								;01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"                  9 "
		CALL MAKE_FLOOR_LINE, 1,"                  1 "
		CALL MAKE_FLOOR_LINE, 2,"                  1 "
		CALL MAKE_FLOOR_LINE, 3,"                  1 "
		CALL MAKE_FLOOR_LINE, 4,"                  2 "
		CALL MAKE_FLOOR_LINE, 5,"                  1 "
		CALL MAKE_FLOOR_LINE, 6,"                  1 "
		CALL MAKE_FLOOR_LINE, 7,"           1129  11 "
		CALL MAKE_FLOOR_LINE, 8,"           1     1  "
		CALL MAKE_FLOOR_LINE, 9,"           1  7 11  "
		CALL MAKE_FLOOR_LINE,10,"           1  2 1   "
		CALL MAKE_FLOOR_LINE,11,"           1 111129 "
		CALL MAKE_FLOOR_LINE,12,"              2     "
		CALL MAKE_FLOOR_LINE,13,"9111111111121111111 "
		CALL MAKE_FLOOR_LINE,14,"                    "

	CASE 4
		;PRINTL ２Ｆ北西
		FLAG:最大X = 20 
		FLAG:最大Y = 15 
								;01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"                    "
		CALL MAKE_FLOOR_LINE, 1,"  1 111 11111111 129"
		CALL MAKE_FLOOR_LINE, 2,"  2 1   2      1 1  "
		CALL MAKE_FLOOR_LINE, 3,"  111211121127 121  "
		CALL MAKE_FLOOR_LINE, 4,"  1     1           "
		CALL MAKE_FLOOR_LINE, 5,"        1           "
		CALL MAKE_FLOOR_LINE, 6,"    1 6 1           "
		CALL MAKE_FLOOR_LINE, 7,"    1 2 1           "
		CALL MAKE_FLOOR_LINE, 8," 11211111           "
		CALL MAKE_FLOOR_LINE, 9," 1                  "
		CALL MAKE_FLOOR_LINE,10," 1 7                "
		CALL MAKE_FLOOR_LINE,11," 1 1                "
		CALL MAKE_FLOOR_LINE,12," 1 2                "
		CALL MAKE_FLOOR_LINE,13," 1 1                "
		CALL MAKE_FLOOR_LINE,14," 9 9                "

	CASE 5
		;PRINTL ２Ｆ南西
		FLAG:最大X = 20 
		FLAG:最大Y = 15 
								;01234567890123456789
		CALL MAKE_FLOOR_LINE, 0," 9 9                "
		CALL MAKE_FLOOR_LINE, 1," 1 1                "
		CALL MAKE_FLOOR_LINE, 2," 1 2                "
		CALL MAKE_FLOOR_LINE, 3," 121                "
		CALL MAKE_FLOOR_LINE, 4," 1 1                "
		CALL MAKE_FLOOR_LINE, 5," 1 1                "
		CALL MAKE_FLOOR_LINE, 6," 2 2                "
		CALL MAKE_FLOOR_LINE, 7," 9 11111            "
		CALL MAKE_FLOOR_LINE, 8,"   1 2 1            "
		CALL MAKE_FLOOR_LINE, 9," 7 1 6 1            "
		CALL MAKE_FLOOR_LINE,10," 2 2   1            "
		CALL MAKE_FLOOR_LINE,11," 1112111211111121129"
		CALL MAKE_FLOOR_LINE,12," 11           2     "
		CALL MAKE_FLOOR_LINE,13," 1127 92111111111119"
		CALL MAKE_FLOOR_LINE,14,"                    "

	CASE 6
		;PRINTL ２Ｆ北東
		FLAG:最大X = 20 
		FLAG:最大Y = 15 
								;01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"                    "
		CALL MAKE_FLOOR_LINE, 1,"9 12111111121212121 "
		CALL MAKE_FLOOR_LINE, 2,"121         1 2 1 1 "
		CALL MAKE_FLOOR_LINE, 3,"            1 9 1 1 "
		CALL MAKE_FLOOR_LINE, 4,"            1   1 1 "
		CALL MAKE_FLOOR_LINE, 5,"            1 6 1 1 "
		CALL MAKE_FLOOR_LINE, 6,"            1 2 1 1 "
		CALL MAKE_FLOOR_LINE, 7,"            12121 1 "
		CALL MAKE_FLOOR_LINE, 8,"                  1 "
		CALL MAKE_FLOOR_LINE, 9,"                111 "
		CALL MAKE_FLOOR_LINE,10,"                2   "
		CALL MAKE_FLOOR_LINE,11,"                1 7 "
		CALL MAKE_FLOOR_LINE,12,"                1 2 "
		CALL MAKE_FLOOR_LINE,13,"                121 "
		CALL MAKE_FLOOR_LINE,14,"                  9 "

	CASE 7
		;PRINTL ２Ｆ南東
		FLAG:最大X = 20 
		FLAG:最大Y = 15 
								;01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"                  9 "
		CALL MAKE_FLOOR_LINE, 1,"                7 2 "
		CALL MAKE_FLOOR_LINE, 2,"                2 1 "
		CALL MAKE_FLOOR_LINE, 3,"                1 1 "
		CALL MAKE_FLOOR_LINE, 4,"                1 1 "
		CALL MAKE_FLOOR_LINE, 5,"                121 "
		CALL MAKE_FLOOR_LINE, 6,"                1 1 "
		CALL MAKE_FLOOR_LINE, 7,"           1111 1 1 "
		CALL MAKE_FLOOR_LINE, 8,"           1  2 1 1 "
		CALL MAKE_FLOOR_LINE, 9,"           1  6   1 "
		CALL MAKE_FLOOR_LINE,10,"           1    121 "
		CALL MAKE_FLOOR_LINE,11,"91111127   111111   "
		CALL MAKE_FLOOR_LINE,12,"                  1 "
		CALL MAKE_FLOOR_LINE,13,"9111111111111111111 "
		CALL MAKE_FLOOR_LINE,14,"                    "
		
	CASE 8
		;PRINTL １Ｆ北西
		FLAG:最大X = 20 
		FLAG:最大Y = 15 
								;01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"                    "
		CALL MAKE_FLOOR_LINE, 1," 111211  921 1211219"
		CALL MAKE_FLOOR_LINE, 2," 2   1     1 2      "
		CALL MAKE_FLOOR_LINE, 3," 9 11111 11111      "
		CALL MAKE_FLOOR_LINE, 4,"     1     1        "
		CALL MAKE_FLOOR_LINE, 5," 12121 9212121111129"
		CALL MAKE_FLOOR_LINE, 6," 1 2                "
		CALL MAKE_FLOOR_LINE, 7," 1 11121            "
		CALL MAKE_FLOOR_LINE, 8," 1 2 1              "
		CALL MAKE_FLOOR_LINE, 9," 2 6 1              "
		CALL MAKE_FLOOR_LINE,10," 1   1              "
		CALL MAKE_FLOOR_LINE,11," 111 1              "
		CALL MAKE_FLOOR_LINE,12,"   1 1              "
		CALL MAKE_FLOOR_LINE,13," 1 1 1              "
		CALL MAKE_FLOOR_LINE,14," 9 9 9              "

		CALL SET_TILE,1,13,ダンジョンフラグ:43:22,0,3

	CASE 9
		;PRINTL １Ｆ南西
		FLAG:最大X = 20 
		FLAG:最大Y = 15 
								;01234567890123456789
		CALL MAKE_FLOOR_LINE, 0," 9 9 9              "
		CALL MAKE_FLOOR_LINE, 1," 11121              "
		CALL MAKE_FLOOR_LINE, 2," 2   1              "
		CALL MAKE_FLOOR_LINE, 3," 1 921              "
		CALL MAKE_FLOOR_LINE, 4,"                    "
		CALL MAKE_FLOOR_LINE, 5," 11111              "
		CALL MAKE_FLOOR_LINE, 6," 2 2 1              "
		CALL MAKE_FLOOR_LINE, 7," 1 1 1 121      121 "
		CALL MAKE_FLOOR_LINE, 8," 2   1   1      1 2 "
		CALL MAKE_FLOOR_LINE, 9," 6   11111 121  1 7 "
		CALL MAKE_FLOOR_LINE,10,"     2     1    2   "
		CALL MAKE_FLOOR_LINE,11," 1211111111121121   "
		CALL MAKE_FLOOR_LINE,12," 2              2   "
		CALL MAKE_FLOOR_LINE,13," 121 621111111111129"
		CALL MAKE_FLOOR_LINE,14,"                    "

		CALL SET_TILE,13,9,ダンジョンフラグ:43:23,0,3

	CASE 10
		;PRINTL １Ｆ北東
		FLAG:最大X = 20 
		FLAG:最大Y = 15 
								;01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"                    "
		CALL MAKE_FLOOR_LINE, 1,"9112111111111 12121 "
		CALL MAKE_FLOOR_LINE, 2,"    1 2     2     1 "
		CALL MAKE_FLOOR_LINE, 3,"  621 1 121 11111 1 "
		CALL MAKE_FLOOR_LINE, 4,"          1     2 2 "
		CALL MAKE_FLOOR_LINE, 5,"911111211112111 1 6 "
		CALL MAKE_FLOOR_LINE, 6,"              1 1   "
		CALL MAKE_FLOOR_LINE, 7,"            121 111 "
		CALL MAKE_FLOOR_LINE, 8,"              1   1 "
		CALL MAKE_FLOOR_LINE, 9,"              111 1 "
		CALL MAKE_FLOOR_LINE,10,"              2 2 1 "
		CALL MAKE_FLOOR_LINE,11,"              1 6 1 "
		CALL MAKE_FLOOR_LINE,12,"                  1 "
		CALL MAKE_FLOOR_LINE,13,"              11121 "
		CALL MAKE_FLOOR_LINE,14,"              9     "

		CALL SET_TILE,8,3,ダンジョンフラグ:43:21,0,3

	CASE 11
		;PRINTL １Ｆ南東
		FLAG:最大X = 20 
		FLAG:最大Y = 15 
								;01234567890123456789
		CALL MAKE_FLOOR_LINE, 0,"              9     "
		CALL MAKE_FLOOR_LINE, 1,"              12111 "
		CALL MAKE_FLOOR_LINE, 2,"                  1 "
		CALL MAKE_FLOOR_LINE, 3,"              11121 "
		CALL MAKE_FLOOR_LINE, 4,"              2 2 1 "
		CALL MAKE_FLOOR_LINE, 5,"              1 1 1 "
		CALL MAKE_FLOOR_LINE, 6,"             11 2   "
		CALL MAKE_FLOOR_LINE, 7,"         12111  111 "
		CALL MAKE_FLOOR_LINE, 8,"       111        2 "
		CALL MAKE_FLOOR_LINE, 9,"  1  121      11111 "
		CALL MAKE_FLOOR_LINE,10,"  2           1     "
		CALL MAKE_FLOOR_LINE,11,"  121  62111  2 1 1 "
		CALL MAKE_FLOOR_LINE,12,"  1 1      2  1 2 2 "
		CALL MAKE_FLOOR_LINE,13,"911 111111211212111 "
		CALL MAKE_FLOOR_LINE,14,"                    "

		CALL SET_TILE,5,9,ダンジョンフラグ:43:25,0,3
		CALL SET_TILE,18,11,ダンジョンフラグ:43:24,0,3
		
	CASE 12
		;PRINTL 地下１Ｆ
		FLAG:最大X = 18 
		FLAG:最大Y = 18 
								;012345678901234567
		CALL MAKE_FLOOR_LINE, 0,"                  "
		CALL MAKE_FLOOR_LINE, 1,"  11111111111111  "
		CALL MAKE_FLOOR_LINE, 2,"  2    1       2  "
		CALL MAKE_FLOOR_LINE, 3," 1126  1 11 62111 "
		CALL MAKE_FLOOR_LINE, 4," 1     1 2      1 "
		CALL MAKE_FLOOR_LINE, 5," 1 1 1 11111111 1 "
		CALL MAKE_FLOOR_LINE, 6," 1 2 2 2      2 1 "
		CALL MAKE_FLOOR_LINE, 7," 1 11111 121111 1 "
		CALL MAKE_FLOOR_LINE, 8," 1 1111    1111 1 "
		CALL MAKE_FLOOR_LINE, 9," 1 111121 11111 1 "
		CALL MAKE_FLOOR_LINE,10," 1 2      2 2 2 1 "
		CALL MAKE_FLOOR_LINE,11," 1 11111111 1 1 1 "
		CALL MAKE_FLOOR_LINE,12," 1     1        1 "
		CALL MAKE_FLOOR_LINE,13," 11    1   612111 "
		CALL MAKE_FLOOR_LINE,14,"  1126 1 6     1  "
		CALL MAKE_FLOOR_LINE,15,"   1   1 2   121  "
		CALL MAKE_FLOOR_LINE,16,"   121 12121   1  "
		CALL MAKE_FLOOR_LINE,17,"                  "

	CASE 13
		;PRINTL １Ｆ中央
		FLAG:最大X = 18 
		FLAG:最大Y = 18 
								;012345678901234567
		CALL MAKE_FLOOR_LINE, 0,"                  "
		CALL MAKE_FLOOR_LINE, 1,"  11111111121 1   "
		CALL MAKE_FLOOR_LINE, 2,"  1           2   "
		CALL MAKE_FLOOR_LINE, 3," 11 721   127 121 "
		CALL MAKE_FLOOR_LINE, 4," 1    1   1     1 "
		CALL MAKE_FLOOR_LINE, 5," 121111   1 12111 "
		CALL MAKE_FLOOR_LINE, 6,"      2   1 1 1   "
		CALL MAKE_FLOOR_LINE, 7," 11111111 1 1 1 6 "
		CALL MAKE_FLOOR_LINE, 8," 2    1   1 1 1 2 "
		CALL MAKE_FLOOR_LINE, 9," 6    12111 1 111 "
		CALL MAKE_FLOOR_LINE,10,"            1   1 "
		CALL MAKE_FLOOR_LINE,11," 12111111111121 1 "
		CALL MAKE_FLOOR_LINE,12," 1            1 2 "
		CALL MAKE_FLOOR_LINE,13," 11 721   127 1 1 "
		CALL MAKE_FLOOR_LINE,14,"  1   1   1   1 2 "
		CALL MAKE_FLOOR_LINE,15,"  1   1   1   1 1 "
		CALL MAKE_FLOOR_LINE,16,"  11111   11111   "
		CALL MAKE_FLOOR_LINE,17,"                  "
	
	CASE 14
		;PRINTL ２Ｆ中央
		FLAG:最大X = 18 
		FLAG:最大Y = 18 
								;012345678901234567
		CALL MAKE_FLOOR_LINE, 0,"                  "
		CALL MAKE_FLOOR_LINE, 1,"   1111111111111  "
		CALL MAKE_FLOOR_LINE, 2,"  11    1   1     "
		CALL MAKE_FLOOR_LINE, 3," 11     2 1 1 111 "
		CALL MAKE_FLOOR_LINE, 4," 1      111 1 2 1 "
		CALL MAKE_FLOOR_LINE, 5," 121      2 1 1 2 "
		CALL MAKE_FLOOR_LINE, 6," 1 1    111 1 1 7 "
		CALL MAKE_FLOOR_LINE, 7," 121    2   1 1   "
		CALL MAKE_FLOOR_LINE, 8,"   1121 111 1 111 "
		CALL MAKE_FLOOR_LINE, 9," 7  1 1   2 2 2 2 "
		CALL MAKE_FLOOR_LINE,10," 1  121 111 111 1 "
		CALL MAKE_FLOOR_LINE,11," 1    1 2   1   1 "
		CALL MAKE_FLOOR_LINE,12," 1    1 111 1   1 "
		CALL MAKE_FLOOR_LINE,13," 1    1   2 1   1 "
		CALL MAKE_FLOOR_LINE,14," 11   1 111 1  11 "
		CALL MAKE_FLOOR_LINE,15,"  1   1 2   2  1  "
		CALL MAKE_FLOOR_LINE,16,"  11111 126 1111  "
		CALL MAKE_FLOOR_LINE,17,"                  "

		CALL SET_TILE,9,4,ダンジョンフラグ:43:26,0,3
		CALL SET_TILE,9,6,ダンジョンフラグ:43:27,0,3
		CALL SET_TILE,9,8,ダンジョンフラグ:43:28,0,3
		CALL SET_TILE,9,10,ダンジョンフラグ:43:29,0,3
		CALL SET_TILE,9,12,ダンジョンフラグ:43:30,0,3
		CALL SET_TILE,9,14,ダンジョンフラグ:43:31,0,3

		;イベントの設置
		CALL SET_TILE,8,2,ダンジョンフラグ:43:2,0,4

	CASE 15
		;PRINTL ３Ｆ中央
		FLAG:最大X = 9 
		FLAG:最大Y = 17
								;012345678
		CALL MAKE_FLOOR_LINE, 0,"         "
		CALL MAKE_FLOOR_LINE, 1," 111     "
		CALL MAKE_FLOOR_LINE, 2," 1 2     "
		CALL MAKE_FLOOR_LINE, 3," 1 6     "
		CALL MAKE_FLOOR_LINE, 4," 2       "
		CALL MAKE_FLOOR_LINE, 5," 1212121 "
		CALL MAKE_FLOOR_LINE, 6,"       2 "
								;012345678
		CALL MAKE_FLOOR_LINE, 7," 1212121 "
		CALL MAKE_FLOOR_LINE, 8," 2       "
		CALL MAKE_FLOOR_LINE, 9," 1212121 "
		CALL MAKE_FLOOR_LINE,10,"       2 "
		CALL MAKE_FLOOR_LINE,11," 1212121 "
		CALL MAKE_FLOOR_LINE,12," 1       "
		CALL MAKE_FLOOR_LINE,13," 1111111 "
		CALL MAKE_FLOOR_LINE,14,"       1 "
		CALL MAKE_FLOOR_LINE,15,"     721 "
		CALL MAKE_FLOOR_LINE,16,"         "

		CALL SET_TILE,3,5,ダンジョンフラグ:43:32,0,3
		CALL SET_TILE,5,5,ダンジョンフラグ:43:33,0,3
		CALL SET_TILE,3,7,ダンジョンフラグ:43:34,0,3
		CALL SET_TILE,5,7,ダンジョンフラグ:43:35,0,3
		CALL SET_TILE,3,9,ダンジョンフラグ:43:36,0,3
		CALL SET_TILE,5,9,ダンジョンフラグ:43:37,0,3
		CALL SET_TILE,3,11,ダンジョンフラグ:43:38,0,3
		CALL SET_TILE,5,11,ダンジョンフラグ:43:39,0,3

	CASE 16
		;PRINTL ４Ｆ
		FLAG:最大X = 9 
		FLAG:最大Y = 7
								;012345678
		CALL MAKE_FLOOR_LINE, 0,"         "
		CALL MAKE_FLOOR_LINE, 1," 1 7 111 "
		CALL MAKE_FLOOR_LINE, 2," 1 2 1   "
		CALL MAKE_FLOOR_LINE, 3," 1112121 "
		CALL MAKE_FLOOR_LINE, 4," 1   1   "
		CALL MAKE_FLOOR_LINE, 5," 121 111 "
		CALL MAKE_FLOOR_LINE, 6,"         "

		CALL SET_TILE,3,5,ダンジョンフラグ:43:40,0,3
		;イベントの設置
		CALL SET_TILE,7,3,ダンジョンフラグ:43:0,0,4

	CASEELSE
ENDSELECT

;=======================================================================
;[5]調べる　実行時のイベント
;=======================================================================
@EVENT_CHECK_DUNGEON_43

;==========
;出口の処理
;==========
IF DA:(FLAG:現X):(FLAG:現Y) == 8
	CALL DUNGEON_EXIT
	RETURN 1
;========
;宝の処理
;========
ELSEIF DA:(FLAG:現X):(FLAG:現Y) == 3
	CALL TREASURE_43
	RETURN 1

;=======
;階段
;=======
ELSEIF DA:(FLAG:現X):(FLAG:現Y) == 6
	SELECTCASE FLAG:現M
		;二階北西　昇6
		CASE 4
			SIF FLAG:現X == 6 && FLAG:現Y == 6
				CALL DUNGEON_UPSTAIRS,0,5,4
		;二階南西
		CASE 5
			SIF FLAG:現X == 5 && FLAG:現Y == 9
				CALL DUNGEON_UPSTAIRS,1,5,9
		;二階北東
		CASE 6
			SIF FLAG:現X == 14 && FLAG:現Y == 5
				CALL DUNGEON_UPSTAIRS,2,14,5
		;二階南東
		CASE 7
			SIF FLAG:現X == 14 && FLAG:現Y == 9
				CALL DUNGEON_UPSTAIRS,3,14,9
				
		;一階北西
		CASE 8
			SIF FLAG:現X == 3 && FLAG:現Y == 9
				CALL DUNGEON_UPSTAIRS,4,3,10
		;一階南西
		CASE 9
			SIF FLAG:現X == 1 && FLAG:現Y == 9
				CALL DUNGEON_UPSTAIRS,5,1,9
			SIF FLAG:現X == 5 && FLAG:現Y == 13
				CALL DUNGEON_UPSTAIRS,5,4,13
		;一階北東
		CASE 10
			SIF FLAG:現X == 18 && FLAG:現Y == 5
				CALL DUNGEON_UPSTAIRS,6,18,11
			SIF FLAG:現X == 16 && FLAG:現Y == 11
				CALL DUNGEON_UPSTAIRS,7,16,1
			SIF FLAG:現X == 2 && FLAG:現Y == 3
				CALL DUNGEON_UPSTAIRS,4,13,3


		;一階南東
		CASE 11
			SIF FLAG:現X == 7 && FLAG:現Y == 11
				CALL DUNGEON_UPSTAIRS,7,7,11

		;地下一階
		CASE 12
			SIF FLAG:現X == 9 && FLAG:現Y == 14
				CALL DUNGEON_DOWNSTAIRS,9,18,9
			SIF FLAG:現X == 4 && FLAG:現Y == 3
				CALL DUNGEON_UPSTAIRS,13,4,3
			SIF FLAG:現X == 12 && FLAG:現Y == 3
				CALL DUNGEON_UPSTAIRS,13,12,3
			SIF FLAG:現X == 5 && FLAG:現Y == 14
				CALL DUNGEON_UPSTAIRS,13,4,13
			SIF FLAG:現X == 12 && FLAG:現Y == 13
				CALL DUNGEON_UPSTAIRS,13,12,13

		;一階中央
		CASE 13
			SIF FLAG:現X == 1 && FLAG:現Y == 9
				CALL DUNGEON_UPSTAIRS,14,1,9
			SIF FLAG:現X == 16 && FLAG:現Y == 7
				CALL DUNGEON_UPSTAIRS,14,16,6

		;二階中央
		CASE 14
			SIF FLAG:現X == 10 && FLAG:現Y == 16
				CALL DUNGEON_UPSTAIRS,15,5,15
			

		;三階中央
		CASE 15
			SIF FLAG:現X == 3 && FLAG:現Y == 3
				CALL DUNGEON_UPSTAIRS,16,3,1

		CASEELSE
	ENDSELECT
RETURN 1

ELSEIF DA:(FLAG:現X):(FLAG:現Y) == 7
	SELECTCASE FLAG:現M
		;三階北西　降7
		CASE 0
			SIF FLAG:現X == 5 && FLAG:現Y == 4
				CALL DUNGEON_DOWNSTAIRS,4,6,6
		;三階南西　降7
		CASE 1
			SIF FLAG:現X == 5 && FLAG:現Y == 9
				CALL DUNGEON_DOWNSTAIRS,5,5,9
		;三階北東　降7
		CASE 2
			SIF FLAG:現X == 14 && FLAG:現Y == 5
				CALL DUNGEON_DOWNSTAIRS,6,14,5
		;三階南東　降7
		CASE 3
			SIF FLAG:現X == 14 && FLAG:現Y == 9
				CALL DUNGEON_DOWNSTAIRS,7,14,9

		;二階北西　降7
		CASE 4
			SIF FLAG:現X == 3 && FLAG:現Y == 10
				CALL DUNGEON_DOWNSTAIRS,8,3,9
			SIF FLAG:現X == 13 && FLAG:現Y == 3
				CALL DUNGEON_DOWNSTAIRS,10,2,3
		;二階南西　降7
		CASE 5
			SIF FLAG:現X == 1 && FLAG:現Y == 9
				CALL DUNGEON_DOWNSTAIRS,9,1,9
			SIF FLAG:現X == 4 && FLAG:現Y == 13
				CALL DUNGEON_DOWNSTAIRS,9,5,13
		;二階北東　降7
		CASE 6
			SIF FLAG:現X == 18 && FLAG:現Y == 11
				CALL DUNGEON_DOWNSTAIRS,10,18,5
		;二階南東　降7
		CASE 7
			SIF FLAG:現X == 16 && FLAG:現Y == 1
				CALL DUNGEON_DOWNSTAIRS,10,16,11
			SIF FLAG:現X == 7 && FLAG:現Y == 11
				CALL DUNGEON_DOWNSTAIRS,11,7,11


		;一階北西　降7
		CASE 8

		;一階南西　降7
		CASE 9
			SIF FLAG:現X == 18 && FLAG:現Y == 9
				CALL DUNGEON_DOWNSTAIRS,12,9,14
			SIF FLAG:現X == 3 && FLAG:現Y == 3
				CALL DUNGEON_TERMINAL
				RETURN 1

		;一階北東
		CASE 10
		;一階南東
		CASE 11

		;地下一階
		CASE 12

		;一階中央　降7
		CASE 13
			SIF FLAG:現X == 4 && FLAG:現Y == 3
				CALL DUNGEON_DOWNSTAIRS,12,4,3
			SIF FLAG:現X == 12 && FLAG:現Y == 3
				CALL DUNGEON_DOWNSTAIRS,12,12,3
			SIF FLAG:現X == 4 && FLAG:現Y == 13
				CALL DUNGEON_DOWNSTAIRS,12,5,14
			SIF FLAG:現X == 12 && FLAG:現Y == 13
				CALL DUNGEON_DOWNSTAIRS,12,11,13


		;二階中央
		CASE 14
			SIF FLAG:現X == 16 && FLAG:現Y == 6
				CALL DUNGEON_DOWNSTAIRS,13,16,7
			SIF FLAG:現X == 1 && FLAG:現Y == 9
				CALL DUNGEON_DOWNSTAIRS,13,1,9
		
		;三階中央
		CASE 15
			SIF FLAG:現X == 5 && FLAG:現Y == 15
				CALL DUNGEON_DOWNSTAIRS,14,10,16
		;四階
		CASE 16
			SIF FLAG:現X == 3 && FLAG:現Y == 1
				CALL DUNGEON_DOWNSTAIRS,15,3,3
		CASEELSE

	ENDSELECT
	RETURN 1
	
ELSE
	PRINTW Nothing seems to be here.
	RETURN 0
ENDIF

;=======================================================================
;タイル進入時のイベント
;=======================================================================
@EVENT_ENTER_DUNGEON_43,ARG
;ARG = 進入時の向き　0の場合ワープなど
;==========
;出口の処理
;==========
IF DA:(FLAG:現X):(FLAG:現Y) == 8
	CALL DUNGEON_EXIT
	RETURN 1
;========
;宝の処理
;========
ELSEIF DA:(FLAG:現X):(FLAG:現Y) == 3
	CALL TREASURE_43
	RETURN 1
;=======
;階段
;=======
ELSEIF DA:(FLAG:現X):(FLAG:現Y) == 6
	SELECTCASE FLAG:現M
		;二階北西　昇6
		CASE 4
			SIF FLAG:現X == 6 && FLAG:現Y == 6
				CALL DUNGEON_UPSTAIRS,0,5,4
		;二階南西
		CASE 5
			SIF FLAG:現X == 5 && FLAG:現Y == 9
				CALL DUNGEON_UPSTAIRS,1,5,9
		;二階北東
		CASE 6
			SIF FLAG:現X == 14 && FLAG:現Y == 5
				CALL DUNGEON_UPSTAIRS,2,14,5
		;二階南東
		CASE 7
			SIF FLAG:現X == 14 && FLAG:現Y == 9
				CALL DUNGEON_UPSTAIRS,3,14,9
		CASE 3
			SIF FLAG:現X == 14 && FLAG:現Y == 9
				CALL DUNGEON_DOWNSTAIRS,7,15,9

				
		;一階北西
		CASE 8
			SIF FLAG:現X == 3 && FLAG:現Y == 9
				CALL DUNGEON_UPSTAIRS,4,3,10
		;一階南西
		CASE 9
			SIF FLAG:現X == 1 && FLAG:現Y == 9
				CALL DUNGEON_UPSTAIRS,5,1,9
			SIF FLAG:現X == 5 && FLAG:現Y == 13
				CALL DUNGEON_UPSTAIRS,5,4,13
		;一階北東
		CASE 10
			SIF FLAG:現X == 18 && FLAG:現Y == 5
				CALL DUNGEON_UPSTAIRS,6,18,11
			SIF FLAG:現X == 16 && FLAG:現Y == 11
				CALL DUNGEON_UPSTAIRS,7,16,1
			SIF FLAG:現X == 2 && FLAG:現Y == 3
				CALL DUNGEON_UPSTAIRS,4,13,3

		;一階南東
		CASE 11
			SIF FLAG:現X == 7 && FLAG:現Y == 11
				CALL DUNGEON_UPSTAIRS,7,7,11

		;地下一階
		CASE 12
			SIF FLAG:現X == 4 && FLAG:現Y == 3
				CALL DUNGEON_UPSTAIRS,13,4,3
			SIF FLAG:現X == 12 && FLAG:現Y == 3
				CALL DUNGEON_UPSTAIRS,13,12,3
			SIF FLAG:現X == 5 && FLAG:現Y == 14
				CALL DUNGEON_UPSTAIRS,13,4,13
			SIF FLAG:現X == 11 && FLAG:現Y == 13
				CALL DUNGEON_UPSTAIRS,13,12,13
			SIF FLAG:現X == 9 && FLAG:現Y == 14
				CALL DUNGEON_UPSTAIRS,9,18,9

		;一階中央
		CASE 13
			SIF FLAG:現X == 1 && FLAG:現Y == 9
				CALL DUNGEON_UPSTAIRS,14,1,9
			SIF FLAG:現X == 16 && FLAG:現Y == 7
				CALL DUNGEON_UPSTAIRS,14,16,6

		;二階中央
		CASE 14
			SIF FLAG:現X == 10 && FLAG:現Y == 16
				CALL DUNGEON_UPSTAIRS,15,5,15
			

		;三階中央
		CASE 15
			SIF FLAG:現X == 3 && FLAG:現Y == 3
				CALL DUNGEON_UPSTAIRS,16,3,1

		CASEELSE
	ENDSELECT
	RETURN 1

ELSEIF DA:(FLAG:現X):(FLAG:現Y) == 7
	SELECTCASE FLAG:現M
		;三階北西　降7
		CASE 0
			SIF FLAG:現X == 5 && FLAG:現Y == 4
				CALL DUNGEON_DOWNSTAIRS,4,6,6
		;三階南西　降7
		CASE 1
			SIF FLAG:現X == 5 && FLAG:現Y == 9
				CALL DUNGEON_DOWNSTAIRS,5,5,9
		;三階北東　降7
		CASE 2
			SIF FLAG:現X == 14 && FLAG:現Y == 5
				CALL DUNGEON_DOWNSTAIRS,6,14,5
		;三階南東　降7
		CASE 3
			SIF FLAG:現X == 14 && FLAG:現Y == 9
				CALL DUNGEON_DOWNSTAIRS,7,14,9

		;二階北西　降7
		CASE 4
			SIF FLAG:現X == 3 && FLAG:現Y == 10
				CALL DUNGEON_DOWNSTAIRS,8,3,9
			SIF FLAG:現X == 13 && FLAG:現Y == 3
				CALL DUNGEON_DOWNSTAIRS,10,2,3
		;二階南西　降7
		CASE 5
			SIF FLAG:現X == 1 && FLAG:現Y == 9
				CALL DUNGEON_DOWNSTAIRS,9,1,9
			SIF FLAG:現X == 4 && FLAG:現Y == 13
				CALL DUNGEON_DOWNSTAIRS,9,5,13
		;二階北東　降7
		CASE 6
			SIF FLAG:現X == 18 && FLAG:現Y == 11
				CALL DUNGEON_DOWNSTAIRS,10,18,5
		;二階南東　降7
		CASE 7
			SIF FLAG:現X == 16 && FLAG:現Y == 1
				CALL DUNGEON_DOWNSTAIRS,10,16,11
			SIF FLAG:現X == 7 && FLAG:現Y == 11
				CALL DUNGEON_DOWNSTAIRS,11,7,11


		;一階北西　降7
		CASE 8

		;一階南西　降7
		CASE 9
			SIF FLAG:現X == 18 && FLAG:現Y == 9
				CALL DUNGEON_DOWNSTAIRS,12,9,14

		;一階北東
		CASE 10
		;一階南東
		CASE 11

		;地下一階
		CASE 12

		;一階中央　降7
		CASE 13
			SIF FLAG:現X == 4 && FLAG:現Y == 3
				CALL DUNGEON_DOWNSTAIRS,12,4,3
			SIF FLAG:現X == 12 && FLAG:現Y == 3
				CALL DUNGEON_DOWNSTAIRS,12,12,3
			SIF FLAG:現X == 4 && FLAG:現Y == 13
				CALL DUNGEON_DOWNSTAIRS,12,5,14
			SIF FLAG:現X == 12 && FLAG:現Y == 13
				CALL DUNGEON_DOWNSTAIRS,12,11,13


		;二階中央
		CASE 14
			SIF FLAG:現X == 16 && FLAG:現Y == 6
				CALL DUNGEON_DOWNSTAIRS,13,16,7
			SIF FLAG:現X == 1 && FLAG:現Y == 9
				CALL DUNGEON_DOWNSTAIRS,13,1,9
		
		;三階中央
		CASE 15
			SIF FLAG:現X == 5 && FLAG:現Y == 15
				CALL DUNGEON_DOWNSTAIRS,14,10,16
		;四階
		CASE 16
			SIF FLAG:現X == 3 && FLAG:現Y == 1
				CALL DUNGEON_DOWNSTAIRS,15,3,3
		CASEELSE

	ENDSELECT
	RETURN 1
	
;ワープ
ELSEIF DA:(FLAG:現X):(FLAG:現Y) == 9
	SELECTCASE FLAG:現M
		;三階北西
		CASE 0
			IF FLAG:現X == 19 && FLAG:現Y == 1
				CALL DUNGEON_WORP,2,1,1
			ELSEIF FLAG:現X == 1 && FLAG:現Y == 14
				CALL DUNGEON_WORP,1,1,1
			ENDIF

		;三階南西
		CASE 1
			IF FLAG:現X == 1 && FLAG:現Y == 0
				CALL DUNGEON_WORP,0,1,13
			ELSEIF FLAG:現X == 19 && FLAG:現Y == 13
				CALL DUNGEON_WORP,3,1,13
			;三階北東へ
			ELSEIF FLAG:現X == 3 && FLAG:現Y == 8
				CALL DUNGEON_WORP,2,2,1
			;宝箱
			ELSEIF FLAG:現X == 1 && FLAG:現Y == 13
				CALL DUNGEON_WORP,1,7,6
			ELSEIF FLAG:現X == 8 && FLAG:現Y == 6
				CALL DUNGEON_WORP,1,1,11
			;三階北東通路へ
			ELSEIF FLAG:現X == 7 && FLAG:現Y == 11
				CALL DUNGEON_WORP,2,18,13
			;三階南東ダストシュートＡ前
			ELSEIF FLAG:現X == 5 && FLAG:現Y == 13
				CALL DUNGEON_WORP,3,12,11
			ENDIF

		;三階北東
		CASE 2
			IF FLAG:現X == 0 && FLAG:現Y == 1
				CALL DUNGEON_WORP,0,18,1
			ELSEIF FLAG:現X == 18 && FLAG:現Y == 14
				CALL DUNGEON_WORP,3,18,1
			ENDIF

		;三階南東
		CASE 3
			IF FLAG:現X == 18 && FLAG:現Y == 0
				CALL DUNGEON_WORP,2,18,13
			ELSEIF FLAG:現X == 0 && FLAG:現Y == 13
				CALL DUNGEON_WORP,1,17,13
			;三階南東ダストシュートＡ→二階南東
			ELSEIF FLAG:現X == 14 && FLAG:現Y == 7
				CALL DUNGEON_WORP,7,16,8
			;三階南東ダストシュートＢ→二階南東
			ELSEIF FLAG:現X == 18 && FLAG:現Y == 11
				CALL DUNGEON_WORP,7,18,12
			ENDIF

		;二階北西
		CASE 4
			IF FLAG:現X == 19 && FLAG:現Y == 1
				CALL DUNGEON_WORP,6,0,2
			ELSEIF FLAG:現X == 1 && FLAG:現Y == 14
				CALL DUNGEON_WORP,5,1,1
			ELSEIF FLAG:現X == 3 && FLAG:現Y == 14
				CALL DUNGEON_WORP,5,3,1
			ENDIF
	
		;二階南西
		CASE 5
			IF FLAG:現X == 1 && FLAG:現Y == 0
				CALL DUNGEON_WORP,4,1,13
			ELSEIF FLAG:現X == 3 && FLAG:現Y == 0
				CALL DUNGEON_WORP,4,3,13
			ELSEIF FLAG:現X == 19 && FLAG:現Y == 11
				CALL DUNGEON_WORP,7,1,11
			ELSEIF FLAG:現X == 19 && FLAG:現Y == 13
				CALL DUNGEON_WORP,7,1,13

			;三階北東ダストシュートＣ前
			ELSEIF FLAG:現X == 1 && FLAG:現Y == 7
				CALL DUNGEON_WORP,6,14,1
				ダンジョンフラグ:43:55 = 1
			;三階北東ダストシュートＣ前
			ELSEIF FLAG:現X == 6 && FLAG:現Y == 13
				CALL DUNGEON_WORP,6,14,1
				ダンジョンフラグ:43:55 = 1
			ENDIF
		;二階北東
		CASE 6
			IF FLAG:現X == 0 && FLAG:現Y == 1
				CALL DUNGEON_WORP,4,17,1
			ELSEIF FLAG:現X == 18 && FLAG:現Y == 14
				CALL DUNGEON_WORP,7,18,2
			;三階北東ダストシュートＣ→一階北東へ
			ELSEIF FLAG:現X == 14 && FLAG:現Y == 3
				CALL DUNGEON_WORP,10,14,3
			ENDIF
		;二階南東
		CASE 7
			IF FLAG:現X == 18 && FLAG:現Y == 0
				CALL DUNGEON_WORP,6,18,13
			ELSEIF FLAG:現X == 0 && FLAG:現Y == 11
				CALL DUNGEON_WORP,5,17,11
			ELSEIF FLAG:現X == 0 && FLAG:現Y == 13
				CALL DUNGEON_WORP,5,18,13
			ENDIF
			
		;一階北西
		CASE 8
			IF FLAG:現X == 19 && FLAG:現Y == 1
				CALL DUNGEON_WORP,10,1,1
			ELSEIF FLAG:現X == 19 && FLAG:現Y == 5
				CALL DUNGEON_WORP,10,1,5

			ELSEIF FLAG:現X == 1 && FLAG:現Y == 14
				CALL DUNGEON_WORP,9,1,1
			ELSEIF FLAG:現X == 3 && FLAG:現Y == 14
				CALL DUNGEON_WORP,9,3,1
			ELSEIF FLAG:現X == 5 && FLAG:現Y == 14
				CALL DUNGEON_WORP,9,5,1
				
			ELSEIF FLAG:現X == 9 && FLAG:現Y == 1
				CALL DUNGEON_WORP,8,1,1
			ELSEIF FLAG:現X == 1 && FLAG:現Y == 3
				CALL DUNGEON_WORP,8,11,1
			ELSEIF FLAG:現X == 7 && FLAG:現Y == 5
				CALL DUNGEON_WORP,10,14,11
			ENDIF

		;一階南西
		CASE 9
			IF FLAG:現X == 19 && FLAG:現Y == 13
				CALL DUNGEON_WORP,11,1,13
				
			ELSEIF FLAG:現X == 1 && FLAG:現Y == 0
				CALL DUNGEON_WORP,8,1,13
			ELSEIF FLAG:現X == 3 && FLAG:現Y == 0
				CALL DUNGEON_WORP,8,3,13
			ELSEIF FLAG:現X == 5 && FLAG:現Y == 0
				CALL DUNGEON_WORP,8,5,13
			ELSEIF FLAG:現X == 3 && FLAG:現Y == 3
				CALL DUNGEON_TERMINAL
				RETURN 1
			ENDIF
		;一階北東
		CASE 10
			IF FLAG:現X == 0 && FLAG:現Y == 1
				CALL DUNGEON_WORP,8,18,1
			ELSEIF FLAG:現X == 0 && FLAG:現Y == 5
				CALL DUNGEON_WORP,8,17,5

			ELSEIF FLAG:現X == 14 && FLAG:現Y == 14
				CALL DUNGEON_WORP,11,14,1
			ENDIF

		;一階南東
		CASE 11
			IF FLAG:現X == 14 && FLAG:現Y == 0
				CALL DUNGEON_WORP,10,14,13
			ELSEIF FLAG:現X == 0 && FLAG:現Y == 13
				CALL DUNGEON_WORP,9,17,13
			ENDIF
		CASEELSE
	ENDSELECT
RETURN 1


;==========
;扉の処理
;==========
ELSEIF DA:(FLAG:現X):(FLAG:現Y) == 2
	CALL DUNGEON_DOOR,ARG
	RETURN 1
RETURN 0


;========================
;イベント
;========================
ELSEIF DA:(FLAG:現X):(FLAG:現Y) == 4

	IF ダンジョンフラグ:43:2 == 0 && FLAG:現M == 14
		PRINTFORMW Many tori line the place......

	ELSEIF ダンジョンフラグ:43:0 == 0 && FLAG:現M == 16
		CUSTOMDRAWLINE =
		PRINTL Passing through the torii, you climbed the hill.
		FLAG:逃走不可フラグ = 1
		FLAG:会話不能フラグ = 1
		FLAG:先制不意打ちキャンセル = 1
		IF ダンジョンフラグ:43:1 == 0
			PRINTL A fox awaited you.
			PRINTL 「I can't draw any power from people like you with no greed yip.」
			PRINTL 「I can't use my powers......」
			PRINTL The two-tailed fox attacked.
			PRINTW Beast Che Fei attacked!
			CALL SET_ENEMY,9,[[キャラ:チェフェイ(二尾)]],20,0,1
			;CSTR:(CHARANUM-1):思考パターン = 810
			ABL:(CHARANUM-1):アイテム1 = 5051
			ABL:(CHARANUM-1):入手確率1 = 100
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
		ELSEIF ダンジョンフラグ:43:1 >= 9
			PRINTL Scattering abominable poison, a huge nine-tailed fox stood.
			PRINTL There was a huge fox there.
			PRINTL 「There is no way greedy humans like you can be saved.」
			PRINTL 「Receive your punishment.」 
			PRINTL The nine-tailed fox attacked.
			PRINTW Beast Che Fei attacked!
			CALL SET_ENEMY,9,[[キャラ:チェフェイ(九尾)]],71,0,1
			CFLAG:(CHARANUM-1):ＨＰ補正 = 3000
			CFLAG:(CHARANUM-1):ＭＰ補正 = 3000
			CFLAG:(CHARANUM-1):行動回数 = 4
			CFLAG:(CHARANUM-1):速度補正 = 16
			ABL:(CHARANUM-1):アイテム1 = 5051
			ABL:(CHARANUM-1):入手確率1 = 100
			CSTR:(CHARANUM-1):思考パターン = 810
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
		ELSEIF ダンジョンフラグ:43:1 >= 7
			PRINTL Scattering abominable poison, there was a huge fox with many legs there.
			PRINTL There was a huge fox there.
			PRINTL 「Human greed is my power!!」
			PRINTL The eight-tailed fox attacked.
			PRINTW Beast Che Fei attacked!
			CALL SET_ENEMY,9,[[キャラ:チェフェイ(八尾)]],63,0,1
			CFLAG:(CHARANUM-1):ＨＰ補正 = 3000
			CFLAG:(CHARANUM-1):ＭＰ補正 = 2500
			CFLAG:(CHARANUM-1):行動回数 = 4
			CFLAG:(CHARANUM-1):速度補正 = 10
			ABL:(CHARANUM-1):アイテム1 = 5051
			ABL:(CHARANUM-1):入手確率1 = 100
			CSTR:(CHARANUM-1):思考パターン = 810
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
		ELSEIF ダンジョンフラグ:43:1 >= 5
			PRINTL A Sessho-seki scattering abominable poison was there.
			PRINTL 「I got so much power from your greed.」
			PRINTL 「Hahahahahaha!!」 
			PRINTL The seven-tailed fox attacked.
			PRINTW Beast Che Fei attacked!
			CALL SET_ENEMY,9,[[キャラ:チェフェイ(七尾)]],57,0,1
			CFLAG:(CHARANUM-1):ＨＰ補正 = 2500
			CFLAG:(CHARANUM-1):ＭＰ補正 = 2500
			CFLAG:(CHARANUM-1):行動回数 = 4
			ABL:(CHARANUM-1):アイテム1 = 5051
			ABL:(CHARANUM-1):入手確率1 = 100
			CSTR:(CHARANUM-1):思考パターン = 810
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
		ELSEIF ダンジョンフラグ:43:1 >= 4
			PRINTL A fox with a red miasma waited there.
			PRINTL 「A human seized with desire came.」
			PRINTL 「Hohohohoho　Such a greedy person will die an ugly death!!」 
			PRINTL The six-tailed fox attacked.
			PRINTW Beast Che Fei attacked!
			CALL SET_ENEMY,9,[[キャラ:チェフェイ(六尾)]],51,0,1
			CFLAG:(CHARANUM-1):ＨＰ補正 = 2500
			CFLAG:(CHARANUM-1):ＭＰ補正 = 2500
			CFLAG:(CHARANUM-1):行動回数 = 3
			CFLAG:(CHARANUM-1):速度補正 = 1
			ABL:(CHARANUM-1):アイテム1 = 5051
			ABL:(CHARANUM-1):入手確率1 = 100
			CSTR:(CHARANUM-1):思考パターン = 810
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
		ELSEIF ダンジョンフラグ:43:1 >= 3
			PRINTL One woman waited there.
			PRINTL 「Ara you are quite greedy aren't you.」
			PRINTW 「I was able to get much power from your greed.」 
			PRINTL 
			PRINTL 「Like this!」
			PRINTL The five-tailed fox attacked.
			PRINTW Beast Che Fei attacked!
			CALL SET_ENEMY,9,[[キャラ:チェフェイ(五尾)]],47,0,1
			CFLAG:(CHARANUM-1):ＨＰ補正 = 2000
			CFLAG:(CHARANUM-1):ＭＰ補正 = 2000
			CFLAG:(CHARANUM-1):行動回数 = 3
			CFLAG:(CHARANUM-1):速度補正 = 1
			ABL:(CHARANUM-1):アイテム1 = 5051
			ABL:(CHARANUM-1):入手確率1 = 100
			CSTR:(CHARANUM-1):思考パターン = 810
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
		ELSEIF ダンジョンフラグ:43:1 >= 2
			PRINTL A woman waited there.
			PRINTL 「A humble person with few desires like you is unusual.」 
			PRINTL Four fox tails grew from the bewitching woman with an umbrella.
			PRINTL The four-tailed fox attacked.
			PRINTW Beast Che Fei attacked!
			CALL SET_ENEMY,9,[[キャラ:チェフェイ(四尾)]],36,0,1
			CFLAG:(CHARANUM-1):ＨＰ補正 = 1000
			CFLAG:(CHARANUM-1):ＭＰ補正 = 1000
			CFLAG:(CHARANUM-1):行動回数 = 2
			CFLAG:(CHARANUM-1):速度補正 = 15
			ABL:(CHARANUM-1):アイテム1 = 5051
			ABL:(CHARANUM-1):入手確率1 = 100
			CSTR:(CHARANUM-1):思考パターン = 810
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
		ELSEIF ダンジョンフラグ:43:1 >= 1
			PRINTL A girl waited there.
			PRINTL 「That's no good... You didn't take enough treasure.」
			PRINTL 「That's SO lame.」
			PRINTL A three-tailed fox attacked.
			PRINTW Beast Che Fei attacked!
			CALL SET_ENEMY,9,[[キャラ:チェフェイ(三尾)]],28,0,1
			CFLAG:(CHARANUM-1):ＨＰ補正 = 300
			CFLAG:(CHARANUM-1):ＭＰ補正 = 300
			ABL:(CHARANUM-1):アイテム1 = 5051
			ABL:(CHARANUM-1):入手確率1 = 100
			;CSTR:(CHARANUM-1):思考パターン = 810
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
		ENDIF
		CUSTOMDRAWLINE =
		CALL BATTLE_START
		WAIT
		FLAG:逃走不可フラグ = 0
		FLAG:会話不能フラグ = 0
		FLAG:先制不意打ちキャンセル = 0
		IF ダンジョンフラグ:43:1 == 0
			PRINTW 「...no use...after all...kon......」
		ELSEIF ダンジョンフラグ:43:1 >= 9
			PRINTL 「Greedy human......」
			PRINTL 「I curse you for all generations......」
			PRINTW Che Fei spoke a dying curse with its last breath.
		;ELSEIF ダンジョンフラグ:43:1 >= 9
		;	PRINTW 「...A-absoluteely...救われん...」
		ELSEIF ダンジョンフラグ:43:1 >= 7
			PRINTL 「...T-to beat me...such greed...」
			PRINTW 「You will someday destroy yourself...」
		ELSEIF ダンジョンフラグ:43:1 >= 5
			PRINTW 「...possibly...your power was enough...」
		ELSEIF ダンジョンフラグ:43:1 >= 4
			PRINTL 「That I would be defeated by such a human......」
			PRINTW 「D-deity Emperor......I'm sorry......」
		ELSEIF ダンジョンフラグ:43:1 >= 3
			PRINTL 「...ara ara...that I would lose」
			PRINTW 「what kind of thing...this...」
		ELSEIF ダンジョンフラグ:43:1 >= 2
			PRINTL 「...Ara...I lost」
			PRINTW 「Was I no good...」
		ELSEIF ダンジョンフラグ:43:1 >= 1
			PRINTW 「...It's no good...I lost...this sucks...」
		ENDIF
		;難易度MANIACS以上の七〜九尾をあなたのlv70以下で50日以内に討伐
		IF FLAG:戦闘難易度 >= 4 && ダンジョンフラグ:43:1 >= 5 && BASE:MASTER:LV <= 70 && CHECK_TIMELIMIT(1,DAY <= 50)
			PRINTL 
			PRINTFORMW ＞哭翼の種子島 obtained
			ITEM:2566 += 1
		ENDIF
		ダンジョンフラグ:43:0 = 1
	ENDIF
ENDIF
RETURN 0

;=======================================================================
;エンカウント率
;=======================================================================
@ENCOUNT_RATE_43
SELECTCASE FLAG:現M
	CASE 0
		FLAG:エンカウント率 = FLAG:未遭遇歩数*5
	CASE 1
		FLAG:エンカウント率 = FLAG:未遭遇歩数*5
	CASE 2
		FLAG:エンカウント率 = FLAG:未遭遇歩数*5
	CASE 3
		FLAG:エンカウント率 = FLAG:未遭遇歩数*5

	CASE 4
		FLAG:エンカウント率 = FLAG:未遭遇歩数*5
	CASE 5
		FLAG:エンカウント率 = FLAG:未遭遇歩数*5
	CASE 6
		FLAG:エンカウント率 = FLAG:未遭遇歩数*5
	CASE 7
		FLAG:エンカウント率 = FLAG:未遭遇歩数*5

	CASE 8
		FLAG:エンカウント率 = FLAG:未遭遇歩数*5
	CASE 9
		FLAG:エンカウント率 = FLAG:未遭遇歩数*5
	CASE 10
		FLAG:エンカウント率 = FLAG:未遭遇歩数*5
	CASE 11
		FLAG:エンカウント率 = FLAG:未遭遇歩数*5

	CASE 12
		FLAG:エンカウント率 = FLAG:未遭遇歩数

	CASEELSE
		FLAG:エンカウント率 = FLAG:未遭遇歩数*7
ENDSELECT
SIF FLAG:未遭遇歩数 < 5
	FLAG:エンカウント率 = 0

;=======================================================================
;必要レベル目安
;推奨LV 雑魚最低LV 雑魚最高LV ボスLV 
;=======================================================================
@GET_DUNGEON_LV_43
RETURN 37, 34, 56, 65
;=======================================================================
;エンカウント処理
;=======================================================================
@CHECK_ENCOUNT_43
IF RAND:100 < FLAG:エンカウント率
	CALL ENEMY_TABLE
	RETURN 1
ELSE
	FLAG:未遭遇歩数 += 1
	RETURN 0
ENDIF
;=======================================================================
;敵の種族の種類数
;=======================================================================
@CLASS_NUM_43
RETURN CLASS_NUM_COMMON("上級")
;=======================================================================
;敵の総数
;ARGは出現する敵の種類です
;=======================================================================
@ENEMY_NUM_43, ARG
RETURN ENEMY_NUM_COMMON("上級", ARG)
;=======================================================================
;敵の種類
;=======================================================================
@ENEMY_43, ARG
SELECTCASE FLAG:現M
	CASE 0
		SELECTCASE RAND:100
			CASE IS < 10
				;10%で魔王パイモンLv36
				RETURN [[キャラ:パイモン]], 36
			CASE IS < 25
				;15%で妖精ナジャLv36
				RETURN [[キャラ:ナジャ]], 36
			CASE IS < 40
				;15%でヤクシニーLv34
				RETURN [[キャラ:ヤクシニー]], 37
			CASE IS < 45
				;5%で魔獣タマモLv38
				RETURN [[キャラ:タマモ]], 38
			CASE IS < 65
				;20%でゾンビちゃんLv4　ランク11
				RETURN [[キャラ:ゾンビちゃん]], 37
			CASE IS < 75
				;10％で外道おしちLv35　ランク1
				RETURN [[キャラ:おしち]], 38
			CASE IS < 95
				;20%でゾンビくんLv7　ランク10
				RETURN [[キャラ:ゾンビくん]], 37
			CASE IS < 100
				;5%で堕天使オセLv36
				RETURN [[キャラ:オセ]], 36
		ENDSELECT
	CASE 1
		SELECTCASE RAND:100
			CASE IS < 10
				;10%で魔王パイモンLv36
				RETURN [[キャラ:パイモン]], 36
			CASE IS < 25
				;15%で妖精ナジャLv36
				RETURN [[キャラ:ナジャ]], 36
			CASE IS < 40
				;15%でヤクシニーLv34
				RETURN [[キャラ:ヤクシニー]], 37
			CASE IS < 45
				;5%で魔獣タマモLv38
				RETURN [[キャラ:タマモ]], 38
			CASE IS < 65
				;20%でゾンビちゃんLv4　ランク11
				RETURN [[キャラ:ゾンビちゃん]], 37
			CASE IS < 75
				;10％で外道おしちLv35　ランク1
				RETURN [[キャラ:おしち]], 38
			CASE IS < 95
				;20%でゾンビくんLv7　ランク10
				RETURN [[キャラ:ゾンビくん]], 37
			CASE IS < 100
				;5%で堕天使オセLv36
				RETURN [[キャラ:オセ]], 36
		ENDSELECT
	CASE 2
		SELECTCASE RAND:100
			CASE IS < 10
				;10%で魔王パイモンLv36
				RETURN [[キャラ:パイモン]], 36
			CASE IS < 25
				;15%で妖精ナジャLv36
				RETURN [[キャラ:ナジャ]], 36
			CASE IS < 40
				;15%でヤクシニーLv34
				RETURN [[キャラ:ヤクシニー]], 37
			CASE IS < 45
				;5%で魔獣タマモLv38
				RETURN [[キャラ:タマモ]], 38
			CASE IS < 65
				;20%でゾンビちゃんLv4　ランク11
				RETURN [[キャラ:ゾンビちゃん]], 37
			CASE IS < 75
				;10％で外道おしちLv35　ランク1
				RETURN [[キャラ:おしち]], 38
			CASE IS < 95
				;20%でゾンビくんLv7　ランク10
				RETURN [[キャラ:ゾンビくん]], 37
			CASE IS < 100
				;5%で堕天使オセLv36
				RETURN [[キャラ:オセ]], 36
		ENDSELECT
	CASE 3
		SELECTCASE RAND:100
			CASE IS < 10
				;10%で魔王パイモンLv36
				RETURN [[キャラ:パイモン]], 36
			CASE IS < 25
				;15%で妖精ナジャLv36
				RETURN [[キャラ:ナジャ]], 36
			CASE IS < 40
				;15%でヤクシニーLv34
				RETURN [[キャラ:ヤクシニー]], 37
			CASE IS < 45
				;5%で魔獣タマモLv38
				RETURN [[キャラ:タマモ]], 38
			CASE IS < 65
				;20%でゾンビちゃんLv4　ランク11
				RETURN [[キャラ:ゾンビちゃん]], 37
			CASE IS < 75
				;10％で外道おしちLv35　ランク1
				RETURN [[キャラ:おしち]], 38
			CASE IS < 95
				;20%でゾンビくんLv7　ランク10
				RETURN [[キャラ:ゾンビくん]], 37
			CASE IS < 100
				;5%で堕天使オセLv36
				RETURN [[キャラ:オセ]], 36
		ENDSELECT
	;二階	
	CASE 4
		SELECTCASE RAND:100
			CASE IS < 10
				;10%で魔王パイモンLv36　ランク1
				RETURN [[キャラ:パイモン]], 39
			CASE IS < 20
				;10%で妖精ナジャLv36　ランク1
				RETURN [[キャラ:ナジャ]], 39
			CASE IS < 35
				;15%でヤクシニーLv34　ランク2
				RETURN [[キャラ:ヤクシニー]], 40
			CASE IS < 40
				;5%で魔獣タマモLv38　ランク1
				RETURN [[キャラ:タマモ]], 41
			CASE IS < 55
				;15%でゾンビちゃんLv4　ランク11
				RETURN [[キャラ:ゾンビちゃん]], 37
			CASE IS < 65
				;10％で外道おしちLv35　ランク2
				RETURN [[キャラ:おしち]], 41
			CASE IS < 80
				;15%で外道くちさけ
				RETURN [[キャラ:くちさけ]], 42
			CASE IS < 90
				;10%　龍王ミズチLV33(38)
				RETURN [[キャラ:ミズチ]], 38
			CASE IS < 100
				;10%で堕天使オセLv36　ランク1
				RETURN [[キャラ:オセ]], 39
		ENDSELECT
	CASE 5
		SELECTCASE RAND:100
			CASE IS < 10
				;10%で魔王パイモンLv36　ランク1
				RETURN [[キャラ:パイモン]], 39
			CASE IS < 20
				;10%で妖精ナジャLv36　ランク1
				RETURN [[キャラ:ナジャ]], 39
			CASE IS < 35
				;15%でヤクシニーLv34　ランク2
				RETURN [[キャラ:ヤクシニー]], 40
			CASE IS < 40
				;5%で魔獣タマモLv38　ランク1
				RETURN [[キャラ:タマモ]], 41
			CASE IS < 55
				;15%でゾンビちゃんLv4　ランク11
				RETURN [[キャラ:ゾンビちゃん]], 37
			CASE IS < 65
				;10％で外道おしちLv35　ランク2
				RETURN [[キャラ:おしち]], 41
			CASE IS < 80
				;15%で外道くちさけ
				RETURN [[キャラ:くちさけ]], 42
			CASE IS < 90
				;10%　龍王ミズチLV33(38)
				RETURN [[キャラ:ミズチ]], 38
			CASE IS < 100
				;10%で堕天使オセLv36　ランク1
				RETURN [[キャラ:オセ]], 39
		ENDSELECT
	CASE 6
		SELECTCASE RAND:100
			CASE IS < 10
				;10%で魔王パイモンLv36　ランク1
				RETURN [[キャラ:パイモン]], 39
			CASE IS < 20
				;10%で妖精ナジャLv36　ランク1
				RETURN [[キャラ:ナジャ]], 39
			CASE IS < 35
				;15%でヤクシニーLv34　ランク2
				RETURN [[キャラ:ヤクシニー]], 40
			CASE IS < 40
				;5%で魔獣タマモLv38　ランク1
				RETURN [[キャラ:タマモ]], 41
			CASE IS < 55
				;15%でゾンビちゃんLv4　ランク11
				RETURN [[キャラ:ゾンビちゃん]], 37
			CASE IS < 65
				;10％で外道おしちLv35　ランク2
				RETURN [[キャラ:おしち]], 41
			CASE IS < 80
				;15%で外道くちさけ
				RETURN [[キャラ:くちさけ]], 42
			CASE IS < 90
				;10%　龍王ミズチLV33(38)
				RETURN [[キャラ:ミズチ]], 38
			CASE IS < 100
				;10%で堕天使オセLv36　ランク1
				RETURN [[キャラ:オセ]], 39
		ENDSELECT
	CASE 7
		SELECTCASE RAND:100
			CASE IS < 10
				;10%で魔王パイモンLv36　ランク1
				RETURN [[キャラ:パイモン]], 39
			CASE IS < 20
				;10%で妖精ナジャLv36　ランク1
				RETURN [[キャラ:ナジャ]], 39
			CASE IS < 35
				;15%でヤクシニーLv34　ランク2
				RETURN [[キャラ:ヤクシニー]], 40
			CASE IS < 40
				;5%で魔獣タマモLv38　ランク1
				RETURN [[キャラ:タマモ]], 41
			CASE IS < 55
				;15%でゾンビちゃんLv4　ランク11
				RETURN [[キャラ:ゾンビちゃん]], 37
			CASE IS < 65
				;10％で外道おしちLv35　ランク2
				RETURN [[キャラ:おしち]], 41
			CASE IS < 80
				;15%で外道くちさけ
				RETURN [[キャラ:くちさけ]], 42
			CASE IS < 90
				;10%　龍王ミズチLV33(38)
				RETURN [[キャラ:ミズチ]], 38
			CASE IS < 100
				;10%で堕天使オセLv36　ランク1
				RETURN [[キャラ:オセ]], 39
		ENDSELECT
	;一階
	CASE 8
		SELECTCASE RAND:100
			CASE IS < 10
				;10%で魔王パイモンLv36　ランク2
				RETURN [[キャラ:パイモン]], 42
			CASE IS < 25
				;15％で妖魔サキュバスLv44
				RETURN [[キャラ:サキュバス]], 44
			CASE IS < 40
				;15%で妖精ヴィヴィアンLv42
				RETURN [[キャラ:ヴィヴィアン]], 42
			CASE IS < 55
				;15%でアマゾーンLv43
				RETURN [[キャラ:アマゾーン]], 43
			CASE IS < 70
				;15%で魔獣タマモLv38　ランク2
				RETURN [[キャラ:タマモ]], 44
			CASE IS < 85
				;15%で外道くちさけLv42
				RETURN [[キャラ:くちさけ]], 42
			CASE IS < 95
				;10%で堕天使オセLv36　ランク2
				RETURN [[キャラ:オセ]], 42
			CASE IS < 100
				;5%で魔獣ダッキLv47
				RETURN [[キャラ:ダッキ]], 47
		ENDSELECT
	CASE 9
		SELECTCASE RAND:100
			CASE IS < 10
				;10%で魔王パイモンLv36　ランク2
				RETURN [[キャラ:パイモン]], 42
			CASE IS < 25
				;15％で妖魔サキュバスLv44
				RETURN [[キャラ:サキュバス]], 44
			CASE IS < 40
				;15%で妖精ヴィヴィアンLv42
				RETURN [[キャラ:ヴィヴィアン]], 42
			CASE IS < 55
				;15%でアマゾーンLv43
				RETURN [[キャラ:アマゾーン]], 43
			CASE IS < 70
				;15%で魔獣タマモLv38　ランク2
				RETURN [[キャラ:タマモ]], 44
			CASE IS < 85
				;15%で外道くちさけLv42
				RETURN [[キャラ:くちさけ]], 42
			CASE IS < 95
				;10%で堕天使オセLv36　ランク2
				RETURN [[キャラ:オセ]], 42
			CASE IS < 100
				;5%で魔獣ダッキLv47
				RETURN [[キャラ:ダッキ]], 47
		ENDSELECT
	CASE 10
		SELECTCASE RAND:100
			CASE IS < 10
				;10%で魔王パイモンLv36　ランク2
				RETURN [[キャラ:パイモン]], 42
			CASE IS < 25
				;15％で妖魔サキュバスLv44
				RETURN [[キャラ:サキュバス]], 44
			CASE IS < 40
				;15%で妖精ヴィヴィアンLv42
				RETURN [[キャラ:ヴィヴィアン]], 42
			CASE IS < 55
				;15%でアマゾーンLv43
				RETURN [[キャラ:アマゾーン]], 43
			CASE IS < 70
				;15%で魔獣タマモLv38　ランク2
				RETURN [[キャラ:タマモ]], 44
			CASE IS < 85
				;15%で外道くちさけLv42
				RETURN [[キャラ:くちさけ]], 42
			CASE IS < 95
				;10%で堕天使オセLv36　ランク2
				RETURN [[キャラ:オセ]], 42
			CASE IS < 100
				;5%で魔獣ダッキLv47
				RETURN [[キャラ:ダッキ]], 47
		ENDSELECT
	CASE 11
		SELECTCASE RAND:100
			CASE IS < 10
				;10%で魔王パイモンLv36　ランク2
				RETURN [[キャラ:パイモン]], 42
			CASE IS < 25
				;15％で妖魔サキュバスLv44
				RETURN [[キャラ:サキュバス]], 44
			CASE IS < 40
				;15%で妖精ヴィヴィアンLv42
				RETURN [[キャラ:ヴィヴィアン]], 42
			CASE IS < 55
				;15%でアマゾーンLv43
				RETURN [[キャラ:アマゾーン]], 43
			CASE IS < 70
				;15%で魔獣タマモLv38　ランク2
				RETURN [[キャラ:タマモ]], 44
			CASE IS < 85
				;15%で外道くちさけLv42
				RETURN [[キャラ:くちさけ]], 42
			CASE IS < 95
				;10%で堕天使オセLv36　ランク2
				RETURN [[キャラ:オセ]], 42
			CASE IS < 100
				;5%で魔獣ダッキLv47
				RETURN [[キャラ:ダッキ]], 47
		ENDSELECT
	;地下一階
	CASE 12
		SELECTCASE RAND:100
			CASE IS < 20
				;20%で魔獣タマモLv38　ランク3
				RETURN [[キャラ:タマモ]], 47
			CASE IS < 35
				;15％で妖魔サキュバスLv44　ランク1
				RETURN [[キャラ:サキュバス]], 47
			CASE IS < 55
				;20%で妖精ヴィヴィアンLv42　ランク1
				RETURN [[キャラ:ヴィヴィアン]], 45
			CASE IS < 70
				;15%でアマゾーンLv43　ランク1
				RETURN [[キャラ:アマゾーン]], 46
			CASE IS < 85
				;15%で外道くちさけLv42　ランク2
				RETURN [[キャラ:くちさけ]], 48
			CASE IS < 90
				;5%で妖鳥モーリアンLv49
				RETURN [[キャラ:モーリアン]], 49
			CASE IS < 95
				;5%で魔獣ダッキLv47　ランク1
				RETURN [[キャラ:ダッキ]], 50
			CASE IS < 100
				;5%で外道ドッペルゲンガーLv55
				RETURN [[キャラ:ドッペルゲンガー]], 55
		ENDSELECT
	CASEELSE
		SELECTCASE RAND:100
			CASE IS < 20
				;20%で魔獣タマモLv38　ランク4
				RETURN [[キャラ:タマモ]], 50
			CASE IS < 30
				;10%で妖精ティターニアLv51
				RETURN [[キャラ:ティターニア]], 51
			CASE IS < 45
				;15％で妖魔サキュバスLv44　ランク2
				RETURN [[キャラ:サキュバス]], 50
			CASE IS < 60
				;15%で妖鬼ダーキニーLv46　ランク2
				RETURN [[キャラ:ダーキニー]], 52
			CASE IS < 70
				;10%で堕天使アガレスLv54
				RETURN [[キャラ:アガレス]], 54
			CASE IS < 80
				;10%で妖鳥モーリアンLv49　ランク1
				RETURN [[キャラ:モーリアン]], 52
			CASE IS < 90
				;10%で魔獣ダッキLv47　ランク2
				RETURN [[キャラ:ダッキ]], 53
			CASE IS < 100
				;10%で外道ドッペルゲンガーLv55
				RETURN [[キャラ:ドッペルゲンガー]], 55
		ENDSELECT
ENDSELECT
;=================================
;思考パターン
;=================================


@SET_ACTION_810,ARG
;1more
IF CFLAG:ARG:１moreフラグ == 2
;	IF ダンジョンフラグ:43:1 < 2
;		CALL CHECK_ACTIONABLE,ARG,904
;		SIF RESULT == 0
;			GOTO DECIDE_ACTION
;		CFLAG:ARG:入力行動 = 904
;		CALL RANDOM_TARGET,ARG,904
;		RETURN 1
;	ELSE
		IF RAND:3 == 0
			;Absolute Zero
			CALL CHECK_ACTIONABLE,ARG,810
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 810
			CALL RANDOM_TARGET,ARG,810
			RETURN 1
		ELSEIF RAND:2 == 0
			;放電
			CALL CHECK_ACTIONABLE,ARG,910
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 910
			CALL RANDOM_TARGET,ARG,910
			RETURN 1
		ELSE
			IF RAND:2 == 0
				;○かじり
				CALL CHECK_ACTIONABLE,ARG,326
				SIF RESULT == 0
					GOTO DECIDE_ACTION
				CFLAG:ARG:入力行動 = 326
				CALL RANDOM_TARGET,ARG,326
				RETURN 1
			ELSE
				IF ダンジョンフラグ:43:1 == 2
					CALL CHECK_ACTIONABLE,ARG,1212
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 1212
					CALL RANDOM_TARGET,ARG,1212
					RETURN 1
				ELSE
					;ムドオン
					CALL CHECK_ACTIONABLE,ARG,1403
					SIF RESULT == 0
						GOTO DECIDE_ACTION
					CFLAG:ARG:入力行動 = 1403
					CALL RANDOM_TARGET,ARG,1403
					RETURN 1
				ENDIF
			ENDIF
		ENDIF
;	ENDIF
;ＨＰ30％以下　最終形態のみ
ELSEIF 現HP割合(ARG) < 30 && ダンジョンフラグ:43:1 >= 9 && CFLAG:ARG:行動した回数 == 0
	CALL CHECK_ACTIONABLE,ARG,603
	SIF RESULT == 0
		GOTO DECIDE_ACTION
	CFLAG:ARG:入力行動 = 603
	CALL RANDOM_TARGET,ARG,603
	RETURN 1

ELSEIF CFLAG:ARG:行動した回数 == 0
	IF ダンジョンフラグ:43:1 == 2
		IF RAND:2 == 0
			CALL CHECK_ACTIONABLE,ARG,511
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 511
			CALL RANDOM_TARGET,ARG,511
			RETURN 1
		ELSE
			CALL CHECK_ACTIONABLE,ARG,1212
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 1212
			CALL RANDOM_TARGET,ARG,1212
			RETURN 1
		ENDIF
	ELSEIF ダンジョンフラグ:43:1 >= 3 && ダンジョンフラグ:43:1 < 9
		CALL CHECK_ACTIONABLE,ARG,511
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:入力行動 = 511
		CALL RANDOM_TARGET,ARG,511
		RETURN 1
	ELSEIF ダンジョンフラグ:43:1 >= 9
		IF RAND:3 == 0
			CALL CHECK_ACTIONABLE,ARG,603
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 603
			CALL RANDOM_TARGET,ARG,603
			RETURN 1
		ELSEIF RAND:2 == 0
			CALL CHECK_ACTIONABLE,ARG,810
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 810
			CALL RANDOM_TARGET,ARG,810
			RETURN 1
		ELSE
			CALL CHECK_ACTIONABLE,ARG,1403
			SIF RESULT == 0
				GOTO DECIDE_ACTION
			CFLAG:ARG:入力行動 = 1403
			CALL RANDOM_TARGET,ARG,1403
			RETURN 1
		ENDIF
	ENDIF
ELSEIF CFLAG:ARG:行動した回数 == 1 && ダンジョンフラグ:43:1 >= 3 && ダンジョンフラグ:43:1 < 9
	CALL CHECK_ACTIONABLE,ARG,326
	SIF RESULT == 0
		GOTO DECIDE_ACTION
	CFLAG:ARG:入力行動 = 326
	CALL RANDOM_TARGET,ARG,326
	RETURN 1

ELSEIF ダンジョンフラグ:43:1 >= 9
	IF RAND:4 == 0
		CALL CHECK_ACTIONABLE,ARG,326
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:入力行動 = 326
		CALL RANDOM_TARGET,ARG,326
		RETURN 1
	ELSEIF RAND:3 == 0
		CALL CHECK_ACTIONABLE,ARG,810
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:入力行動 = 810
		CALL RANDOM_TARGET,ARG,810
		RETURN 1
	ELSEIF RAND:2 == 0
		CALL CHECK_ACTIONABLE,ARG,910
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:入力行動 = 910
		CALL RANDOM_TARGET,ARG,910
		RETURN 1
	ELSE
		CALL CHECK_ACTIONABLE,ARG,1403
		SIF RESULT == 0
			GOTO DECIDE_ACTION
		CFLAG:ARG:入力行動 = 1403
		CALL RANDOM_TARGET,ARG,1403
		RETURN 1
	ENDIF
ELSE
	$DECIDE_ACTION
	CALL SEARCH_ACT,ARG
	IF RESULT == 0
		CFLAG:ARG:入力行動 = -1
		CFLAG:ARG:防御フラグ = 1
		RETURN 0
	ENDIF
;	PRINTFORML [{CFLAG:ARG:5}]のスキル数 {RESULT}
	LOCAL = RAND:RESULT
	;スキル番号決定
	LOCAL:1 = S:(10+LOCAL)
;	PRINTFORML [{CFLAG:ARG:5}]のスキル {LOCAL:1}
	$TARGET_LOOP
	
	CALL RANDOM_TARGET,ARG,LOCAL:1
	CALLFORM SKILL_TARGET_{LOCAL:1}
	;ここでスキル番号を行動内容に代入
	SIF CFLAG:ARG:ターゲット == -1
		GOTO DECIDE_ACTION
	CFLAG:ARG:入力行動 = LOCAL:1
ENDIF
;========
;宝の処理
;========
@TREASURE_43
	SELECTCASE FLAG:現M
		CASE 0
		CASE 1
			;雷牙
			SIF FLAG:現X == 5 && FLAG:現Y == 6
				CALL GET_TREASURE,2039,1,FLAG:現ダンジョン,19
			;首狩り
			SIF FLAG:現X == 7 && FLAG:現Y == 8
				CALL GET_TREASURE,2042,1,FLAG:現ダンジョン,20
		CASE 8
			;1012,MaIncense,10000,
			SIF FLAG:現X == 1 && FLAG:現Y == 13
				CALL GET_TREASURE,1012,1,FLAG:現ダンジョン,22
		CASE 9
			;運の
			SIF FLAG:現X == 13 && FLAG:現Y == 9
				CALL GET_TREASURE,1015,1,FLAG:現ダンジョン,23
		
		CASE 10
			;耐力
			SIF FLAG:現X == 8 && FLAG:現Y == 3 && ダンジョンフラグ:43:21 == 0
				CALL DUNGEON_TRAP_MP,40
				CALL GET_TREASURE,1013,1,FLAG:現ダンジョン,21
		CASE 11
			;速さ
			SIF FLAG:現X == 18 && FLAG:現Y == 11
				CALL GET_TREASURE,1014,1,FLAG:現ダンジョン,24
			;MagicalMirror
			SIF FLAG:現X == 5 && FLAG:現Y == 9
				CALL GET_TREASURE,1036,1,FLAG:現ダンジョン,25
		CASE 14
			;
			IF FLAG:現X == 9 && FLAG:現Y == 4
				IF ダンジョンフラグ:43:0 == 0
					CALL GET_TREASURE,1026,1,FLAG:現ダンジョン,26
				ELSE
					CALL GET_TREASURE,1002,1,FLAG:現ダンジョン,26
				ENDIF
			ELSEIF FLAG:現X == 9 && FLAG:現Y == 6
				IF ダンジョンフラグ:43:0 == 0
					CALL GET_TREASURE,1040,1,FLAG:現ダンジョン,27
				ELSE
					CALL GET_TREASURE,1002,1,FLAG:現ダンジョン,27
				ENDIF
			ELSEIF FLAG:現X == 9 && FLAG:現Y == 8
				IF ダンジョンフラグ:43:0 == 0
					CALL GET_TREASURE,1016,1,FLAG:現ダンジョン,28
				ELSE
					CALL GET_TREASURE,1002,1,FLAG:現ダンジョン,28
				ENDIF
			ELSEIF FLAG:現X == 9 && FLAG:現Y == 10
				IF ダンジョンフラグ:43:0 == 0
					CALL GET_TREASURE,1017,1,FLAG:現ダンジョン,29
				ELSE
					CALL GET_TREASURE,1002,1,FLAG:現ダンジョン,29
				ENDIF
			ELSEIF FLAG:現X == 9 && FLAG:現Y == 12
				IF ダンジョンフラグ:43:0 == 0
					CALL GET_TREASURE,1004,1,FLAG:現ダンジョン,30
				ELSE
					CALL GET_TREASURE,1002,1,FLAG:現ダンジョン,30
				ENDIF
			ELSEIF FLAG:現X == 9 && FLAG:現Y == 14
				IF ダンジョンフラグ:43:0 == 0
					CALL GET_TREASURE,1006,1,FLAG:現ダンジョン,31
				ELSE
					CALL GET_TREASURE,1002,1,FLAG:現ダンジョン,31
				ENDIF
			ENDIF
		CASE 15
			IF FLAG:現X == 3 && FLAG:現Y == 5
				;Nameless Sword
				IF ダンジョンフラグ:43:0 == 0
					CALL GET_TREASURE_KITUNE,2449,1,FLAG:現ダンジョン,32
				ELSE
					CALL GET_TREASURE,2000,1,FLAG:現ダンジョン,32
				ENDIF
			ELSEIF FLAG:現X == 5 && FLAG:現Y == 5
				IF ダンジョンフラグ:43:0 == 0
					IF TALENT:MASTER:140 == 1
						;Jagd Glove
						CALL GET_TREASURE_KITUNE,4013,1,FLAG:現ダンジョン,33
					ELSE
						;Sturm Glove
						CALL GET_TREASURE_KITUNE,4014,1,FLAG:現ダンジョン,33
					ENDIF
				ELSE
					CALL GET_TREASURE,4000,1,FLAG:現ダンジョン,33
				ENDIF
			ELSEIF FLAG:現X == 3 && FLAG:現Y == 7
				IF ダンジョンフラグ:43:0 == 0
					IF TALENT:MASTER:140 == 1
						;Jagd Leg
						CALL GET_TREASURE_KITUNE,4513,1,FLAG:現ダンジョン,34
					ELSE
						;Sturm Leg
						CALL GET_TREASURE_KITUNE,4514,1,FLAG:現ダンジョン,34
					ENDIF
				ELSE
					CALL GET_TREASURE,4500,1,FLAG:現ダンジョン,34
				ENDIF
			ELSEIF FLAG:現X == 5 && FLAG:現Y == 7
				IF ダンジョンフラグ:43:0 == 0
					IF TALENT:MASTER:140 == 1
						;Jagd Armor
						CALL GET_TREASURE_KITUNE,3513,1,FLAG:現ダンジョン,35
					ELSE
						;Sturm Suit
						CALL GET_TREASURE_KITUNE,3514,1,FLAG:現ダンジョン,35
					ENDIF
				ELSE
					CALL GET_TREASURE,3502,1,FLAG:現ダンジョン,35
				ENDIF
			ELSEIF FLAG:現X == 3 && FLAG:現Y == 9
				IF ダンジョンフラグ:43:0 == 0
					IF TALENT:MASTER:140 == 1
						;Jagd Helm
						CALL GET_TREASURE_KITUNE,3013,1,FLAG:現ダンジョン,36
					ELSE
						;Sturm Helm
						CALL GET_TREASURE_KITUNE,3014,1,FLAG:現ダンジョン,36
					ENDIF
				ELSE
					CALL GET_TREASURE,3000,1,FLAG:現ダンジョン,36
				ENDIF
			ELSEIF FLAG:現X == 5 && FLAG:現Y == 9
				;Reaper Colt
				IF ダンジョンフラグ:43:0 == 0
					CALL GET_TREASURE_KITUNE,2510,1,FLAG:現ダンジョン,37
				ELSE
					CALL GET_TREASURE,2500,1,FLAG:現ダンジョン,37
				ENDIF
			ELSEIF FLAG:現X == 3 && FLAG:現Y == 11
				;Charon Staff
				IF ダンジョンフラグ:43:0 == 0
					CALL GET_TREASURE_KITUNE,2040,1,FLAG:現ダンジョン,38
				ELSE
					CALL GET_TREASURE,1002,1,FLAG:現ダンジョン,38
				ENDIF
			ELSEIF FLAG:現X == 5 && FLAG:現Y == 11
				;魔弾タスラム
				IF ダンジョンフラグ:43:0 == 0
					CALL GET_TREASURE_KITUNE,5512,20,FLAG:現ダンジョン,39
				ELSE
					CALL GET_TREASURE,1002,1,FLAG:現ダンジョン,39
				ENDIF
			ENDIF
		CASE 16
			IF FLAG:現X == 3 && FLAG:現Y == 5
				;Magic Ring
				IF ダンジョンフラグ:43:0 == 0
					CALL GET_TREASURE_KITUNE,5006,1,FLAG:現ダンジョン,40
				ELSE
					CALL GET_TREASURE,1002,1,FLAG:現ダンジョン,40
				ENDIF
			ENDIF
	ENDSELECT

;=====================================================================
;宝箱発見処理
;=====================================================================
@GET_TREASURE_KITUNE,ARG,ARG:1,ARG:2,ARG:3,ARG:4 = -1
PRINT A box is here. 
PRINTBUTTON "[0]Open it",0
PRINT  
PRINTBUTTON "[1]Don't open it",1
PRINTL
$INPUT_LOOP
ONEINPUT
IF RESULT == 0
	CALL CHECK_ITEMMAX,ARG
	IF RESULT == 0
		ダンジョンフラグ:43:1 += 1
		PRINTFORMW {ARG:1} %ITEMNAME_E(ARG)% obtained
		CALL GET_ITEM,ARG,ARG:1
		DA:(FLAG:現X):(FLAG:現Y) = 1
		IF ARG:4 >= 0
			SETBIT ダンジョンフラグ:(ARG:2):(ARG:3), ARG:4
		ELSE
			ダンジョンフラグ:(ARG:2):(ARG:3) = 1
		ENDIF
		RETURN 1
	ELSE
		PRINTFORMW {ARG:1} %ITEMNAME_E(ARG)% was found but couldn't be taken
		RETURN 0
	ENDIF
ELSEIF RESULT == 1
	RETURN 0
ELSE
	GOTO INPUT_LOOP
ENDIF


;=======================================================================
;輪姦参加悪魔
;=======================================================================
@DUNGEON_RAPE_DEVIL_43
;ランダムにどの悪魔が出るか決定
;RETURN CSV番号 , 人数 , レベル
SELECTCASE RAND:3
	CASE 0
		RETURN [[キャラ:アガレス]] , 3 + RAND:10 , CSVBASE([[キャラ:アガレス]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 1
		RETURN [[キャラ:ゾンビくん]] , 3 + RAND:10 , CSVBASE([[キャラ:ゾンビくん]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 2
		RETURN [[キャラ:オセ]] , 3 + RAND:10 , CSVBASE([[キャラ:オセ]] , GETNUM(BASE , "LV") , 0) + RAND:3
ENDSELECT
