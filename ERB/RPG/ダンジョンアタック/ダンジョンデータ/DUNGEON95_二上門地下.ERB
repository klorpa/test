
;=======================================================================
;ダンジョンフラグ:95:0 == 2 クリア
;ダンジョンフラグ:95:1 == 1 アプスー撃破
;ダンジョンフラグ:95:1 == 2 ティアマト撃破
;=======================================================================

;=======================================================================
;攻略条件
;=======================================================================
@PREREQUISITE_DUNGEON_95
SIF 依頼フラグ:35:0 == 1 && ダンジョンフラグ:95:0 == 0
	RETURN 1
RETURN 0

;=======================================================================
;ダンジョン名
;=======================================================================
@GET_DUNGEON_NAME_95
RESULTS = Futagamikado Basement

;=======================================================================
;スタート地点入力
;=======================================================================
@START_DUNGEON_95, ARG
FLAG:現M = 0
FLAG:現X = 4
FLAG:現Y =21
CALL AUTOMAP
RETURN 0
;=======================================================================
;フロア名表示
;=======================================================================
@FLOORNAME_95
	PRINT 二上門地下
SELECTCASE FLAG:現M
	CASE 0
		PRINTL ・１
	CASE 1
		PRINTL ・２
	CASE 2
		PRINTL ・３
	CASE 3
		PRINTL ・４
ENDSELECT
;=======================================================================
;スタート時イベント
;=======================================================================
@EVENT_DUNGEON_START_95
IF ダンジョンフラグ:95:0 == 0
CALL MESSAGE_WINDOW_D, "", "＞ナオミと合流し、 二上門地下へと向かった。"
CALL SET_GUEST_D95
CALL MESSAGE_WINDOW_D, "", "………/……/…"
CALL MESSAGE_WINDOW_D, "ナオミ", "フウ…/随分と深くまで降りてきたわね…"
CALL MESSAGE_WINDOW_D, "ナオミ", "確かミスター西から渡された資料には/「北へしばらく進むと遺跡がある。道はその先から二つに別れている/西にはアプスー、東にはティアマトがいる」と書いてあったわ"
CALL MESSAGE_WINDOW_D, "ナオミ", "ティアマトとアプスー…"
CALL MESSAGE_WINDOW_D, "ナオミ", "どちらを相手するかは道々相談することにしましょう"
FLAG:脱出スキル禁止 = 1
ダンジョンフラグ:95:0 = 1
ENDIF

;=======================================================================
;指定したマスに進入可能か
;=======================================================================
@CAN_ENTER_95, ARG, ARG:1
SELECTCASE DA:ARG:(ARG:1)
ENDSELECT
CALL CAN_ENTER,ARG,ARG:1
RETURN RESULT

;=======================================================================
;フロアデータ
;=======================================================================
@MAKE_FLOOR_95
SELECTCASE FLAG:現M
	CASE 0
		FLAG:最大X = 10
		FLAG:最大Y = 23 
							;	  01234567890
   		CALL MAKE_FLOOR_LINE, 0, "    a     "
   		CALL MAKE_FLOOR_LINE, 1, " 1  1 1 1 "
   		CALL MAKE_FLOOR_LINE, 2, " 1  111 1 "
   		CALL MAKE_FLOOR_LINE, 3, " 11 1 111 "
   		CALL MAKE_FLOOR_LINE, 4, "  1 1 1 1 "
   		CALL MAKE_FLOOR_LINE, 5, "  1 111 1 "
   		CALL MAKE_FLOOR_LINE, 6, "  1 1 1 1 "
   		CALL MAKE_FLOOR_LINE, 7, " 1111 1 1 "
   		CALL MAKE_FLOOR_LINE, 8, "  1 1 1   "
   		CALL MAKE_FLOOR_LINE, 9, "  1 1 1   "
   		CALL MAKE_FLOOR_LINE,10, "  1 11111 "
   		CALL MAKE_FLOOR_LINE,11, "        1 "
   		CALL MAKE_FLOOR_LINE,12, "   1111 1 "
   		CALL MAKE_FLOOR_LINE,13, "   1  1 1 "
   		CALL MAKE_FLOOR_LINE,14, "   1  111 "
   		CALL MAKE_FLOOR_LINE,15, "   1      "
   		CALL MAKE_FLOOR_LINE,16, " 11111    "
   		CALL MAKE_FLOOR_LINE,17, "     1111 "
   		CALL MAKE_FLOOR_LINE,18, "  1  1  1 "
   		CALL MAKE_FLOOR_LINE,19, "  11 11 1 "
   		CALL MAKE_FLOOR_LINE,20, "   1  1 1 "
   		CALL MAKE_FLOOR_LINE,21, "   1111   "
   		CALL MAKE_FLOOR_LINE,22, "    8     "
							;	  01234567890
	CASE 1
		FLAG:最大X = 10
		FLAG:最大Y = 33
							;	  01234567890
   		CALL MAKE_FLOOR_LINE, 0, "  b       "
   		CALL MAKE_FLOOR_LINE, 1, "  1   1   "
   		CALL MAKE_FLOOR_LINE, 2, "  111 1   "
   		CALL MAKE_FLOOR_LINE, 3, "    1 1 c "
   		CALL MAKE_FLOOR_LINE, 4, "  1 1 1 1 "
   		CALL MAKE_FLOOR_LINE, 5, "  111 111 "
   		CALL MAKE_FLOOR_LINE, 6, "  1     1 "
   		CALL MAKE_FLOOR_LINE, 7, "  1     1 "
   		CALL MAKE_FLOOR_LINE, 8, "  111   1 "
   		CALL MAKE_FLOOR_LINE, 9, "    1 111 "
   		CALL MAKE_FLOOR_LINE,10, " 11111 1  "
   		CALL MAKE_FLOOR_LINE,11, " 1 1   11 "
   		CALL MAKE_FLOOR_LINE,12, " 1 1111 1 "
   		CALL MAKE_FLOOR_LINE,13, " 1      1 "
   		CALL MAKE_FLOOR_LINE,14, " 1 11 1 1 "
   		CALL MAKE_FLOOR_LINE,15, " 1 1  111 "
   		CALL MAKE_FLOOR_LINE,16, " 111111   "
   		CALL MAKE_FLOOR_LINE,17, "  1   1   "
   		CALL MAKE_FLOOR_LINE,18, "  1 T 1   "
   		CALL MAKE_FLOOR_LINE,19, " 1111111  "
   		CALL MAKE_FLOOR_LINE,20, "  11111   "
   		CALL MAKE_FLOOR_LINE,21, " 1111111  "
   		CALL MAKE_FLOOR_LINE,22, "  11111   "
   		CALL MAKE_FLOOR_LINE,23, " 1111111  "
   		CALL MAKE_FLOOR_LINE,24, "  11111   "
   		CALL MAKE_FLOOR_LINE,25, " 1111111  "
   		CALL MAKE_FLOOR_LINE,26, "  11111   "
   		CALL MAKE_FLOOR_LINE,27, "  1       "
   		CALL MAKE_FLOOR_LINE,28, "  1   111 "
   		CALL MAKE_FLOOR_LINE,29, "  1   1 1 "
   		CALL MAKE_FLOOR_LINE,30, "  11111 1 "
   		CALL MAKE_FLOOR_LINE,31, "    1     "
   		CALL MAKE_FLOOR_LINE,32, "    A     "
   		
	CASE 2
		FLAG:最大X = 35
		FLAG:最大Y = 10
							;	  012345678901234567890123456789012345
   		CALL MAKE_FLOOR_LINE, 0, "  d                                "
   		CALL MAKE_FLOOR_LINE, 1, "  1   1   11   1111      1   111 e "
   		CALL MAKE_FLOOR_LINE, 2, "  1 1111111   11      11111  1   1 "
   		CALL MAKE_FLOOR_LINE, 3, "  1  1    11111     1 1   1 1111 1 "
   		CALL MAKE_FLOOR_LINE, 4, "  1  1111   1     111111 11 1  1 1 "
   		CALL MAKE_FLOOR_LINE, 5, "  1     1  11   111    1 1  1  1 1 "
   		CALL MAKE_FLOOR_LINE, 6, " 111111 11 1      111 11 11 1  1 1 "
   		CALL MAKE_FLOOR_LINE, 7, " 1    1  1 1111     1 1     1  1 1 "
   		CALL MAKE_FLOOR_LINE, 8, " 111  1111    1     1 1111111  111 "
   		CALL MAKE_FLOOR_LINE, 9, "              B     C              "
							;	  012345678901234567890123456789012345

	CASE 3
		FLAG:最大X = 17
		FLAG:最大Y = 9
							;	  012345678901234567
   		CALL MAKE_FLOOR_LINE, 0, "                 "
   		CALL MAKE_FLOOR_LINE, 1, "  1 % 1   1 & 1  "
   		CALL MAKE_FLOOR_LINE, 2, " 1111111 1111111 "
   		CALL MAKE_FLOOR_LINE, 3, "  11111   11111  "
   		CALL MAKE_FLOOR_LINE, 4, " 1111111 1111111 "
   		CALL MAKE_FLOOR_LINE, 5, "  11111   11111  "
   		CALL MAKE_FLOOR_LINE, 6, " 1111111 1111111 "
   		CALL MAKE_FLOOR_LINE, 7, "  1 1 1   1 1 1  "
   		CALL MAKE_FLOOR_LINE, 8, "    D       E    "
							;	  0123456789

			CASEELSE
ENDSELECT

;=======================================================================
;タイル調整
;=======================================================================
@MAKE_FLOOR_LINE_COMMON_95, ARG, ARG:1, ARG:2
#LOCALSIZE 30
;LOCAL:3 宝箱 ダンジョンフラグ:84~99
;LOCAL:4 イベント
;(0/0)でLOCALを消去
SIF ARG:1 == 0 && ARG:2 == 0
	VARSET LOCAL
SELECTCASE ARG
	CASE 3
		IF GETBIT(ダンジョンフラグ:(FLAG:現ダンジョン):(FLAG:現M+70), LOCAL:3)
			DA:(ARG:1):(ARG:2) = 1
		ELSE
			DA:(ARG:1):(ARG:2) = FLAG:現M *1000 + LOCAL:3 * 10 + 3
		ENDIF
		LOCAL:3++
	CASE 4
		DA:(ARG:1):(ARG:2) = FLAG:現M *1000 + LOCAL:4 * 10 + 4
		LOCAL:4++
	CASE 5
		;DA:(ARG:1):(ARG:2) = FLAG:現M *1000 + LOCAL:5 * 10 + 5
		;LOCAL:5++
	CASE 6
		DA:(ARG:1):(ARG:2) = FLAG:現M *1000 + LOCAL:6 * 10 + 6
		LOCAL:6++
	CASE 7
		DA:(ARG:1):(ARG:2) = FLAG:現M *1000 + LOCAL:7 * 10 + 7
		LOCAL:7++
	CASE 8
		DA:(ARG:1):(ARG:2) = FLAG:現M *1000 + LOCAL:8 * 10 + 8
		LOCAL:8++
	CASE 9
		DA:(ARG:1):(ARG:2) = FLAG:現M *1000 + LOCAL:9 * 10 + 9
		LOCAL:9++

ENDSELECT
;=======================================================================
;特殊タイル表示
;=======================================================================
@TILE_MARK_COMMON_95_1, ARG , ARG:1 , ARG:2
SELECTCASE ARG / 10
	CASE 10 , 20 , 30 , 40 , 50
		RESULTS = ↑
	CASE 11 , 21 , 31 , 41 , 51
		RESULTS = ↓
	CASEELSE
		RETURN 1
ENDSELECT

;=======================================================================
;タイル定義
;=======================================================================
@DEFINE_TILES_95, ARGS, ARG, ARG:1
SELECTCASE ARGS
	CASE "a"
		RETURN 101
	CASE "A"
		RETURN 111
	CASE "b"
		RETURN 201
	CASE "B"
		RETURN 211
	CASE "c"
		RETURN 301
	CASE "C"
		RETURN 311
	CASE "d"
		RETURN 401
	CASE "D"
		RETURN 411
	CASE "e"
		RETURN 501
	CASE "E"
		RETURN 511

	CASE "%"
		RETURN 3004
	CASE "&"
		RETURN 3104
ENDSELECT

;=======================================================================
;[5]調べる　実行時のイベント
;=======================================================================
@EVENT_CHECK_DUNGEON_95
CALL EVENT_DUNGEON_95
RETURN RESULT

;=======================================================================
;タイル進入時のイベント
;=======================================================================
@EVENT_ENTER_DUNGEON_95,ARG
;ARG = 進入時の向き　0の場合ワープなど
CALL EVENT_DUNGEON_95, ARG , 0
RETURN RESULT

@EVENT_DUNGEON_95, ARG, ARG:1
#DIM 交渉可能キャラ , 7
SELECTCASE DA:(FLAG:現X):(FLAG:現Y) % 10
;==========
;ワープの処理
;==========
	CASE 1
	CALL FLOOR_95
	RETURN RESULT
;==========
;出口の処理
;==========
	CASE 8
		IF ダンジョンフラグ:(FLAG:現ダンジョン):0 == 2
		CALL DUNGEON_EXIT
		ELSE
		CALL MESSAGE_WINDOW_D, "ナオミ", "奥にいる悪魔を倒すまでは脱出しないわよ"
		FLAG:現Y -= 1
		ENDIF
	RETURN 1
;==========
;扉の処理
;==========
	CASE 2
		CALL DUNGEON_DOOR,ARG
		RETURN 1
;==========
;イベント
;==========
	CASE 4
		SELECTCASE DA:(FLAG:現X):(FLAG:現Y) / 10
	CASE 300
	IF ダンジョンフラグ:95:0 == 1
		CALL MESSAGE_WINDOW_D, "", "＞大列石霊室"
		CALL MESSAGE_WINDOW_D, "ナオミ", "こちらは全てを生んだ原初の水、アプスーが眠っているようね。/どうする…？"
		CALL INPUT_SELECT_D, @"[1]アプスーと戦う/[2]戦わない"
		SELECTCASE RESULT
		CASE 1
		ダンジョンフラグ:95:1 = 1
		CALL MESSAGE_WINDOW_D, "ナオミ", "そうね。倒すのなら/完全に目覚める前の今がチャンスかもしれない。/一気に始末してしまいましょう。"
		CALL MESSAGE_WINDOW_D, "ナオミ", "いざ！　古き神アプスーよ！/我ここに戦いを挑まん！/時も光もない場所へ帰るがいい！"
		CALL MESSAGE_WINDOW_D, "アプスー", "……戦イヨリ離レテ久シク我ニ/何故ソノ剣ヲフルウ人ノ子ヨ……"
		CALL MESSAGE_WINDOW_D, "アプスー", "呪ワレシ血ヨリ生マレシ/汝ラゴトキニ倒サレヨウカ……"
		FLAG:逃走不可フラグ = 1
		FLAG:会話不能フラグ = 1
		FLAG:先制不意打ちキャンセル = 1
			CALL SET_ENEMY,9,[[キャラ:アプスー]],50,0,1
			CFLAG:(CHARANUM-1):ＨＰ補正 = 5000
			CFLAG:(CHARANUM-1):ＭＰ補正 = 5000
			CFLAG:(CHARANUM-1):行動回数 = 2
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
		CALL BATTLE_START
		FLAG:逃走不可フラグ = 0
		FLAG:会話不能フラグ = 0
		FLAG:先制不意打ちキャンセル = 0
		CALL MESSAGE_WINDOW_D, "ナオミ", "フゥ…少々てこずったわね。/これで不完全というのだから……"
		CALL MESSAGE_WINDOW_D, "ナオミ", "できれば使い魔にしたかったのだけど……/ちょっと無理な話だったわね。"
		CALL MESSAGE_WINDOW_D, "ナオミ", "それにしても、計画のメインシステムを/配置するらしけど/これほどのスペースが必要なのかしら"
		CALL MESSAGE_WINDOW_D, "ナオミ", "マニトゥ…/確かそんな名前だったはず……"
		CALL MESSAGE_WINDOW_D, "声", "愚カナ人間ヨ……/神ガコノ程度デ死ヌト思ッテイルノカ……/自分ノ愚カサヲ悔イナガラ逝クガイイ……"
		CALL MESSAGE_WINDOW_D, "", "＞アプスーのいた場所に強い力で引き込まれている……！"
		CALL MESSAGE_WINDOW_D, "ナオミ", "そ、そんな私達が勝ったはずよ……"
		CALL MESSAGE_WINDOW_D, "ナオミ", "い、息が……このままだと……"
		CALL MESSAGE_WINDOW_D, "", "＞朦朧とする意識の中、あなたはトラエストストーンでナオミと共に脱出した。"
		CALL MESSAGE_WINDOW_D, "", "………/……/…"
		CALL MESSAGE_WINDOW_D, "", "＞あなたとナオミは二条門地下から脱出した"
		CALL MESSAGE_WINDOW_D, "ナオミ", "何とか生きて戻って来れたわね……/あなたのおかげよ。ありがとう。"
		CALL MESSAGE_WINDOW_D, "ナオミ", "…あなたなら信用できそうね/手伝って欲しいことがあるの/こっちから依頼を出すからよければ受けてくれる？"
		CALL MESSAGE_WINDOW_D, "", "＞どうやらナオミから依頼の話があるらしい。彼女と別れ報酬を受け取った。/口座に￥30000が支払われ、名声100を得た"
		MONEY += 30000
		FLAG:名声 += 100
		FLAG:脱出スキル禁止 = 0
		LOCAL = GETCHARA([[キャラ:ナオミ]])
		SIF LOCAL >= 0 && CFLAG:LOCAL:引継ぎ回数 == 0
		CALL DEL_GUEST, LOCAL, "Ursa Major Bow", "Earl's Rock", "Type 178 Ears", "Maximilian", "Laurin Ring", "Mirage Boots", "Sorcerer Badge"
		ダンジョンフラグ:95:0 = 2
		FLAG:11561 = 1
		FLAG:脱出 = 1
		CASE 2
		CALL MESSAGE_WINDOW_D, "ナオミ", "そうね、慎重に決めましょ。"
		ENDSELECT
	ENDIF
	CASE 310
	IF ダンジョンフラグ:95:0 == 1
		CALL MESSAGE_WINDOW_D, "", "＞大列石霊室"
		CALL MESSAGE_WINDOW_D, "ナオミ", "こちらは大いなる海の力、ティアマトが眠っているようね。/どうする…？"
		CALL INPUT_SELECT_D, @"[1]ティアマトと戦う/[2]戦わない"
		SELECTCASE RESULT
			CASE 1
		ダンジョンフラグ:95:1 = 2
		CALL MESSAGE_WINDOW_D, "ナオミ", "そうね…/倒すなら、完全に目覚める前の/今がチャンスよね。"
		CALL MESSAGE_WINDOW_D, "ナオミ", "いざ！　古き神ティアマトよ！/我ここに戦いを挑まん！/呪うことなくここに消えよ！"
		CALL MESSAGE_WINDOW_D, "ティアマト", "モハヤ争イヲ忘レシ我ヲ眠リカラ覚マサントスル……"
		FLAG:逃走不可フラグ = 1
		FLAG:会話不能フラグ = 1
		FLAG:先制不意打ちキャンセル = 1
			CALL SET_ENEMY,9,[[キャラ:ティアマト]],50,0,1
			CFLAG:(CHARANUM-1):ＨＰ補正 = 5000
			CFLAG:(CHARANUM-1):ＭＰ補正 = 5000
			CFLAG:(CHARANUM-1):行動回数 = 2
			ABL:(CHARANUM-1):スキル1 = [[スキル:ジオンガ]]
			ABL:(CHARANUM-1):スキル2 = [[スキル:アギラオ]]
			ABL:(CHARANUM-1):スキル3 = [[スキル:ブフーラ]]
			ABL:(CHARANUM-1):スキル4 = [[スキル:メギド]]
			ABL:(CHARANUM-1):スキル5 = [[スキル:雷の洗礼]]
			BASE:(CHARANUM-1):剣撃 = 150
			BASE:(CHARANUM-1):飛具 = 150
			BASE:(CHARANUM-1):打撃 = 150
			BASE:(CHARANUM-1):戦技 = 150
			BASE:(CHARANUM-1):火炎 = 50
			BASE:(CHARANUM-1):氷結 = 50
			BASE:(CHARANUM-1):電撃 = 50
			BASE:(CHARANUM-1):衝撃 = 50
			BASE:(CHARANUM-1):神経 = 0
			BASE:(CHARANUM-1):精神 = 0
			BASE:(CHARANUM-1):破魔 = 0
			BASE:(CHARANUM-1):呪殺 = 0
			BASE:(CHARANUM-1):地変 = 50
			BASE:(CHARANUM-1):水撃 = 50
			BASE:(CHARANUM-1):疾風 = 50
			BASE:(CHARANUM-1):重力 = 50
			BASE:(CHARANUM-1):核熱 = 50
			CALL SYNC_STATUS,(CHARANUM-1)
			CALL HEALTH_CHARA,(CHARANUM-1)
			CALL BATTLE_START
			FLAG:逃走不可フラグ = 0
			FLAG:会話不能フラグ = 0
			FLAG:先制不意打ちキャンセル = 0
		CALL MESSAGE_WINDOW_D, "ナオミ", "フゥ…少々てこずったわね。/これで不完全というのだから……"
		CALL MESSAGE_WINDOW_D, "ナオミ", "できれば使い魔にしたかったのだけど……/ちょっと無理な話だったわね。"
		CALL MESSAGE_WINDOW_D, "ナオミ", "それにしても、計画のメインシステムを/配置するらしけど/これほどのスペースが必要なのかしら"
		CALL MESSAGE_WINDOW_D, "ナオミ", "マニトゥ…/確かそんな名前だったはず……"
		CALL MESSAGE_WINDOW_D, "声", "愚カナ人間ヨ……/神ガコノ程度デ死ヌト思ッテイルノカ……/自分ノ愚カサヲ悔イナガラ逝クガイイ……"
		CALL MESSAGE_WINDOW_D, "", "＞ティアマトのいた場所に強い力で引き込まれている……！"
		CALL MESSAGE_WINDOW_D, "ナオミ", "そ、そんな私達が勝ったはずよ……"
		CALL MESSAGE_WINDOW_D, "ナオミ", "い、息が……このままだと……"
		CALL MESSAGE_WINDOW_D, "", "＞朦朧とする意識の中、あなたはトラエストストーンでナオミと共に脱出した。"
		CALL MESSAGE_WINDOW_D, "", "………/……/…"
		CALL MESSAGE_WINDOW_D, "", "＞あなたとナオミは二条門地下から脱出した"
		CALL MESSAGE_WINDOW_D, "ナオミ", "何とか生きて戻って来れたわね……/あなたのおかげよ。ありがとう。"
		CALL MESSAGE_WINDOW_D, "ナオミ", "…あなたなら信用できそうね/手伝って欲しいことがあるの/こっちから依頼を出すからよければ受けてくれる？"
		CALL MESSAGE_WINDOW_D, "", "＞どうやらナオミから依頼の話があるらしい。彼女と別れ報酬を受け取った。/口座に￥30000が支払われ、名声100を得た"
		MONEY += 30000
		FLAG:名声 += 100
		FLAG:脱出スキル禁止 = 0
		LOCAL = GETCHARA([[キャラ:ナオミ]])
		SIF LOCAL >= 0 && CFLAG:LOCAL:引継ぎ回数 == 0
		CALL DEL_GUEST, LOCAL, "Ursa Major Bow", "Earl's Rock", "Type 178 Ears", "Maximilian", "Laurin Ring", "Mirage Boots", "Sorcerer Badge"
		ダンジョンフラグ:95:0 = 2
		FLAG:脱出 = 1
		CASE 2
		CALL MESSAGE_WINDOW_D, "ナオミ", "そうね、慎重に決めましょ。"
		ENDSELECT
	ENDIF

	ENDSELECT
	ENDSELECT
RETURN 0
;-----------------------------------------------------------------------
;タイルイベント
;-----------------------------------------------------------------------
@FLOOR_95, ARG
#LOCALSIZE 4
#LOCALSSIZE 2
SELECTCASE DA:(FLAG:現X):(FLAG:現Y) / 10
	;ワープゾーン
	CASE 0
		RETURN 0
	CASEELSE
		;ワープゾーン関係
		;100の位がID
		;10の位が0なら上層に、1なら下層に行く
		LOCAL = DA:(FLAG:現X):(FLAG:現Y) / 10 % 10 ? DA:(FLAG:現X):(FLAG:現Y) -10 # DA:(FLAG:現X):(FLAG:現Y) + 10
		LOCAL:1 = DA:(FLAG:現X):(FLAG:現Y) / 10 % 10 ? FLAG:現M - 1 # FLAG:現M + 1
		CALL SHOW_PICTURE, "EMPTY"
		CALL DUNGEON_WORP_ID, LOCAL:1, LOCAL, 1
ENDSELECT
;-----------------------------------------------------------------------
;ゲストキャラ
;-----------------------------------------------------------------------
@SET_GUEST_D95
	CALL ADD_GUEST_COMPANION([[キャラ:ナオミ]], 300)
	LOCAL = GETCHARA([[キャラ:ナオミ]])
	BASE:LOCAL:ＭＡＧ = 50000
	EQUIP:LOCAL:剣 = [[アイテム:Ursa Major Bow]]
	EQUIP:LOCAL:銃 = [[アイテム:Earl's Rock]]
	EQUIP:LOCAL:頭 = [[アイテム:Type 178 Ears]]
	EQUIP:LOCAL:胴 = [[アイテム:Maximilian]]
	EQUIP:LOCAL:腕 = [[アイテム:Laurin Ring]]
	EQUIP:LOCAL:足 = [[アイテム:Mirage Boots]]
	EQUIP:LOCAL:アクセサリ = [[アイテム:Sorcerer Badge]]
	CALL SYNC_STATUS, LOCAL
	CALL HEALTH_CHARA, LOCAL

;=======================================================================
;必要レベル目安
;推奨LV 雑魚最低LV 雑魚最高LV ボスLV 
;=======================================================================
@GET_DUNGEON_LV_95
RETURN 40, 35 , 42, 50
;=======================================================================
;エンカウント率
;=======================================================================
@ENCOUNT_RATE_95
	FLAG:エンカウント率 = FLAG:未遭遇歩数*5 +3
;=======================================================================
;エンカウント処理
;=======================================================================
@CHECK_ENCOUNT_95
IF RAND:100 < FLAG:エンカウント率
	CALL ENEMY_TABLE
	RETURN 1
ELSE
	FLAG:未遭遇歩数 += 1
	RETURN 0
ENDIF
;=======================================================================
;敵の種族の種類数
;=======================================================================
@CLASS_NUM_95
RETURN CLASS_NUM_COMMON("上級")
;=======================================================================
;敵の総数
;ARGは出現する敵の種類です
;=======================================================================
@ENEMY_NUM_95, ARG
RETURN ENEMY_NUM_COMMON("上級", ARG)
;=======================================================================
;敵の種類
;=======================================================================
@ENEMY_95, ARG
SELECTCASE FLAG:現M
CASE 0
SELECTCASE RAND:7
	CASE IS < 1
		RETURN [[キャラ:ドヴェルガー]], 35
	CASE IS < 2
		RETURN [[キャラ:ヌエ]],35
	CASE IS < 3
		RETURN [[キャラ:ダフネ]], 35
	CASE IS < 4
		RETURN [[キャラ:アルラウネ]], 35
	CASE IS < 5
		RETURN [[キャラ:スチュパリデス]], 38
	CASE IS < 6
		RETURN [[キャラ:ウェンディゴ]], 36
	CASE IS < 7
		RETURN [[キャラ:コープス]], 35
ENDSELECT

CASE 1
SELECTCASE RAND:7
	CASE IS < 1
		RETURN [[キャラ:ミズチ]], 39
	CASE IS < 2
		RETURN [[キャラ:オルトロス]], 39
	CASE IS < 3
		RETURN [[キャラ:トラルテクトリ]], 39
	CASE IS < 4
		RETURN [[キャラ:クドラク]], 39
	CASE IS < 5
		RETURN [[キャラ:バロール]], 37
	CASE IS < 6
		RETURN [[キャラ:カマソッソ]], 37
	CASE IS < 7
		RETURN [[キャラ:くちさけ]], 38
ENDSELECT

CASE 2 , 3 , 4
SELECTCASE RAND:6
	CASE IS < 1
		RETURN [[キャラ:パイモン]], 42
	CASE IS < 2
		RETURN [[キャラ:グレイマン]], 42
	CASE IS < 3
		RETURN [[キャラ:ムシュフシュ]],40
	CASE IS < 4
		RETURN [[キャラ:ヴィヴィアン]], 43
	CASE IS < 5
		RETURN [[キャラ:スクーグスロー]], 42
	CASE IS < 6
		RETURN [[キャラ:ツィツィミトル]], 41
ENDSELECT

ENDSELECT

;=======================================================================
;輪姦参加悪魔
;=======================================================================
@DUNGEON_RAPE_DEVIL_95
;ランダムにどの悪魔が出るか決定
;RETURN CSV番号 , 人数 , レベル
SELECTCASE RAND:3
	CASE 0
		RETURN [[キャラ:ヌエ]] , 3 + RAND:10 , CSVBASE([[キャラ:ヌエ]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 1
		RETURN [[キャラ:クドラク]] , 3 + RAND:10 , CSVBASE([[キャラ:クドラク]] , GETNUM(BASE , "LV") , 0) + RAND:3
	CASE 2
		RETURN [[キャラ:ムシュフシュ]] , 3 + RAND:10 , CSVBASE([[キャラ:ムシュフシュ]] , GETNUM(BASE , "LV") , 0) + RAND:3
ENDSELECT

