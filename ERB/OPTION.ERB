;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
;
;	Module		:OPTION.ERB
;	Facility	:オプション設定関連の関数群です。
;
;	Licence		:ライセンスフリー
;
;	Modification Data:
;
;	Edit	Date			Author					Reason
;	001		20XX/XX/XX		----					新規作成
;	002		2011/02/04		黒天					労役実行確認省略オプション追加
;	003		2011/03/10		Ｎ鳥					夜這い不許可性別設定オプション追加
;	004		2011/04/07		Ｎ鳥					ＮＴＲ機能設定オプション追加
;	005		2011/04/08		黒天					休憩確認設定オプション追加
;	006		2011/04/25		P						PALAM表示設定と控え表示設定のオプションを追加
;	007		2011/05/05		黒天					休憩確認設定オプション拡張。[休憩]コマンドの[朝まで休憩]変更を追加
;	008		2011/06/23		黒天					妊娠機能拡張。[Crossdresser]の妊娠を選択できるように。
;	009		2011/09/08		Ｎ鳥					ＮＴＲ関係のオプションをひとまとめに
;	010		2012/02/28		P						入力モード切替を削除。また変更後のメッセージでWAITするように統一
;	011		2012/05/31		ネトリス				帳簿閲覧用の処理を追加
;	012		2012/12/09		P						悪魔合体のキャラ表示数設定を追加
;	013		2013/01/12		ネトリス				合体用ソフトクイック設定を追加
;	014		2013/03/15		ネトリス				野良悪魔素質ランダム設定を追加
;	015		2013/XX/XX		ひみつ					リスト表示数設定と合体用ソフトクイック設定(改)を追加
;	016		2013/12/01		J( 'ー`)し				ひみつ氏追加分と競合する悪魔合体のキャラ表示数設定と合体用ソフトクイック設定をコメントアウトしてマージ
;	017		2015/07/28		ネトリス				仲魔のTALK設定を追加
;	018		2016/09/25		多治見国々				ダンジョンの推奨レベルを表示するオプション追加。
;	019		2017/02/07		名無し					自動レベルＵＰの選択オプションを追加
;	020		2017/09/11		名無					能力確認で開いた表示情報を記録するオプション追加
;	021		2017/09/23		名無					ガチャモードを追加
;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#

@SHOPCOMABLE_400
RESULTS = Settings
RETURN 1

@SHOP_COM_400

DRAWLINE
PRINTL Please choose the setting to change
PRINTFORML %"[ 0] - Text settings", 50, LEFT%
PRINTFORML %"[ 1] - Cumshot settings", 50, LEFT%
PRINTFORML %"[ 2] - Clothing settings", 50, LEFT%
PRINTFORM %"[ 3] - Pregnancy", 50, LEFT%[
SELECTCASE FLAG:Pregnant機能
	CASE 0
		PRINT OFF
	CASE 1
		PRINT ON
	CASE 2
		PRINT ON(Traps are excluded)
ENDSELECT
PRINTL ]
;PRINTFORML %"[ 4] - Input mode settings", 50, LEFT%[\@ FLAG:入力モード ? Mouse  # Keyboard \@]
PRINTFORML %"[ 4] - Affinity color settings", 50, LEFT%
PRINTFORML %"[ 5] - Mufufu development switch", 50, LEFT%[\@ FLAG:ムフフ展開 ? Available  # Unavailable \@]
PRINTFORML %"[ 6] - Childbirth", 50, LEFT%[\@ FLAG:出産機能ONOFF ? ON  # OFF \@]
PRINTFORML %"[ 7] - ＳＭ extension switch", 50, LEFT%[\@ FLAG:44 ? Available  # Unavailable \@]
PRINTFORML %"[ 8] - Auto-recovery settings", 50, LEFT%
PRINTFORML %"[ 9] - Outdoor play extension switch", 50, LEFT%[\@ FLAG:46 ? Available  # Unavailable \@]
PRINTFORML %"[10] - Tentacle extension switch", 50, LEFT%[\@ FLAG:47 ? Available  # Unavailable \@]
PRINTFORML %"[11] - Who can TALK", 50, LEFT%[\@ FLAG:主人以外TALK可能 ? Master or those with surrender markings  # Only the master \@]
PRINTFORM %"[12] - Non-sexual training features switch", 50, LEFT%[
SELECTCASE FLAG:未調教時陥落
	CASE 0
		PRINT Unavailable
	CASE 1
		PRINT Only for some humans
	CASE 2
		PRINT For everyone
ENDSELECT
PRINTL ]
PRINTFORM %"[13] - Action settings in Dungeon", 50, LEFT%[
SELECTCASE FLAG:ダンジョン内操作設定
	CASE 0
		PRINT Default
	CASE 1
		PRINT ＦＰＳ
ENDSELECT
PRINTL ]
PRINTFORM %"[14] - Two Input Settings Y/N ", 50, LEFT%[
SELECTCASE FLAG:二択入力設定
	CASE 0
		PRINT Default
	CASE 1
		PRINT Yes / No, will only react to 'Y' or 'N' key presses.
	CASE 2
		PRINT Reacts to both key presses and mouse clicks.
ENDSELECT
PRINTL ]
PRINTFORM %"[15] - Skill attribute indication switch", 50, LEFT%[
SELECTCASE FLAG:スキル属性表示設定
	CASE 0
		PRINT Default
	CASE 1
		PRINT Additional Display
ENDSELECT
PRINTL ]
;---- EDIT 労役実行確認省略オプション追加(2011/02/04) ADD START ---------
PRINTFORM %"[16] - Work execution confirmation switch", 50, LEFT%[
SELECTCASE FLAG:労役実行確認省略設定
	CASE 0
		PRINT Do not omit
	CASE 1
		PRINT Omit
ENDSELECT
PRINTL ]
;---- EDIT 労役実行確認省略オプション追加(2011/02/04) ADD END -----------
;---- EDIT 夜這い不許可性別設定オプション追加(2011/03/10) ADD START ---------
PRINTFORM %"[17] - Night crawling suppression settings", 50, LEFT%[
SELECTCASE FLAG:夜這い不許可性別
	CASE 0
		PRINT All permitted
	CASEELSE
		PRINT Not permitted: 
		SIF FLAG:夜這い不許可性別 & 1
			PRINT ♂
		SIF FLAG:夜這い不許可性別 & 4
			PRINT ♀
		SIF FLAG:夜這い不許可性別 & 2
			PRINT ？
ENDSELECT
PRINTL ]
;---- EDIT ＮＴＲ機能追加(2011/04/07) ADD START ---------
PRINTFORML %"[18] - ＮＴＲ switch", 50, LEFT%[\@ FLAG:ＮＴＲ機能 ?  ON # OFF \@]
;---- EDIT ＮＴＲ機能追加(2011/04/07) ADD END -----------
;---- EDIT 夜這い不許可性別設定オプション追加(2011/03/10) ADD END -----------
PRINTFORM %"[19] - Rest comfirmation", 50, LEFT%
SELECTCASE FLAG:休憩確認フラグ 
	CASE 0
		PRINTL [Confirm]
	CASE 1
		PRINTL [Do not confirm]
	CASE 2
		PRINTL [Do not confirm + Always break for morning]
ENDSELECT
PRINTFORM %"[20] - PALAM display settings", 50, LEFT%
SELECTCASE FLAG:PALAM表示設定
	CASE 0
		PRINTL [Ａ type]
	CASE 1
		PRINTL [Ｂ type]
	CASE 2
		PRINTL [Ｃ type]
ENDSELECT
PRINTFORM %"[21] - Training target setting", 50, LEFT%
IF FLAG:控え利用設定 == 0
	PRINTFORML [Targetting]
ELSEIF FLAG:控え利用設定 == 1
	PRINTFORML [Training]
ELSE
	PRINTFORML [Shop]
ENDIF
PRINTFORML %"[22] - Number of Command Lines", 50, LEFT%
PRINTFORML %"[23] - View opening", 50, LEFT%[\@ GLOBAL:4 ? Do not # View it \@]
PRINTFORML %"[24] - Bar Animation on Right-Clicks ", 50, LEFT%[\@ FLAG:バーアニメスキップ ? Skip # Accelerate \@]
PRINTFORML %"[25] - Message window settings", 50, LEFT%
;PRINTFORM %"[26] - 悪魔合体のキャラ表示数設定 ", 50, LEFT%
;;導入直後用の処理
;SIF FLAG:悪魔合体リスト表示数設定 == 0
;	FLAG:悪魔合体リスト表示数設定 = 20
;PRINTFORML [Current Limit :{FLAG:悪魔合体リスト表示数設定}]
;PRINTFORML %"[28] - Software Settings ", 50, LEFT%
PRINTFORML %"[26] - List Display Settings ", 50, LEFT%[Current display length:{リスト表示数()}]
PRINTFORML %"[27] - Software Settings ", 50, LEFT%
PRINTFORML %"[28] - Status Screen Settings ", 50, LEFT%
PRINTFORML %"[29] - Randomize Wild Demons ", 50, LEFT%
PRINTFORML %"[30] - Combat Mercy Events", 50, LEFT%[\@ FLAG:戦闘時命乞いイベント ? ON  # OFF \@]
SIF FLAG:ムフフ展開
	PRINTFORML %"[31] - Rape Events", 50, LEFT%[\@ GETBIT(FLAG:押し倒されイベント,0) ? ON  # OFF \@]
PRINTFORM %"[32] - Level Up Interface", 50, LEFT%
;\@ FLAG:レベルアップ時インターフェース設定 ? New I/F  # Default I/F \@]
SELECTCASE FLAG:レベルアップ時インターフェース設定
	CASE 0
		PRINTL [Default I/F]
	CASE 1
		PRINTL [New I/F]
	CASE 2
		PRINTL [Auto I/F]
		;
ENDSELECT
PRINTFORML %"[33] - Demon TALK Setting", 50, LEFT%[\@ FLAG:仲魔会話のお任せ設定 ? Delegate  # Manual \@]
;仲魔に任せる  # 自分で指示する
PRINTFORML %"[34] - Dungeon Recommended Lvl display", 50, LEFT%[\@ FLAG:ダンジョンの推奨レベル表示設定 ? View  # Do not \@]
PRINTFORML %"[35] - Appearance ・ Three Size Function", 50, LEFT%[\@ SETTING_IS_3SIZE() ? Enabled  # Disabled \@]
;外見・スリーサイズ機能	利用する	利用しない
;PRINTFORML %"[35] - 装備の負の影響のオンオフ", 50, LEFT%[しんのゆうしゃになりま\@ TALENT:MASTER:253 ? せん # す \@]
PRINTFORML %"[36] - 能力確認で最後に開いた表示情報", 50, LEFT%[\@ FLAG:表示情報ページ保存 ? 保存する  # 保存しない \@]
PRINTFORM %"[37] - ソシャゲ風ガチャ", 50, LEFT%
SELECTCASE FLAG:悪魔ガチャモード
	CASE 0
		PRINTL [なし]
	CASE 1
		PRINTL [ガチャ起動]
	CASE 2
		PRINTL [ガチャ悪魔オンリー]
ENDSELECT
PRINTFORML %"[97] - Timelimit options ", 50, LEFT%
PRINTFORML %"[99] - Clear records ", 50, LEFT%
;帳簿の消去

IF FLAG:DEBUG
	PRINTFORM %"[500] - Combat Boycott Settings", 50, LEFT%
	SELECTCASE FLAG:戦闘時ボイコット設定
		CASE 0
			PRINTL [None]
		CASE 1
			PRINTL [FLAVOR]
		CASE 2
			PRINTL [NOMAL]
	ENDSELECT

	PRINTFORML %"[501] - Extra event settings", 50, LEFT%[\@ GETBIT(FLAG:EXTRAイベント設定, 0) ? Available  # Unavailable \@]

	PRINTFORM %"[502] - Calculation of Human Combat Stats", 50, LEFT%
	SELECTCASE FLAG:人間戦闘ステ設定
		CASE 0
			PRINTL [Normal(Vanilla)]
		CASE 1
			PRINTL [Accuracy Improvement]
		CASE 2
			PRINTL [Overall Stat Raise]
		CASE 3
			PRINTL [Equipment Enhancement (Level 1/2%)]
	ENDSELECT
	PRINTFORM %"[503] - 戦闘時の素質影響設定", 50, LEFT%
	SELECTCASE BATTLE_SETTING_IS_TALENT()
		CASE 0
			PRINTL [Normal(vanilla)]
		CASE 1
			PRINTL [Affinity effect]
	ENDSELECT
	PRINTFORM %"[504] - 戦闘時のバステ必中設定", 50, LEFT%
	SELECTCASE BATTLE_SETTING_IS_BAD_STATUS()
		CASE 0
			PRINTL [Normal(vanilla)]
		CASE 1
			PRINTL [Status effect unevasion]
	ENDSELECT
	PRINTFORM %"[505] - 1more battle setting", 50, LEFT%
	SELECTCASE BATTLE_SETTING_IS_1MORE()
		CASE 0
			PRINTL [Normal(vanilla)]
		CASE 1
			PRINTL [Alternate]
	ENDSELECT
	PRINTFORM %"[506] - 装備耐性・効果変更設定", 50, LEFT%
	SELECTCASE BATTLE_SETTING_IS_EQUIP_EFFECT()
		CASE 0
			PRINTL [変更しない(バニラ設定)]
		CASE 1
			PRINTL [変更する]
	ENDSELECT
	PRINTFORML %"[507] - Macca Exchange rate fluctuation", 50, LEFT%[\@ SETTING_IS_MAKKA_RATE() ? Active  # Disabled \@]
ENDIF
[IF_DEBUG]
	PRINTFORM %"[500] - Combat Boycott Settings", 50, LEFT%
	SELECTCASE FLAG:戦闘時ボイコット設定
		CASE 0
			PRINTL [None]
		CASE 1
			PRINTL [FLAVOR]
		CASE 2
			PRINTL [EASY]
		CASE 3
			PRINTL [NORMAL]
		CASE 4
			PRINTL [HARD]
	ENDSELECT

	PRINTFORML %"[501] - EXTRA Event Settings", 50, LEFT%[\@ GETBIT(FLAG:EXTRAイベント設定, 0) ? Available  # Unavailable \@]

	PRINTFORM %"[502] - Combat Stats of Humans", 50, LEFT%
	SELECTCASE FLAG:人間戦闘ステ設定
		CASE 0
			PRINTL [Normal(Vanilla Settings)]
		CASE 1
			PRINTL [Accuracy Improvement]
		CASE 2
			PRINTL [Raise Overall Stats]
		CASE 3
			PRINTL [Improve Equipment by (Level/2） percent]
	ENDSELECT
	PRINTFORM %"[503] - Affinity impact setting", 50, LEFT%
	;戦闘時の素質影響設定
	SELECTCASE BATTLE_SETTING_IS_TALENT()
		CASE 0
			PRINTL [Normal(vanilla)]
			;通常(バニラ設定)
		CASE 1
			PRINTL [Affinity effect]
			;素質影響
	ENDSELECT
	PRINTFORM %"[504] - Status effect influence on evasion", 50, LEFT%
	;戦闘時のバステ必中設定
	SELECTCASE BATTLE_SETTING_IS_BAD_STATUS()
		CASE 0
			PRINTL [Normal(vanilla)]
			;通常(バニラ設定)
		CASE 1
			PRINTL [Status effect unevasion]
			;バステ必中
	ENDSELECT
	PRINTFORM %"[505] - 1more battle setting", 50, LEFT%
	;戦闘時の1more動作設定
	SELECTCASE BATTLE_SETTING_IS_1MORE()
		CASE 0
			PRINTL [Normal(vanilla)]
		CASE 1
			PRINTL [Alternate]
			;変更
	ENDSELECT
	PRINTFORM %"[506] - 装備耐性・効果変更設定", 50, LEFT%
	SELECTCASE BATTLE_SETTING_IS_EQUIP_EFFECT()
		CASE 0
			PRINTL [変更しない(バニラ設定)]
		CASE 1
			PRINTL [変更する]
	ENDSELECT
	PRINTFORML %"[507] - Macca Exchange rate fluctuation", 50, LEFT%[\@ SETTING_IS_MAKKA_RATE() ? Active  # Disabled \@]
[ENDIF]

PRINTL [100]-Return


$INPUT_LOOP
INPUT
IF RESULT == 0
	CALL TEXT_SETTING
ELSEIF RESULT == 1
	CALL SAMENPLACE_SETTING
ELSEIF RESULT == 2
	CALL CLOTHES_SETTING
ELSEIF RESULT == 3
	PRINTFORM Current Pregnancy setting: [
	SELECTCASE FLAG:Pregnant機能
		CASE 0
			PRINT OFF
			;全キャラの妊娠判定用のフラグ値をクリア
			CALL CLEAR_PREGNANCY_DATERMINATION
		CASE 1
			PRINT ON
		CASE 2
			PRINT ON With exception of Traps
			;男の娘の妊娠判定用のフラグ値をクリア
			CALL CLEAR_PREGNANCY_DATERMINATION, -2
	ENDSELECT
	PRINTFORML ]
	PRINTL
	PRINTFORML Please select a setting
	PRINTL [0] OFF
	PRINTL [1] ON
	PRINTL [2] ON With exception of Traps
	CALL INPUTINT,0,1,2
	FLAG:Pregnant機能 = RESULT
	PRINTFORM  Pregnancy setting has been changed to: [
	SELECTCASE FLAG:Pregnant機能
		CASE 0
			PRINT OFF
		CASE 1
			PRINT ON
		CASE 2
			PRINT ON With exception of Traps
	ENDSELECT
	PRINTFORMW ] 
	;REPEAT CHARANUM
	;	CFLAG:COUNT:主人の中出氏による妊娠判定 = 0
	;	CFLAG:COUNT:助手の中出氏による妊娠判定 = 0
	;	CFLAG:COUNT:奴隷の中出氏による妊娠判定 = 0
	;	CFLAG:COUNT:顧客の中出氏による妊娠判定 = 0
	;	CFLAG:COUNT:触手の中出氏による妊娠判定 = 0
	;REND
	RESTART
ELSEIF RESULT == 4
	CALL TYPE_COLOR_SETTING
ELSEIF RESULT == 5
	PRINTFORML Mufufu expansion has been set to: \@ FLAG:ムフフ展開 ? Unavailable # Available \@.
	;ムフフ展開を
	INVERTBIT  FLAG:ムフフ展開, 0
	SIF FLAG:ムフフ展開 == 1
		PRINTFORMW Mufufu expansion content can now occur during search
		;探索中にムフフな展開が起きるようになるかもしれません
	RESTART
ELSEIF RESULT == 6
	PRINTFORMW Birth setting set to: \@ FLAG:出産機能ONOFF ? OFF # ON \@.
	;出産機能を
	IF FLAG:出産機能ONOFF == 0
		FLAG:出産機能ONOFF = 1
		IF ASSI > 0
			SIF ((TALENT:ASSI:153 && CFLAG:ASSI:110 - 2 <= DAY) || TALENT:ASSI:154)
				ASSI = -1
		ENDIF
		IF TARGET > 0
			SIF ((TALENT:TARGET:153 && CFLAG:TARGET:110 - 2 <= DAY) || TALENT:TARGET:154)
				TARGET = -1
		ENDIF
	ELSE
		FLAG:出産機能ONOFF = 0
	ENDIF
	RESTART
ELSEIF RESULT == 7
	PRINTFORMW SM Extension set to: \@ FLAG:44 ? Disabled # Enabled \@
	INVERTBIT FLAG:SM機能拡張, 0
	RESTART
ELSEIF RESULT == 8
	CALL AUTO_RECOVER_SETTING
ELSEIF RESULT == 9
	PRINTFORMW Outdoor Play Extension set to: \@ FLAG:46 ? Disabled # Enabled \@
	INVERTBIT FLAG:野外露出強化, 0
	RESTART
ELSEIF RESULT == 10
	PRINTFORMW Tentacles Extension set to: \@ FLAG:47 ? Disabled # Enabled \@.
	INVERTBIT FLAG:触手紳士覚醒, 0
ELSEIF RESULT == 11
	INVERTBIT FLAG:主人以外TALK可能 , 0
	IF FLAG:主人以外TALK可能
		PRINTFORMW Only the Master and fallen characters can TALK
	ELSE
		PRINTFORMW Only the Master can TALK
	ENDIF
ELSEIF RESULT == 12
	PRINTFORML This setting, if enabled, allows for characters to gain 【Affection】 outside of training,
	PRINTFORML based on loyalty and other factors.
	PRINTFORML Current setting: %AUTO_SPLIT("OFF_Limited_All" , "_" , FLAG:未調教時陥落)%
	;未調教時陥落機能を設定してください
	PRINTL [0] OFF
	PRINTL [1] Enable only for thoose who won't join battle because of training
	;調教を開始すると戦闘に参加させられなくなる人間にのみ有効にする
	PRINTL [2] Enable for humans and demons
	;人間・悪魔を問わず有効にする
	CALL INPUTINT, 0, 1, 2
	IF RESULT == 0
		PRINTW New setting is 【OFF】
		;未調教時陥落機能を【なし】に設定しました
		FLAG:未調教時陥落 = 0
	ELSEIF RESULT == 1
		PRINTW New setting is 【Enabled for some】
		;未調教時陥落機能を【一部の人間のみ有効】に設定しました
		FLAG:未調教時陥落 = 1
	ELSEIF RESULT == 2
		PRINTW New setting is 【Enabled for all】
		;未調教時陥落機能を【全体に有効】に設定しました
		FLAG:未調教時陥落 = 2
	ENDIF
ELSEIF RESULT == 13
	CALL DUNGEON_COMMAND_CONFIG
ELSEIF RESULT == 14
	CALL INPUT_YN_CONFIG
ELSEIF RESULT == 15
	PRINTFORMW Skill Attributes Display setting has been set to: \@ FLAG:スキル属性表示設定 ? Default # Additional Display \@
	INVERTBIT FLAG:スキル属性表示設定, 0
	RESTART
;---- EDIT 労役実行確認省略オプション追加(2011/02/04) ADD START ---------
ELSEIF RESULT == 16
	CALL WORK_CONFIRM_SKIP_CONFIG
;---- EDIT 労役実行確認省略オプション追加(2011/02/04) ADD END -----------
;---- EDIT 夜這い不許可性別設定オプション追加(2011/03/10) ADD START ---------
ELSEIF RESULT == 17
	CALL CONTROL_SELF_CONFIG
;---- EDIT 夜這い不許可性別設定オプション追加(2011/03/10) ADD END -----------
;---- EDIT ＮＴＲ機能整理(2011/09/08) ADD START ---------
ELSEIF RESULT == 18
	CALL NTR_CONFIG
;---- EDIT ＮＴＲ機能整理(2011/09/08) ADD END -----------
ELSEIF RESULT == 19
	FLAG:休憩確認フラグ += 1
	SIF FLAG:休憩確認フラグ > 2
		FLAG:休憩確認フラグ = 0
	SELECTCASE FLAG:休憩確認フラグ
		CASE 0
			PRINTFORML [Rest] Needs to be confirmed
			PRINTFORMW [Rest] has been changed to [Rest until Morning]
		CASE 1
			PRINTFORMW [Rest] Does not need confirmation
		CASE 2
			PRINTFORML [Rest] has been changed to [Rest until Morning]
			PRINTFORMW [Rest] Automatically rests until the morning of the following day
	ENDSELECT
ELSEIF RESULT == 20
	DRAWLINE
	PRINT Current Display Setting is 
	SELECTCASE FLAG:PALAM表示設定
		CASE 0
			PRINT A-Type
		CASE 1
			PRINT B-Type
		CASE 2
			PRINT C-Type
	ENDSELECT
	PRINTL 
	;となっています
	DRAWLINE
	PRINTL [0] A-Type
	PRINTL PALAM : Display total earned
	PRINTL Gauge: Used as reference to the amount acquired on the current level
	PRINTL Description: Closest to that of the conventional bar as the bar is not directly proportional
	PRINTL              Although roughly accurate, the amount will be represented for a better understanding
	PRINTL [1] B-Type
	PRINTL PALAM : Display total earned
	PRINTL Gauge: Reference to the total earned
	PRINTL Description: Close to the traditional bar as it is in direction proportion and it's easy to tell how far the next level is
	PRINTL              However it may stretch upon level up
	PRINTL [2] C-Type
	PRINTL PALAM : Displays the amount earned on the current level
	PRINTL Gauge: Used as reference to the amount acquired on the current level
	PRINTL Description　: The bar is directly proportional like B-Type and is a better way to judge the amount needed until the next level
	PRINTL               Level up bars is properly initialized
	PRINTL               However, it changes the appearance of the level up threshold each time and can change the overall feeling of using the bar as reference.
	CALL INPUTINT( 0, 1, 2)
	IF FLAG:PALAM表示設定 == RESULT
		PRINTW Did not change the Display Settings
	ELSE
		FLAG:PALAM表示設定 = RESULT
		PRINT Changed Display Settings to
		SELECTCASE FLAG:PALAM表示設定
			CASE 0
				PRINT A-Type
			CASE 1
				PRINT B-Type
			CASE 2
				PRINT C-Type
		ENDSELECT
	ENDIF
ELSEIF RESULT == 21
	PRINTL [0] Retargetting : Only change targets during training
	PRINTL [1] Training Start : Choose a trainer and then a subject to start training
	PRINTL [2] Do not use : SHOP screen does not display duplicate
	CALL INPUTINT(0,1,2)
	FLAG:控え利用設定 = RESULT
	PRINTFORMW Settings have been changed
ELSEIF RESULT == 22
	CALL PRINTCPERLINE_SETTING
ELSEIF RESULT == 23
	INVERTBIT GLOBAL:4 , 0
	SAVEGLOBAL
	;PRINTFORML [24] - Opening Scene [\@ GLOBAL:オープニングデモ飛ばし ? 見ない # 見る \@]
ELSEIF RESULT == 24
	INVERTBIT FLAG:バーアニメスキップ , 0
ELSEIF RESULT == 25
	CALL MESSAGE_WINDOW_CONFIG
;ELSEIF RESULT == 26
;	PRINTL Sets the number of characters of the Devil (default is 20)
;	$悪魔合体リスト表示数変更
;	INPUT
;	FLAG:悪魔合体リスト表示数設定 = RESULT
;	IF FLAG:悪魔合体リスト表示数設定 < 1
;		PRINTW Please enter a number equal to or greater to 1.
;		CLEARLINE 2
;		GOTO 悪魔合体リスト表示数変更
;	ELSE
;		PRINTFORMW Number of Display is changed to {FLAG:悪魔合体リスト表示数設定}
;	ENDIF
;ELSEIF RESULT == 28
;	CALL 合体用ソフトクイック設定_OPTION
ELSEIF RESULT == 26
	PRINTL Please enter the number of items to diplay in a list at the same time. Input range is 10 to 50 (default is 20)
	PRINTL [ 0] Don't Change [20] Default
	PRINTL [10]　[15]　[20]　[25]　[30]　[35]　[40]　[45]　[50]
	DO
		INPUT
		IF RESULT && !INRANGE(RESULT, 10, 50)
			CLEARLINE 1
			REUSELASTLINE The entered value is outside the range of 10 to 50.
			;入力値が範囲外です。入力可能な範囲は10〜50です
		ENDIF
	LOOP RESULT && !INRANGE(RESULT, 10, 50)
	RESULT = RESULT ? RESULT # FLAG:リスト表示数設定
	IF FLAG:リスト表示数設定 == RESULT || (!FLAG:リスト表示数設定 && RESULT == 20)
		PRINTFORMW Number of items in a list remains at {RESULT ? RESULT # 20}
	ELSE
		FLAG:リスト表示数設定 = RESULT
		PRINTFORMW Number of items in a list is changed to {FLAG:リスト表示数設定}
	ENDIF
ELSEIF RESULT == 27
	CALL 合体用ソフトクイック設定
ELSEIF RESULT == 28
	CALL SHOW_STATUS_CONFIG
ELSEIF RESULT == 29
	PRINTL Randomly set the appearance of a demon
	PRINTL Please select an item to set
	PRINTFORML [0] Married Demon Generation       [Current Chance: {FLAG:配偶者ランダム付与}％]
	PRINTFORML [1] Demon Appearance is random (Breast Only) [Current Chance: {FLAG:野良悪魔素質ランダム設定}％]
	CALL INPUTINT(0,1)
	SELECTCASE RESULT
		CASE 0
			PRINTL Married Demon Generation 
			PRINTL Please enter the probability of setting (maximum value of 100)
			$配偶者ランダム付与_LOOP
			INPUT
			FLAG:配偶者ランダム付与 = RESULT
			IF FLAG:配偶者ランダム付与 == 0
				PRINTW The setting has been turned off
			ELSEIF FLAG:配偶者ランダム付与 < 0 || FLAG:配偶者ランダム付与 > 100
				PRINTL A numeric value out of range was entered
				PRINTW Please Re-Enter
				CLEARLINE 3
				GOTO 配偶者ランダム付与_LOOP
			ELSE
				PRINTFORMW Has been changed to {FLAG:配偶者ランダム付与}％
			ENDIF
		CASE 1
			PRINTL Demon Appearance is random (Breast Only)
			PRINTL Please enter the probability of setting (maximum value of 100)
			$野良悪魔素質ランダム設定_LOOP
			INPUT
			FLAG:野良悪魔素質ランダム設定 = RESULT
			IF FLAG:野良悪魔素質ランダム設定 == 0
				PRINTW The setting has been turned off
			ELSEIF FLAG:野良悪魔素質ランダム設定 < 0 || FLAG:野良悪魔素質ランダム設定 > 100
				PRINTL A numeric value out of range was entered
				PRINTW Please Re-Enter
				CLEARLINE 3
				GOTO 野良悪魔素質ランダム設定_LOOP
			ELSE
				PRINTFORMW Has been changed to {FLAG:野良悪魔素質ランダム設定}％
			ENDIF
	ENDSELECT
ELSEIF RESULT == 30
	;PRINTFORML The generation of mercy events during Combat is set to \@ FLAG:戦闘時命乞いイベント ? なし # あり \@
	;INVERTBIT FLAG:戦闘時命乞いイベント, 0
	;RESTART
	PRINTL Set the mercy event generation at the time of Combat
	PRINTL Please select an option to set
	PRINTFORML [0] Mercy Event [Currently: \@ GETBIT(FLAG:戦闘時命乞いイベント,0) ? ON  # OFF \@]
	IF GETBIT(FLAG:戦闘時命乞いイベント,0)
		PRINTFORML [1] Event Rate [Current Chance: {FLAG:戦闘時命乞いイベント発生率}％]
		CALL INPUTINT(0,1)
	ELSE
		CALL INPUTINT(0)
	ENDIF

	SELECTCASE RESULT
		CASE 0
			INVERTBIT FLAG:戦闘時命乞いイベント, 0
			PRINTFORMW The generation of mercy events has been changed to \@ GETBIT(FLAG:戦闘時命乞いイベント,0) ? ON # OFF \@
			SIF FLAG:戦闘時命乞いイベント発生率 < 1 || FLAG:戦闘時命乞いイベント発生率 > 10
				FLAG:戦闘時命乞いイベント発生率 = 5
			RESTART
		CASE 1
			PRINTL Set the incidence of mercy events
			PRINTL Please enter the probability of setting (1% to 10%)
			$命乞いイベント発生率_LOOP
			INPUT
			IF RESULT < 1 || RESULT > 10
				PRINTL Numeric value out of range has been entered
				PRINTW Please Re-Enter
				CLEARLINE 3
				GOTO 命乞いイベント発生率_LOOP
			ELSE
				FLAG:戦闘時命乞いイベント発生率 = RESULT
				PRINTFORMW The event rate has been changed to {FLAG:戦闘時命乞いイベント発生率}％
				RESTART
			ENDIF
	ENDSELECT

ELSEIF RESULT == 31
	PRINTL If you are in heat during Dungeon Exploration, set the Pushed Down settings
	PRINTL Please select an item to set
	PRINTFORML [0] Pushed Down Event [Current Generation Setting: \@ GETBIT(FLAG:押し倒されイベント,0) ? ON  # OFF \@]
	IF GETBIT(FLAG:押し倒されイベント,0)
		PRINTFORML [1] Event Rate [Current Setting Probability{FLAG:押し倒されイベント発生率}％]
		PRINTFORML [2] Advanced Settings
		CALL INPUTINT(0,1,2)
	ELSE
		CALL INPUTINT(0)
	ENDIF

	SELECTCASE RESULT
		CASE 0
			INVERTBIT FLAG:押し倒されイベント, 0
			PRINTFORMW The occurance of Pushed Down events has been changed to \@ GETBIT(FLAG:押し倒されイベント,0) ? ON # OFF \@
			SIF GETBIT(FLAG:押し倒されイベント,0)
				PRINTFORMW Please set aside more information about the combination of the events
			SIF FLAG:押し倒されイベント発生率 < 1 || FLAG:押し倒されイベント発生率 > 10
				FLAG:押し倒されイベント発生率 = 7
			IF FLAG:押し倒されイベント < 2
				INVERTBIT FLAG:押し倒されイベント, 1
				INVERTBIT FLAG:押し倒されイベント, 5
				INVERTBIT FLAG:押し倒されイベント, 9
				INVERTBIT FLAG:押し倒されイベント, 13
			ENDIF
			RESTART
		CASE 1
			PRINTL Pushed down is to set the rate of occurrence of events
			PRINTL Please enter the probability of setting (1% to 10%)
			$押し倒されイベント発生率_LOOP
			INPUT
			IF RESULT < 1 || RESULT > 10
				PRINTL Numeric value that is out of range has been entered
				PRINTW Please re-enter
				CLEARLINE 3
				GOTO 押し倒されイベント発生率_LOOP
			ELSE
				FLAG:押し倒されイベント発生率 = RESULT
				PRINTFORMW The event rate has been changed to {FLAG:押し倒されイベント発生率}％
				RESTART
			ENDIF
		CASE 2
			$押し倒されイベント組合設定開始_LOOP
			PRINTL 押し倒されイベントが発生する性別の組み合わせを設定します
			PRINTL 　※対象→あなた 男娘:男の娘　双女:ふたなり
			PRINTFORM [ 1]  Woman → Man  :\@ GETBIT(FLAG:押し倒されイベント,1) ? ○ # × \@ 
			PRINTFORM [ 2] Futa → Man  :\@ GETBIT(FLAG:押し倒されイベント,2) ? ○ # × \@ 
			PRINTFORM [ 3]  Man → Man  :\@ GETBIT(FLAG:押し倒されイベント,3) ? ○ # × \@ 
			PRINTFORML [ 4] Trap → Man  :\@ GETBIT(FLAG:押し倒されイベント,4) ? ○ # × \@ 
			PRINTFORM [ 5]  Woman → Woman  :\@ GETBIT(FLAG:押し倒されイベント,5) ? ○ # × \@ 
			PRINTFORM [ 6]  Futa → Woman  :\@ GETBIT(FLAG:押し倒されイベント,6) ? ○ # × \@ 
			PRINTFORM [ 7]  Man → Woman  :\@ GETBIT(FLAG:押し倒されイベント,7) ? ○ # × \@ 
			PRINTFORML [ 8] Trap → Woman  :\@ GETBIT(FLAG:押し倒されイベント,8) ? ○ # × \@  
			PRINTFORM [ 9]  Woman → Trap :\@ GETBIT(FLAG:押し倒されイベント,9) ? ○ # × \@ 
			PRINTFORM [10] Futa → Trap :\@ GETBIT(FLAG:押し倒されイベント,10) ? ○ # × \@ 
			PRINTFORM [11]  Man → Trap :\@ GETBIT(FLAG:押し倒されイベント,11) ? ○ # × \@ 
			PRINTFORML [12] Trap → Trap :\@ GETBIT(FLAG:押し倒されイベント,12) ? ○ # × \@  
			PRINTFORM [13]  Woman → Futa :\@ GETBIT(FLAG:押し倒されイベント,13) ? ○ # × \@ 
			PRINTFORM [14] Futa → Futa :\@ GETBIT(FLAG:押し倒されイベント,14) ? ○ # × \@ 
			PRINTFORM [15]  Man → Futa :\@ GETBIT(FLAG:押し倒されイベント,15) ? ○ # × \@ 
			PRINTFORML [16] Trap → Futa :\@ GETBIT(FLAG:押し倒されイベント,16) ? ○ # × \@  
			PRINT [100] All ON  
			PRINT [200] All OFF  
			PRINTL [999] Back to Options
			$押し倒されイベント組合設定入力_LOOP
			INPUT
			IF RESULT == 100
				SETBIT FLAG:押し倒されイベント,1
				SETBIT FLAG:押し倒されイベント,2
				SETBIT FLAG:押し倒されイベント,3
				SETBIT FLAG:押し倒されイベント,4
				SETBIT FLAG:押し倒されイベント,5
				SETBIT FLAG:押し倒されイベント,6
				SETBIT FLAG:押し倒されイベント,7
				SETBIT FLAG:押し倒されイベント,8
				SETBIT FLAG:押し倒されイベント,9
				SETBIT FLAG:押し倒されイベント,10
				SETBIT FLAG:押し倒されイベント,11
				SETBIT FLAG:押し倒されイベント,12
				SETBIT FLAG:押し倒されイベント,13
				SETBIT FLAG:押し倒されイベント,14
				SETBIT FLAG:押し倒されイベント,15
				SETBIT FLAG:押し倒されイベント,16
				SETBIT FLAG:押し倒されイベント,17
				CLEARLINE 8
				GOTO 押し倒されイベント組合設定開始_LOOP
			ELSEIF RESULT == 200
				CLEARBIT FLAG:押し倒されイベント,1
				CLEARBIT FLAG:押し倒されイベント,2
				CLEARBIT FLAG:押し倒されイベント,3
				CLEARBIT FLAG:押し倒されイベント,4
				CLEARBIT FLAG:押し倒されイベント,5
				CLEARBIT FLAG:押し倒されイベント,6
				CLEARBIT FLAG:押し倒されイベント,7
				CLEARBIT FLAG:押し倒されイベント,8
				CLEARBIT FLAG:押し倒されイベント,9
				CLEARBIT FLAG:押し倒されイベント,10
				CLEARBIT FLAG:押し倒されイベント,11
				CLEARBIT FLAG:押し倒されイベント,12
				CLEARBIT FLAG:押し倒されイベント,13
				CLEARBIT FLAG:押し倒されイベント,14
				CLEARBIT FLAG:押し倒されイベント,15
				CLEARBIT FLAG:押し倒されイベント,16
				SETBIT FLAG:押し倒されイベント,17
				CLEARLINE 8
				GOTO 押し倒されイベント組合設定開始_LOOP
			ELSEIF RESULT == 999
				RESTART
			ELSEIF RESULT < 1 || RESULT > 16
				CLEARLINE 1
				GOTO 押し倒されイベント組合設定入力_LOOP
			ELSE
				SETBIT FLAG:押し倒されイベント,17
				INVERTBIT FLAG:押し倒されイベント, RESULT
				CLEARLINE 8
				GOTO 押し倒されイベント組合設定開始_LOOP
			ENDIF
	ENDSELECT

ELSEIF RESULT == 32
	;PRINTFORML The level up interface has been changed to \@ FLAG:レベルアップ時インターフェース設定 ? Default I/F # New I/F \@
	DRAWLINE
	PRINT The current setting is:
	;現在の表示設定は
	SELECTCASE FLAG:レベルアップ時インターフェース設定
		CASE 0
			PRINT Default I/F
		CASE 1
			PRINT New I/F
		CASE 2
			PRINT Auto I/F
	ENDSELECT
	PRINTL 
	;となっています
	DRAWLINE
	PRINTL [0] Default I/F
	PRINTL Description　：Useful if there is a focus on raising specifc stats
	PRINTL 　　　　Select the values next to a stat to raise it by this much
	PRINTL [1] New I/F
	PRINTL Description　：Useful for detailed stat adjustment
	PRINTL 　　　　Select the stat and increase it using an FPS-like system
	PRINTL [2] Auto I/F
	PRINTL Description　：Stat points are allocated randomly on level-up
	PRINTL 　　　　For males, focus is more on strength, while females prefer magic
	CALL INPUTINT( 0, 1, 2)
	IF FLAG:レベルアップ時インターフェース設定 == RESULT
		PRINTW The setting has been kept the same
	ELSE
		FLAG:レベルアップ時インターフェース設定 = RESULT
		PRINT Setting has been changed to 
		SELECTCASE FLAG:レベルアップ時インターフェース設定
			CASE 0
				PRINT Default I/F
			CASE 1
				PRINT New I/F
			CASE 2
				PRINT Auto I/F
		ENDSELECT
		PRINTW .
	ENDIF
	RESTART

ELSEIF RESULT == 33
	PRINTFORMW The conversation with demons has been changed to \@ FLAG:仲魔会話のお任せ設定 ? Manual # Delegate \@
	INVERTBIT FLAG:仲魔会話のお任せ設定, 0
	RESTART
	
ELSEIF RESULT == 34
	PRINTFORMW The recommended level of the dungeon display has been changed to \@ FLAG:ダンジョンの推奨レベル表示設定 ? Do not # View \@
	INVERTBIT FLAG:ダンジョンの推奨レベル表示設定, 0
	RESTART

ELSEIF RESULT == 35
	CALL SETTING_INVERT_3SIZE
	PRINTFORMW Appearance ・ Three Size Function has been 『\@ SETTING_IS_3SIZE() ? Enabled # Disabled \@』.
;	PRINTFORML しんのゆうしゃになりま\@ TALENT:MASTER:253 ? せん # す \@にしました
;	IF 	TALENT:MASTER:253 == 0
;		PRINTFORMW 装備のマイナス効果は反映されません
;		TALENT:MASTER:253 = 1
;	ELSE
;		PRINTFORMW 装備のマイナス効果が反映されます
;		TALENT:MASTER:253 = 0
;	ENDIF
	RESTART
ELSEIF RESULT == 97
	CALL TIMELIMIT_SETTING
	RESTART

ELSEIF RESULT == 36
	PRINT 能力確認の表示情報を
	SELECTCASE (FLAG:表示情報ページ保存 % 10)
		CASE 0
			PRINTL [保存する]
		CASE 1
			PRINTL [保存しない]
	ENDSELECT
	PRINTW ように変更しました
	IF (FLAG:表示情報ページ保存)
		FLAG:表示情報ページ保存 = 0
	ELSE
		FLAG:表示情報ページ保存 = 101
	ENDIF
	RESTART

ELSEIF RESULT == 37
	DRAWLINE
	PRINT 現在のガチャモード
	SELECTCASE FLAG:悪魔ガチャモード
		CASE 0
			PRINT [なし]
		CASE 1
			PRINT [ガチャ起動]
		CASE 2
			PRINT [ガチャ悪魔オンリー]
	ENDSELECT
	PRINTL となっています
	DRAWLINE
	PRINTL [0] なし
	PRINTL 説明　：このオプションおよび機能を使用しません。
	PRINTL [1] ガチャ起動
	PRINTL 説明　：魔貨を使用して、ガチャを回すことが出来ます。
	PRINTL 　　　　ガチャ産の悪魔には専用素質が付き、それ以外の悪魔と区別されます。
	PRINTL 　　　　バランスを崩すので多用は推奨しません。
	PRINTL [2] ガチャ悪魔オンリー
	PRINTL 説明　：魔貨、または専用ポイントを使用したガチャ産の仲魔以外の悪魔は
	PRINTL 　　　　ステータス、および奴隷売却に大きなペナルティが加わります。
	PRINT 　　　　縛りプレイにどうぞ。
	SETCOLOR 0x990033
	PRINTL 　　※探索中にこのモードへの切り替えは推奨しません。
	RESETCOLOR
	CALL INPUTINT( 0, 1, 2)
	IF FLAG:悪魔ガチャモード == RESULT
		PRINTW 表示設定を変更しませんでした
	ELSE
		FLAG:悪魔ガチャモード = RESULT
		PRINT 悪魔ガチャを
		SELECTCASE FLAG:悪魔ガチャモード
			CASE 0
				PRINT [なし]
			CASE 1
				PRINT [ガチャ起動]
			CASE 2
				PRINT [ガチャ悪魔オンリー]
		ENDSELECT
		PRINTW モードに変更しました
	ENDIF
	RESTART

ELSEIF RESULT == 99
	PRINTL All stats in DemonTraining.exe will be erased.
	;悪魔調教典.exe内の帳簿を消去します
	PRINTL Are you sure you want to erase?
	PRINTL [0] Erase
	PRINTL [1] Cancel
	CALL INPUTINT(0,1,)
	SELECTCASE RESULT
		CASE 0
			PRINTL 
			PRINTL You can not revert after erasing
			PRINTL Do you really want to erase
			PRINTL [0] DO IT FAGGOT
			PRINTL [1] Pussy out
			CALL INPUTINT(0,1,)
			SELECTCASE RESULT
				CASE 0
					VARSET FLAG, 0, 1400, 1471
					PRINTW The book has been erased
				CASE 1
					PRINTW Feels Bad Man
			ENDSELECT
		CASE 1
			PRINTW It has been cancelled
	ENDSELECT
ELSEIF RESULT == 100
	RETURN 0

ELSEIF RESULT == 500
	DRAWLINE
	PRINT Current Settings
	SELECTCASE FLAG:戦闘時ボイコット設定
		CASE 0
			PRINT  None 
		CASE 1
			PRINT  FLAVOR 
		CASE 2
			PRINT  EASY 
		CASE 3
			PRINT  NORMAL 
		CASE 4
			PRINT  HARD 
	ENDSELECT
	PRINTL It has been changed to 
	DRAWLINE
	PRINTL [0] None
	PRINTL Description : Boycott events during battle will no longer occur
	PRINTL 		   		 Behaviour similar to vanilla
	PRINTL [1] FLAVOR
	PRINTL Description : Boycott events occur during batttle
	PRINTL 				 Only in action cancellation or other boycott events will the boycott not occur.
	PRINTL [2] EASY
	PRINTL Description　： Low degree of difficulty of boycott events that occur in combat.
	PRINTL               Energy increase and decrease along with the words, but the action cancellation or other boycott events will not occur.
	PRINTL [3] NORMAL
	PRINTL Description : Some degree of difficulty of boycont events that occur in combat.
	PRINTL               Not suitable for normal play because it might not be balanced.
	PRINTL [4] HARD
	PRINTL Description : A boycott event of high difficulty occurs during battle.
	PRINTL 			     Not Implemented.
	CALL INPUTINT( 0, 1, 2, 3, 4)
	IF FLAG:戦闘時ボイコット設定 == RESULT
		PRINTW Boyott setting were not changed
	ELSE
		FLAG:戦闘時ボイコット設定 = RESULT
		PRINT Set Boycott settings
		SELECTCASE FLAG:戦闘時ボイコット設定
			CASE 0
				PRINT  None 
			CASE 1
				PRINT  FLAVOR 
			CASE 2
				PRINT  EASY 
			CASE 3
				PRINT  NORMAL 
			CASE 4
				PRINT  HARD 
		ENDSELECT
		PRINTW に変更しました
	ENDIF

ELSEIF RESULT == 501
	INVERTBIT FLAG:EXTRAイベント設定, 0
	PRINTFORMW EXTRAイベントの発生を\@ GETBIT(FLAG:EXTRAイベント設定, 0) ? あり # なし \@に変更しました

ELSEIF RESULT == 502
	DRAWLINE
	PRINT The current setting is
	SELECTCASE FLAG:人間戦闘ステ設定
		CASE 0
			PRINT Normal (vanilla setting)
		CASE 1
			PRINT Improve Accuracy
		CASE 2
			PRINT Overall Stat Raise
		CASE 3
			PRINT Equipment Enhancement By (1/2 Level)percent.
	ENDSELECT
	PRINTL Has been changed to 
	DRAWLINE
	PRINTL [0] Normal (vanilla setting)
	PRINTL Description: eraMegaten original setting.
	PRINTL              Human status reflected in battle is about half of a demon's
	PRINTL [1] Improve Accuracy
	PRINTL Description: A setting that adds bonus to the calculations of to-hit ration of human attacks
	PRINTL 			   If you are irritated about missing in normal difficulty.
	PRINTL [2] Overall Stat Raise
	PRINTL Description: Setting that recalculates all the stats other than HP and MP closer to that of the devil.
	PRINTL 				Even so, it is weaker than the devil, so it is not safe.
	PRINTL [3] Equipment Enhancement By (1/2 Level)percent 
	PRINTL Description: The effectiveness of human equipment is boosted by （LV/2）％ per LV.
	;説明　：人間の装備品の補正を（LV/2）％の強化。
	PRINTL 　　　　25 percent for level 50, 35 percent for level 70, etc...
	CALL INPUTINT( 0, 1, 2, 3)
	IF FLAG:人間戦闘ステ設定 == RESULT
		PRINTW Setting has not been changed
	ELSE
		FLAG:人間戦闘ステ設定 = RESULT
		SELECTCASE FLAG:人間戦闘ステ設定
			CASE 0
				PRINT Normal
			CASE 1
				PRINT Improve Accuracy
			CASE 2
				PRINT Overall Stat Raise
			CASE 3
				PRINT Equipment Enhancement By (1/2 Level)percent.
		ENDSELECT
		PRINTW is the new setting.
	ENDIF

ELSEIF RESULT == 503
	DRAWLINE
	PRINTL [0] Normal (vanilla setting)
	PRINTL Description: eraMegaten default setting.
	;※Not actually the default setting, things worked with Affinity for some skills before this setting was a thing
	PRINTL 　　　　Affinity doesn't affect skill power and MP cost.
	PRINTL [1] Affinity effect
	PRINTL Description: Depending on Affinity, some skills will be affected.
	PRINTL 　　　　Affected skills will have increased power and/or reduced MP cost.
	PRINTL 　　　　※Affinities are specific to a character and can't be viewed.
	PRINTL 　　　　※However, the effect on affected skills should be apparent.
	CALL INPUTINT( 0, 1)
	CALL BATTLE_SETTING_SET_TALENT, RESULT
	SELECTCASE BATTLE_SETTING_IS_TALENT()
		CASE 0
			PRINTW Setting has been set to default
			;通常の設定になりました
		CASE 1
			PRINTW Affinity will now affect skill power and MP cost
			;素質の影響を受けるようになりました
	ENDSELECT
ELSEIF RESULT == 504
	DRAWLINE
	PRINTL [0] Normal (vanilla setting)
	PRINTL Description: eraMegaten default setting.
	PRINTL 　　　　Attacks can be evaded even if suffereing from movement impeding status-effects.
	PRINTL [1] Status effect unevasion
	PRINTL Description: When affected by a movement umpeding status-effect,
	PRINTL 　　　　evasion becomes impossible.
	CALL INPUTINT( 0, 1)
	CALL BATTLE_SETTING_SET_BAD_STATUS, RESULT
	SELECTCASE BATTLE_SETTING_IS_BAD_STATUS()
		CASE 0
			PRINTW Setting has been set to default
		CASE 1
			PRINTW Evasion will now be affected by status effects
			;バステの影響を受けるようになりました
	ENDSELECT
ELSEIF RESULT == 505
	DRAWLINE
	PRINTL [0] Normal (vanilla setting)
	PRINTL Description: eraMegaten default setting.
	PRINTL 　　　　１MORE happens every time an enemy targets a characters weak-points.
	PRINTL [1] Alternate
	PRINTL Description: Invalid, refelected, absorbed and otherwise avoided attacks
	PRINTL 　　　　no longer grant a １MORE. It becomes harder for the enemy to trigger １MORE.
	CALL INPUTINT( 0, 1)
	CALL BATTLE_SETTING_SET_1MORE, RESULT
	SELECTCASE BATTLE_SETTING_IS_1MORE()
		CASE 0
			PRINTW Setting has been set to default
		CASE 1
			PRINTW 1MORE setting has been set to alternate
			;１MOREの設定を変えました
	ENDSELECT
ELSEIF RESULT == 506
	CALL BATTLE_SETTING_INVERT_EQUIP_EFFECT
	PRINTW 設定を変更変更しました
ELSEIF RESULT == 507
	CALL SETTING_INVERT_MAKKA_RATE
	PRINTW 設定を変更変更しました
ELSE
	GOTO INPUT_LOOP
ENDIF

RESTART

;=========================================
;[0]テキスト関連設定
;=========================================
@TEXT_SETTING
PRINTL Please set the Text
PRINT Current Setting
IF FLAG:6 == 1 && FLAG:7 == 2
	PRINT 【Verbal Text (Always Display) + Scene Text】
ELSEIF FLAG:6 == 1 && FLAG:7 == 1
	PRINT 【Verbal Text (Displayed only once) + Scene Text】
ELSEIF FLAG:6 == 1 && FLAG:7 == -1
	PRINT 【Scenery text only】
ELSEIF FLAG:6 == 0 && FLAG:7 == -1
	PRINT [Do not display text]
ENDIF
PRINTL
;PRINTFORM             【自動喘ぎ声機能:\@ FLAG:自動喘ぎ声 ? ON  # OFF \@】
PRINTL
PRINTFORM             【RPG switchover:\@ FLAG:RPG口上 ? OFF  # ON \@】
;口上表示

PRINTL 　
PRINTL [0] - Verbal text (always displayed) + scene text
PRINTL [1] - Verbal text (displayed only once) + scene text
PRINTL [2] - Scenery text only
PRINTL [3] - Do not display text
;PRINTL [4] - Automatic pant voice switching
PRINTL [5] - RPG Switchover
PRINTL [100]-Return
$INPUT_LOOP
INPUT
IF RESULT == 100
	RETURN 0
ELSEIF RESULT == 0
	PRINTL Set to: Verbal text (always displayed) + scene text
	FLAG:6 = 1
	FLAG:7 = 2
ELSEIF RESULT == 1
	PRINTL Set to: Verbal text (displayed only once) + scene text
	FLAG:6 = 1
	FLAG:7 = 1
ELSEIF RESULT == 2
	PRINTL Set to: Scenery text only
	FLAG:6 = 1
	FLAG:7 = -1
ELSEIF RESULT == 3
	PRINTL Set to: Do not display text
	FLAG:6 = 0
	FLAG:7 = -1
;ELSEIF RESULT == 4
;	PRINTFORMW Set to Automatic pant voice switching\@ FLAG:自動喘ぎ声 ? 無効 # 有効 \@
;	IF FLAG:自動喘ぎ声 == 0
;		FLAG:自動喘ぎ声 = 1
;	ELSE
;		FLAG:自動喘ぎ声 = 0
;	ENDIF
ELSEIF RESULT == 5
	PRINTFORMW Set to RPG switchover\@ FLAG:RPG口上 ? 有効 # 無効 \@
	IF FLAG:RPG口上 == 0
		FLAG:RPG口上 = 1
	ELSE
		FLAG:RPG口上 = 0
	ENDIF
ELSE
	GOTO INPUT_LOOP
ENDIF

;================================================
;[1]射精位置設定
;================================================
@SAMENPLACE_SETTING
PRINTL Select the automatic ejaculation target
PRINT The automatic ejaculation target is set to: 
	CALL CHECK_SAMEN_PLACE
PRINTL 
PRINTL [0] 「Hair」
PRINTL [1] 「Face」
PRINTL [2] 「Breast」
PRINTL [3] 「Belly」
PRINTL [4] 「Armpit」
PRINTL [5] 「Thighs」
PRINTL [6] 「Cunt」
PRINTL [7] 「Ass」
PRINTL [8] 「Ejaculate as is」or「Ejaculate in condom」
PRINTL [9] 「Select Everytime」
$INPUT_LOOP
INPUT
IF RESULT == 0
	PRINTW - Fixed ejaculation destination on the hair -
	FLAG:99 = 0
ELSEIF RESULT == 1
	PRINTW - Fixed the ejaculation destination on the face -
	FLAG:99 = 1
ELSEIF RESULT == 2
	PRINTW - Fixed the ejaculation on the chest -
	FLAG:99 = 2
ELSEIF RESULT == 3
	PRINTW - Fixed the ejaculation destination on the belly -
	FLAG:99 = 3
ELSEIF RESULT == 4
	PRINTW - Fixed the ejaculation on the armpit -
	FLAG:99 = 4
ELSEIF RESULT == 5
	PRINTW - Fixed ejaculation destination on the thighs -
	FLAG:99 = 5
ELSEIF RESULT == 6
	PRINTW - Fixed the ejaculation destination on the vagina -
	FLAG:99 = 6
ELSEIF RESULT == 7
	PRINTW - Fixed the ejaculation destination on the ass -
	FLAG:99 = 7
ELSEIF RESULT == 8
	PRINTW - Fixed to ejaculate without selection -
	FLAG:99 = 8
ELSEIF RESULT == 9
	PRINTW - Chose to select for every ejaculation -
	FLAG:99 = 9
ELSE
	GOTO INPUT_LOOP
ENDIF


@CHECK_SAMEN_PLACE
IF FLAG:99 == 0
	PRINT 		Hair
ELSEIF FLAG:99 == 1
	PRINT 		Face
ELSEIF FLAG:99 == 2
	PRINT 		Breast
ELSEIF FLAG:99 == 3
	PRINT 		Belly
ELSEIF FLAG:99 == 4
	PRINT 		Armpit
ELSEIF FLAG:99 == 5
	PRINT 		Thighs
ELSEIF FLAG:99 == 6
	PRINT 		Vagina
ELSEIF FLAG:99 == 7
	PRINT 		Ass
ELSEIF FLAG:99 == 8
	PRINT Ejaculate as is
ELSEIF FLAG:99 == 9
	PRINT Select Each Time
ENDIF



@TYPE_COLOR_SETTING
#LOCALSIZE 21
FOR LOCAL, 0, 6
	LOCAL:20 = FLAG:(GETNUM(FLAG, "通常カラー")+LOCAL)
	CALL GETCOLOR_9(LOCAL:20)
	LOCAL:(1 + LOCAL*3) = RESULT
	LOCAL:(2 + LOCAL*3) = RESULT:1
	LOCAL:(3 + LOCAL*3) = RESULT:2
NEXT
$START
FOR LOCAL, 0, 6
	SETCOLOR LOCAL:(1+LOCAL*3), LOCAL:(2+LOCAL*3), LOCAL:(3+LOCAL*3)
	CALL GETCOLOR_9(LOCAL:(1+LOCAL*3), LOCAL:(2+LOCAL*3), LOCAL:(3+LOCAL*3))
	FLAG:(GETNUM(FLAG, "通常カラー")+LOCAL) = RESULT
	IF LOCAL == 0
		PRINTL Normal
	ELSEIF LOCAL == 1
		PRINTL Weak
	ELSEIF LOCAL == 2
		PRINTL Resistance
	ELSEIF LOCAL == 3
		PRINTL Invalid
	ELSEIF LOCAL == 4
		PRINTL Absorption
	ELSEIF LOCAL == 5
		PRINTL Reflection
	ENDIF
	PRINTFORM Ｒ{LOCAL:(1+LOCAL*3),3}　
	LOCALS = [{LOCAL*12, 2}]
	PRINTBUTTON LOCALS, LOCAL*12
	PRINT +1　
	LOCALS = [{LOCAL*12+1, 2}]
	PRINTBUTTON LOCALS, LOCAL*12+1
	PRINT +10　
	LOCALS = [{LOCAL*12+2, 2}]
	PRINTBUTTON LOCALS, LOCAL*12+2
	PRINT -1　
	LOCALS = [{LOCAL*12+3,2}]
	PRINTBUTTON LOCALS, LOCAL*12+3
	PRINTL -10　
	PRINTFORM Ｇ{LOCAL:(2+LOCAL*3),3}　
	LOCALS = [{LOCAL*12+4,2}]
	PRINTBUTTON LOCALS, LOCAL*12+4
	PRINT +1　
	LOCALS = [{LOCAL*12+5, 2}]
	PRINTBUTTON LOCALS, LOCAL*12+5
	PRINT +10　
	LOCALS = [{LOCAL*12+6, 2}]
	PRINTBUTTON LOCALS, LOCAL*12+6
	PRINT -1　
	LOCALS = [{LOCAL*12+7, 2}]
	PRINTBUTTON LOCALS, LOCAL*12+07
	PRINTL -10　
	PRINTFORM Ｂ{LOCAL:(3+LOCAL*3),3}　
	LOCALS = [{LOCAL*12+8, 2}]
	PRINTBUTTON LOCALS, LOCAL*12+8
	PRINT +1　
	LOCALS = [{LOCAL*12+9, 2}]
	PRINTBUTTON LOCALS, LOCAL*12+9
	PRINT +10　
	LOCALS = [{LOCAL*12+10, 2}]
	PRINTBUTTON LOCALS, LOCAL*12+10
	PRINT -1　
	LOCALS = [{LOCAL*12+11, 2}]
	PRINTBUTTON LOCALS, LOCAL*12+11
	PRINTL -10　
NEXT
RESETCOLOR
PRINTL [100] Return
INPUT
SIF RESULT == 100
	RETURN 0
SIF RESULT < 0 || RESULT > 71
	GOTO START
LOCAL = RESULT / 12 * 3
LOCAL:20 = RESULT % 12
SELECTCASE LOCAL:20
	CASE 0
		LOCAL:(1 + LOCAL) += 1
	CASE 1
		LOCAL:(1 + LOCAL) += 10
	CASE 2
		LOCAL:(1 + LOCAL) -= 1
	CASE 3
		LOCAL:(1 + LOCAL) -= 10
	CASE 4
		LOCAL:(2 + LOCAL) += 1
	CASE 5
		LOCAL:(2 + LOCAL) += 10
	CASE 6
		LOCAL:(2 + LOCAL) -= 1
	CASE 7
		LOCAL:(2 + LOCAL) -= 10
	CASE 8
		LOCAL:(3 + LOCAL) += 1
	CASE 9
		LOCAL:(3 + LOCAL) += 10
	CASE 10
		LOCAL:(3 + LOCAL) -= 1
	CASE 11
		LOCAL:(3 + LOCAL) -= 10
ENDSELECT
FOR LOCAL, 1, 19
	SIF LOCAL:LOCAL < 0
		LOCAL:LOCAL = 0
	
	SIF LOCAL:LOCAL > 255
		LOCAL:LOCAL = 255
NEXT
CLEARLINE 26
GOTO START


;=====================================
;[9]オートリカバー設定
;=====================================
@AUTO_RECOVER_SETTING
PRINTFORML Auto Recover Settings
DRAWLINE
PRINTFORML [0] - [\@ GETBIT(FLAG:オートリカバー設定1, 0) == 0 ? 魔法 # アイテム \@]Prioritize
PRINT [1] - HP
IF PART_VAR_READ(FLAG:オートリカバー設定3, 3, 1) == 100
	PRINTL auto recover if missing any hp
ELSE
	PRINTFORML {PART_VAR_READ(FLAG:オートリカバー設定3, 3, 1)} percent or more will not auto recover
ENDIF
PRINTFORML [2] - Abnormal Conditions \@ GETBIT(FLAG:オートリカバー設定1, 1) == 0 ? [Don't recover] # [Recover]\@
;は[回復しない] # を[回復する]
PRINTFORML [3] - Dying \@ GETBIT(FLAG:オートリカバー設定1, 2) == 0 ? [Don't revive] # [Revive]\@
;は[復活させない] # を[復活させる]
DRAWLINE
LOCALS = [10] - Recover MP
;回復魔法は
PRINTFORM %LOCALS, 28, LEFT%
IF PART_VAR_READ(FLAG:オートリカバー設定3, 3, 0) == 100
	PRINTL Do not Use
ELSEIF PART_VAR_READ(FLAG:オートリカバー設定3, 3, 0) != 0
	PRINTFORML MP at{PART_VAR_READ(FLAG:オートリカバー設定3, 3, 0)} percent or more will not trigger auto recover
ELSE
	PRINTL Used as long as MP is missing
ENDIF

LOCALS:0 = Medicine（HP+30）
LOCALS:1 = Life stone（HP+25\%）
LOCALS:2 = OxBezoar（HP+200）
LOCALS:3 = Bead（HP+100\%）
LOCALS:4 = ディス系アイテム
LOCALS:5 = SacredWater
LOCALS:6 = RevivalBead（Resurrect and heal HP25\%）
;復活
LOCALS:7 = BalmOfLife（Ressurect and heal HP100\%）
REPEAT 8
PRINTFORM [{COUNT + 20}] - %LOCALS:COUNT, 21, LEFT%
IF PART_VAR_READ(FLAG:オートリカバー設定2, 2, COUNT) == 10
	PRINTL Do Not Use
ELSEIF PART_VAR_READ(FLAG:オートリカバー設定2, 2, COUNT) == 0
	PRINTL Use Only
ELSE
	PRINTFORML {PART_VAR_READ(FLAG:オートリカバー設定2, 2, COUNT)} left, Do not use more than once
ENDIF
REND

DRAWLINE
PRINTFORML [99] - During auto recovery \@ GETBIT(FLAG:オートリカバー設定1, 3) == 0 ? [No confirmation] # [Ask confirmation]\@
;[確認しない] # [確認を取る]
DRAWLINE
PRINTL [100] - Return
CALL INPUTINT, 0, 1, 2, 3, 10, 20, 21, 22, 23, ,24 ,25 ,26 ,27 ,99, 100
SELECTCASE RESULT
	CASE 0
		INVERTBIT FLAG:オートリカバー設定1, 0
	CASE 1
		PRINTL Auto Recover HP under what health percentage
		CALL INPUT_MANY, 1, 100
		SIF RESULT != 0
			FLAG:オートリカバー設定3 = PART_VAR_WRITE(FLAG:オートリカバー設定3, 3, 1, RESULT)
	CASE 2
		INVERTBIT FLAG:オートリカバー設定1, 1
	CASE 3
		INVERTBIT FLAG:オートリカバー設定1, 2
	CASE 10
		PRINTL Auto Recover MP under what percentage
		CALL INPUT_MANY, 0, 100
		FLAG:オートリカバー設定3 = PART_VAR_WRITE(FLAG:オートリカバー設定3, 3, 0, RESULT)
	CASE 20 TO 27
		LOCAL = RESULT - 20
		PRINTL How many items should be kept as reserves?
		;How many items will you leave?
		CALL INPUT_MANY, 0, 10
		FLAG:オートリカバー設定2 = PART_VAR_WRITE(FLAG:オートリカバー設定2, 2, LOCAL, RESULT)
	CASE 99
		INVERTBIT FLAG:オートリカバー設定1, 3
	CASEELSE
		RETURN 0
ENDSELECT
RESTART



;英語怪しい
;一つの変数に複数の数値を保存できるようにする関数
;負数は不可
;例：12,34,56という３つの数字を一つのFLAGに書き込める
;FLAG:123 = 0
;FLAG:123 = PART_VAR_WRITE(FLAG:123, 2, 0, 12)
;FLAG:123 = PART_VAR_WRITE(FLAG:123, 2, 1, 34)
;FLAG:123 = PART_VAR_WRITE(FLAG:123, 2, 2, 56)
;この時点のFLAG:123 = 563412
;PRINTFORM PART_VAR_READ(FLAG:123, 2, 2) → 56
;PRINTFORM PART_VAR_READ(FLAG:123, 2, 0) → 12
;PRINTFORM PART_VAR_READ(FLAG:123, 2, 1) → 34
;Emueraでは64ビット符号付整数、-9223372036854775808〜9223372036854775807の範囲の値を扱える
;つまりこの関数を使う時は一つの変数につき18桁まで


;0:読み込む変数　1:分割桁数　2:何番目か
@PART_VAR_READ(ARG, ARG:1, ARG:2)
#FUNCTION
SIF ARG:1 <= 0 || ARG:2 < 0 || ARG:1 * (ARG:2 + 1) > 18
	PRINTFORML ERROR!引数が異常です ARG:0={ARG} ARG:1={ARG:1} ARG:2={ARG:2}
ARG /= POWER(10, ARG:1 * ARG:2)
RETURNF ARG % POWER(10, ARG:1)
;0:書き込む変数　1:分割桁数　2:何番目か　3:書き込む内容
;例：
;FLAG:123 = PARTITION_VARIABLE_WRITE(FLAG:123, 2, 1, 57)
@PART_VAR_WRITE(ARG, ARG:1, ARG:2, ARG:3)
#FUNCTION
SIF ARG:1 <= 0 || ARG:2 < 0 || ARG:3 < 0 || ARG:1 * (ARG:2 + 1) > 18
	PRINTFORML ERROR!引数が異常です ARG:0={ARG} ARG:1={ARG:1} ARG:2={ARG:2} ARG:3={ARG:3}
LOCAL = ARG / POWER(10, ARG:1 * (ARG:2+1))
LOCAL *=POWER(10, ARG:1)
LOCAL += ARG:3
LOCAL *=POWER(10, ARG:1 * ARG:2)
LOCAL += ARG % POWER(10, ARG:1 * ARG:2)
RETURNF LOCAL


;=====================================
;[19]ＮＴＲ設定
;=====================================
@NTR_CONFIG
#LOCALSIZE 1
LOCAL = LINECOUNT
REDRAW 0
;表示
DRAWLINE
PRINTFORM [ 0] %"ＮＴＲ機能" , 20 , LEFT% 
CALL NTR_SHOW_ONOFF , GETBIT(FLAG:ＮＴＲ機能 , 0) , 1
SIF !GETBIT(FLAG:ＮＴＲ機能 , 0)
	SETCOLOR COLOR("GRAY")
PRINTFORM [ 1] %"食堂ＮＴＲイベント" , 28 , LEFT% 
CALL NTR_SHOW_ONOFF , GETBIT(FLAG:ＮＴＲ機能 , 1)
PRINTFORM [ 2] %"娼館ＮＴＲイベント" , 28 , LEFT% 
CALL NTR_SHOW_ONOFF , GETBIT(FLAG:ＮＴＲ機能 , 2)
PRINTFORM [ 3] %"レンタル奴隷ＮＴＲイベント" , 28 , LEFT% 
CALL NTR_SHOW_ONOFF , GETBIT(FLAG:ＮＴＲ機能 , 3)
PRINTFORM [ 4] %"公衆便所ＮＴＲイベント" , 28 , LEFT% 
CALL NTR_SHOW_ONOFF , GETBIT(FLAG:ＮＴＲ機能 , 4)
PRINTFORM [ 5] %"ストリップ劇場ＮＴＲイベント" , 28 , LEFT% 
CALL NTR_SHOW_ONOFF , GETBIT(FLAG:ＮＴＲ機能 , 5)
PRINTFORM [ 6] %"コンサートＮＴＲイベント" , 28 , LEFT% 
CALL NTR_SHOW_ONOFF , GETBIT(FLAG:ＮＴＲ機能 , 6)
PRINTFORM [ 7] %"訪問販売員ＮＴＲイベント" , 28 , LEFT% 
CALL NTR_SHOW_ONOFF , GETBIT(FLAG:ＮＴＲ機能 , 7)
PRINTFORM [ 8] %"妻拉致イベント" , 28 , LEFT% 
CALL NTR_SHOW_ONOFF , GETBIT(FLAG:ＮＴＲ機能 , 8)
PRINTFORM [63] %"上司イベント" , 28 , LEFT% 
CALL NTR_SHOW_ONOFF , GETBIT(FLAG:ＮＴＲ機能 , 63)
PRINTFORML [89] %"ＮＴＲ客の設定" , 28 , LEFT% 
PRINTFORM [90] %"ＮＴＲペナルティ" , 28 , LEFT% 
CALL NTR_SHOW_ONOFF , FLAG:ＮＴＲハードモード , , "Active" , "None"
;有り" , "無し
RESETCOLOR
PRINTL
PRINTFORML [100]Return
REDRAW 1
;入力と処理
$INPUT_LOOP
INPUT
IF RESULT == 100
	RETURN 1
ELSEIF RESULT == 0
	INVERTBIT FLAG:ＮＴＲ機能 , 0
	IF GETBIT(FLAG:ＮＴＲ機能 , 0)
		REPEAT 9
			SETBIT FLAG:ＮＴＲ機能 , COUNT+1
		REND
	ELSE
		FLAG:ＮＴＲ機能 = 0
		FLAG:ＮＴＲハードモード = 0
		FLAG:ＮＴＲ客の設定 = 0
	ENDIF
ELSEIF RANGE(RESULT , 1 , 63) && GETBIT(FLAG:ＮＴＲ機能 , 0)
	INVERTBIT FLAG:ＮＴＲ機能 , RESULT
ELSEIF RESULT == 89 && GETBIT(FLAG:ＮＴＲ機能 , 0)
	PRINTL
	PRINTFORML Please Select NTR settings
	PRINTL [0] Ordinary Man
	PRINTL [1] Demon
	PRINTL [2] Foreign
	CALL INPUTINT,0,1,2
	FLAG:ＮＴＲ客の設定 = RESULT
	PRINTFORM ＮＴＲ客の設定を [
	SELECTCASE FLAG:ＮＴＲ客の設定
		CASE 0
			PRINT Ordinary Man
		CASE 1
			PRINT Demon
		CASE 2
			PRINT Foreign
	ENDSELECT
	PRINTFORMW ] is the new setting
ELSEIF RESULT == 90 && GETBIT(FLAG:ＮＴＲ機能 , 0)
	INVERTBIT FLAG:ＮＴＲハードモード , 0
ELSE
	CLEARLINE 1
	GOTO INPUT_LOOP
ENDIF
REDRAW 0
CLEARLINE LINECOUNT - LOCAL
RESTART


@NTR_SHOW_ONOFF(ARG , ARG:1 = 0 ,  ARGS = "  ON" , ARGS:1 = " OFF")
SIF  (GETBIT(FLAG:ＮＴＲ機能 , 0) || ARG:1)
	RESETCOLOR
PRINT [
IF ARG && (GETBIT(FLAG:ＮＴＲ機能 , 0) || ARG:1)
	SETCOLOR COLOR("AQUA")
ELSE
	SETCOLOR COLOR("GRAY")
ENDIF
PRINTFORM %ARGS%
SIF  (GETBIT(FLAG:ＮＴＲ機能 , 0) || ARG:1)
	RESETCOLOR
PRINT  / 
IF !ARG &&  (GETBIT(FLAG:ＮＴＲ機能 , 0) || ARG:1)
	SETCOLOR COLOR("AQUA")
ELSE
	SETCOLOR COLOR("GRAY")
ENDIF
PRINTFORM  %ARGS:1%
SIF  (GETBIT(FLAG:ＮＴＲ機能 , 0) || ARG:1)
	RESETCOLOR
PRINTL ]

;==============================================================


@DUNGEON_COMMAND_CONFIG
IF FLAG:ダンジョン内操作設定 < 0 || FLAG:ダンジョン内操作設定 > 1
	FLAG:ダンジョン内操作設定 = 0
ENDIF

DRAWLINE
PRINTL Set up the operation in the dungeon
DRAWLINE
PRINT The current setting is
SELECTCASE FLAG:ダンジョン内操作設定
	CASE 0
		PRINT [Default]
	CASE 1
		PRINT [ＦＰＳ]
ENDSELECT
PRINTL It is the type
PRINTL
PRINTL [0] [Default] Type
PRINTL [1] [ＦＰＳ] Type

CALL INPUTINT,0,1

SELECTCASE RESULT
	CASE 0
		FLAG:ダンジョン内操作設定 = 0
		PRINTL Set to [Default]
	CASE 1
		FLAG:ダンジョン内操作設定 = 1
		PRINTL Set to [ＦＰＳ]
	CASEELSE
		FLAG:ダンジョン内操作設定 = 0	
		PRINTL A numerical value outside the range has been set, the default setting is restored
ENDSELECT

@INPUT_YN_CONFIG
IF FLAG:二択入力設定 < 0 || FLAG:二択入力設定 > 1
	FLAG:二択入力設定 = 0
ENDIF

DRAWLINE
PRINTL Set input for 2-option selection
DRAWLINE
PRINT The current setting is 
SELECTCASE FLAG:二択入力設定
	CASE 0
		PRINT [Default]
	CASE 1
		PRINT [Yes / No, only responds to Y and N keys]
	CASE 2
		PRINT [It responds to Y and N keys with all 2 choices]
ENDSELECT
PRINTL It is set to 
PRINTL
PRINTL [0] [Default]
PRINTL [1] [Yes / No, only responds to Y and N keys]
PRINTL [2] [It responds to Y and N keys with all 2 choices]

CALL INPUTINT,0,1,2

SELECTCASE RESULT
	CASE 0
		FLAG:二択入力設定 = 0
		PRINTL [Default] setting will be used
	CASE 1
		FLAG:二択入力設定 = 1
		PRINTL [Yes / No, only responds to Y and N keys] is the new setting
	CASE 2
		FLAG:二択入力設定 = 2
		PRINTL [It responds to Y and N keys with all 2 choices] is the new setting
	CASEELSE
		FLAG:二択入力設定 = 0
		PRINTL A numerical value outside the range has been set, the default setting is restored
ENDSELECT

;---- EDIT 労役実行確認省略オプション追加(2011/02/04) ADD START ---------
;========================================================================
; 労役者一括選択設定オプション
; 食堂、売春で働く人を一括で選択できるようにするオプション
;========================================================================
@WORK_CONFIRM_SKIP_CONFIG
IF FLAG:労役実行確認省略設定 < 0 || FLAG:労役実行確認省略設定 > 1
	FLAG:労役実行確認省略設定 = 0
ENDIF

DRAWLINE
PRINTL If you need comfirmation for working in the cafeteria / prostitution.
DRAWLINE
PRINT The current setting is:
;現在の設定は
SELECTCASE FLAG:労役実行確認省略設定
	CASE 0
		PRINT [Do not Omit]
	CASE 1
		PRINT [Omit]
ENDSELECT
PRINTL 
;です。
PRINTL Change to which setting?
CALL INPUT_YN,"[Do not omit]","[omit]"
;省略しない]","[省略する
IF RESULT == 0
	FLAG:労役実行確認省略設定 = 0
	PRINTL Do not skip the work confirmation
ELSE
	FLAG:労役実行確認省略設定 = 1
	PRINTL Skip the work confirmation
ENDIF
;---- EDIT 労役実行確認省略オプション追加(2011/02/04) ADD END -----------

;---- EDIT 夜這い不許可性別設定オプション追加(2011/03/10) ADD START ---------
;========================================================================
; 夜這い不許可性別設定オプション
; キャラクタが仲魔になった時に特定の性別のキャラを自動的に
;========================================================================
@CONTROL_SELF_CONFIG

DRAWLINE
PRINTL When a new character of a specific sex becomes an intermediary, the nightcrawl setting will default to the value set here.
DRAWLINE
PRINTL
$PRINT
PRINTFORML [0] Male(Excluding traps) [\@ FLAG:夜這い不許可性別 & 1 ? Disallow # Allow\@]
;不許可	許可
PRINTFORML [1] Trap           [\@ FLAG:夜這い不許可性別 & 2 ? Disallow # Allow\@]
PRINTFORML [2] Female               [\@ FLAG:夜這い不許可性別 & 4 ? Disallow # Allow\@]
PRINTL [100] Return
PRINTL
CALL INPUTINT,0,1,2,100
IF RESULT == 100
	RETURN 0
ELSE
	INVERTBIT FLAG:夜這い不許可性別,RESULT
	CLEARLINE 6
	GOTO PRINT
ENDIF
;---- EDIT 夜這い不許可性別設定オプション追加(2011/03/10) ADD END -----------

@PRINTCPERLINE_SETTING
#LOCALSIZE 1
LOCAL = PRINTCPERLINE()
DRAWLINE
PRINTL Change the number of commands displayed per line
DRAWLINE
PRINT [0] Shop Command 
IF FLAG:ショップコマンドを並べる数
	PRINTFORML [ON:{FLAG:ショップコマンドを並べる数}]
ELSE
	PRINTL [OFF]
ENDIF
PRINT [1] Train Command     
IF FLAG:調教コマンドを並べる数
	PRINTFORML [ON:{FLAG:調教コマンドを並べる数}]
ELSE
	PRINTL [OFF]
ENDIF
PRINTFORM %"[2] Training parameters", 21, LEFT%
;調教パラメータ
IF FLAG:調教パラメータを並べる数
	PRINTFORML [ON:{FLAG:調教パラメータを並べる数}]
ELSE
	PRINTL [OFF]
ENDIF
PRINTL [100] Return
PRINTL
CALL INPUTINT ,0,1,2,100
SELECTCASE RESULT
	CASE 100
		RETURN 0
	CASE 0
		GOTO SHOP_SET
	CASE 1
		GOTO TRAIN_SET
	CASE 2
		GOTO TRAIN_PALAM_SET
ENDSELECT

$SHOP_SET
DRAWLINE
PRINTL Change the number of shop commands displayed on one line
PRINTL (It can not be larger than the emuera setting)
PRINTL 
PRINTFORML The current setting is {FLAG:ショップコマンドを並べる数}
DRAWLINE
PRINTL [0] Use emuera default
;設定をemueraに任せる
SIF LOCAL == 0 || LOCAL >= 3
	PRINTL [3] Sort by 3
SIF LOCAL == 0 || LOCAL >= 4
	PRINTL [4] Sort by 4
SIF LOCAL == 0 || LOCAL >= 5
	PRINTL [5] Sort by 5
SIF LOCAL == 0 || LOCAL >= 6
	PRINTL [6] Sort by 6
PRINTL [100]Cancel
CALL INPUTINT ,0,3,4,5,6,100
SELECTCASE RESULT
	CASE 100
	
	CASE 0
		FLAG:ショップコマンドを並べる数 = (PRINTCPERLINE() > 0 ? PRINTCPERLINE() # 3)
		PRINTW The default emuera setting will be used
		;I will leave the configuration to emuera
	CASE 3 TO 6
		;emuera側の設定より大きくする事はできない
		IF LOCAL != 0 && RESULT > LOCAL
			PRINTW It can not be larger than the emuera side setting
			GOTO SHOP_SET
		ELSE
			FLAG:ショップコマンドを並べる数 = RESULT
			PRINTFORMW Number of shop commands diplayed per line has been set to {FLAG:ショップコマンドを並べる数}
		ENDIF
ENDSELECT
RESTART

$TRAIN_SET
DRAWLINE
PRINTL Change the number of training commands displayed per line
PRINTL (It can not be larger than the emuera side setting)
PRINTL 
PRINTFORML The current setting is {FLAG:調教コマンドを並べる数}
DRAWLINE
PRINTL [0] Use the emuera default
;Leave the configuration to emuera
SIF LOCAL == 0 || LOCAL >= 3
	PRINTL [3] Sort by 3
SIF LOCAL == 0 || LOCAL >= 4
	PRINTL [4] Sorty by 4
SIF LOCAL == 0 || LOCAL >= 5
	PRINTL [5] Sort by 5
SIF LOCAL == 0 || LOCAL >= 6
	PRINTL [6] Sort by 6
PRINTL [100]Cancel
CALL INPUTINT ,0,3,4,5,6,100
SELECTCASE RESULT
	CASE 100
	
	CASE 0
		FLAG:調教コマンドを並べる数 = (PRINTCPERLINE() > 0 ? PRINTCPERLINE() # 4)
		PRINTW The default emuera setting will be used
		;Leave the configuration to emuera
	CASE 3 TO 6
		;emuera側の設定より大きくする事はできない
		IF LOCAL != 0 && RESULT > LOCAL
			PRINTW It can not be larger than the emuera side setting
			GOTO TRAIN_SET
		ELSE
			FLAG:調教コマンドを並べる数 = RESULT
			PRINTFORMW The number of training compands diplayed per line has been set to {FLAG:調教コマンドを並べる数}
			;調教コマンドを並べる数を	に設定しました
		ENDIF
ENDSELECT
RESTART

$TRAIN_PALAM_SET
DRAWLINE
PRINTL Change the number of training parameters displayed on one line
PRINTL (It can not be larger than the emuera side setting)
PRINTL 
PRINTFORML The current setting is {FLAG:調教パラメータを並べる数}
DRAWLINE
PRINTL [0] Use emuera default
;Leave the configuration to emuera
SIF LOCAL == 0 || LOCAL >= 3
	PRINTL [3] Sort by 3
SIF LOCAL == 0 || LOCAL >= 4
	PRINTL [4] Sort by 4
SIF LOCAL == 0 || LOCAL >= 5
	PRINTL [5] Sort by 5
SIF LOCAL == 0 || LOCAL >= 6
	PRINTL [6] Sort by 6
PRINTL [100]Cancel
CALL INPUTINT ,0,3,4,5,6,100
SELECTCASE RESULT
	CASE 100
	CASE 0
		FLAG:調教パラメータを並べる数 = (PRINTCPERLINE() > 0 ? PRINTCPERLINE() # 3)
		PRINTW The default emuera setting will be used
		;Leave the configuration to emuera
	CASE 3 TO 6
		;emuera側の設定より大きくする事はできない
		IF LOCAL != 0 && RESULT > LOCAL
			PRINTW It can not be larger than the emuera side setting
			GOTO TRAIN_SET
		ELSE
			FLAG:調教パラメータを並べる数 = RESULT
			PRINTFORMW 調教パラメータを並べる数を {FLAG:調教パラメータを並べる数}に設定しました
		ENDIF
ENDSELECT
RESTART

@SHOPPRINTCPL()
#FUNCTION
IF FLAG:ショップコマンドを並べる数 == 0 
	IF PRINTCPERLINE() == 0
		RETURNF 9999
	ELSE
		RETURNF PRINTCPERLINE()
	ENDIF
ENDIF
RETURNF FLAG:ショップコマンドを並べる数

@TRAINPRINTCPL()
#FUNCTION
IF FLAG:調教コマンドを並べる数 == 0
	IF PRINTCPERLINE() == 0
		RETURNF 9999
	ELSE
		RETURNF PRINTCPERLINE()
	ENDIF
ENDIF
RETURNF FLAG:調教コマンドを並べる数

;===========================================================
;[26] - リスト表示数設定
;===========================================================
;-------------------------------------------------
;関数名:リスト表示数
;概　要:リスト表示数取得関数
;引　数:なし
;戻り値:リスト表示数(10〜50)。未設定の場合は20
;備　考:式中関数
;いちいち三項書くのも面倒なのでつい
;-------------------------------------------------
@リスト表示数
#FUNCTION
RETURNF FLAG:リスト表示数設定 ? FLAG:リスト表示数設定 # 20

;===========================================================
;[27] - 合体用ソフトクイック設定
;===========================================================
;-------------------------------------------------
;関数名:FSQS_BIT
;概　要:合体用ソフトクイック設定管理関数
;引　数:ARG:0…インストールソフトの番号(とりあえず500〜599)
;　　　 ARG:1…[省略可]モード(-1.GET/0.GET & CHECK/1.SET/2.CLEAR/3.INVERT/4.SAVE/5.RESET)
;　　　        省略した場合は0(GET & CHECK)。ソフトを持っていない場合も0を返す
;戻り値:真偽値(0か1)。計算後のARG:0番目のBITの状態を返す
;備　考:式中関数
;対象ソフトの設定がどうなっているか管理している関数
;細々とした機能があって無駄にややこしい作り
;他所では基本的にソフト番号だけ渡せばいいと思う
;SOFT_IS_FUSIONSOFTは別に呼ぶ必要がある(状況によって変わるので)
;-------------------------------------------------
@FSQS_BIT(ARG:0, ARG:1)
#FUNCTION
#LOCALSIZE 16
#DIM LCOUNT
#DIM LOADED
IF !LOADED
	SPLIT SAVESTR:合体用ソフトクイック設定, "_", LOCALS, LOADED
	FOR LCOUNT, 0, LOADED
		SIF ISNUMERIC(LOCALS:LCOUNT) && INRANGE(TOINT(LOCALS:LCOUNT), 0, VARSIZE("LOCAL") * 64 - 1)
			SETBIT LOCAL:(TOINT(LOCALS:LCOUNT) >> 6), TOINT(LOCALS:LCOUNT) & 63
	NEXT
	LOADED = 1
ENDIF
SIF !INRANGE(ARG:0, 0, VARSIZE("LOCAL") * 64 - 1)
	THROW @FSQS_BITで範囲外のARG:0（{ARG:0}）
SELECTCASE ARG:1
	CASE -1	;GET
	CASE 0	;GET & CHECK
		RETURNF GETBIT(LOCAL:(ARG:0 >> 6), ARG:0 & 63) && ITEM:(ARG:0)
	CASE 1	;SET
		SETBIT LOCAL:(ARG:0 >> 6), ARG:0 & 63
	CASE 2	;CLEAR
		CLEARBIT LOCAL:(ARG:0 >> 6), ARG:0 & 63
	CASE 3	;INVERT
		INVERTBIT LOCAL:(ARG:0 >> 6), ARG:0 & 63
	CASE 4	;SAVE
		LOCALS:0 '= ""
		FOR LCOUNT, 500, 600
			SIF GETBIT(LOCAL:(LCOUNT >> 6), LCOUNT & 63)
				LOCALS:0 += "_" + TOSTR(LCOUNT)
		NEXT
		SAVESTR:合体用ソフトクイック設定 '= LOCALS:0
	CASE 5	;RESET
		VARSET LOCAL
		SAVESTR:合体用ソフトクイック設定 '= ""
	CASEELSE
		THROW @FSQS_BITで正体不明のARG:1（{ARG:1}）
ENDSELECT
RETURNF GETBIT(LOCAL:(ARG:0 >> 6), ARG:0 & 63)

;-------------------------------------------------
;関数名:合体用ソフトクイック設定
;概　要:合体用ソフトクイック設定メイン関数
;引　数:なし
;戻り値:なし(RESULT保護)
;この作りなら合体用ソフトが増えても平気なはず…
;-------------------------------------------------
@合体用ソフトクイック設定
#LOCALSIZE 6
IF !LOCAL:1
	LOCAL:1 = 1					;初回済みフラグ
	LOCAL:2 = RESULT			;RESULT保護
	LOCAL:3 = CURRENTREDRAW()	;REDRAW値
	LOCAL:4 = GETCOLOR()		;色値
	REDRAW 2
ENDIF
LOCAL:5 = LINECOUNT				;行数
PRINTL Please select the software you want to display at the bottom of the union list
DRAWLINE
FOR LOCAL:0, 500, 600
	IF ITEM:(LOCAL:0) && SOFT_IS_FUSIONSOFT(LOCAL:0)
		SETCOLOR FSQS_BIT(LOCAL:0) ? LOCAL:4 # COLOR("gray")
		PRINTFORM [{LOCAL:0}] %ITEMNAME_E(LOCAL:0), 20, LEFT% \@ FSQS_BIT(LOCAL:0) ? [ ON] # [OFF] \@
		CALLFORM SOFT_EXPLAIN_{LOCAL:0}
		SETCOLOR LOCAL:4
	ENDIF
NEXT
DRAWLINE
PRINTL [  0] Return
DO
	INPUT
	SIF RESULT && (ITEM:RESULT !| SOFT_IS_FUSIONSOFT(RESULT))
		CLEARLINE 1
LOOP RESULT && (ITEM:RESULT !| SOFT_IS_FUSIONSOFT(RESULT))
IF RESULT
	CALLF FSQS_BIT(RESULT, 3)	;INVERT
	CLEARLINE LINECOUNT - LOCAL:5
	RESTART
ENDIF
;後始末
LOCAL:1 = 0				;フラグ折る
REDRAW LOCAL:3			;REDRAW戻す
CALLF FSQS_BIT(0, 4)	;SAVE
RETURN LOCAL:2			;RESULTを返す



;=====================================
;[28]ステータス画面設定
;=====================================
@SHOW_STATUS_CONFIG
#LOCALSIZE 2
LOCAL = LINECOUNT
REDRAW 0
;表示
DRAWLINE
PRINTL Status screen/Set display type of the equipment change screen.
PRINTL
PRINTL [Character] This is the old display method.
PRINTL [Window] This is a new display method in which the status information is contained in the window screen.
PRINTL  The window display method requires a wider window width than the character display method.
PRINTL
PRINTL [Wide] Extend the display area of some variables and characters.
DRAWLINE
PRINTFORM [ 0] %"Character status screen" , 28 , LEFT% 
;能力確認ステータス画面
CALL SHOW_ONOFF , FLAG:ステータス画面タイプ , 0 , "Character" , "Window"
;キャラクタ		ウィンドウ
PRINTFORM [ 1] %"Jakou Manor status screen" , 28 , LEFT% 
;邪教の館ステータス画面
CALL SHOW_ONOFF , FLAG:ステータス画面タイプ , 1 , "Character" , "Window"
PRINTFORM [ 2] %"Equipment change screen" , 28 , LEFT% 
;装備変更画面
CALL SHOW_ONOFF , FLAG:ステータス画面タイプ , 2 , "Character" , "Window"
PRINTL
PRINTL [90] Set all to character　　[91] Set all to window
;全てキャラクタ　　全てウィンドウ
PRINTL
PRINTFORM [ 3] %"Some varible and character display areas" , 28 , LEFT%
;一部の変数と文字の表示領域
CALL SHOW_ONOFF , FLAG:カスタムゲーム画面 , 0 , "Wide" , "Normal"
;幅広	普通
IF GETBIT (FLAG:カスタムゲーム画面,0)
	PRINTFORM [ 4] %"Skill name display area" , 28 , LEFT%
	;スキル名の表示領域
	CALL SHOW_ONOFF , FLAG:カスタムゲーム画面 , 1 , "Wide" , "Normal"
ENDIF
DRAWLINE
PRINTFORML [100]Return
REDRAW 1
;入力と処理
$INPUT_LOOP
INPUT
IF RESULT == 100
	RETURN 1
ELSEIF RANGE(RESULT,0,2)
	INVERTBIT FLAG:ステータス画面タイプ , RESULT
ELSEIF RESULT == 3
	INVERTBIT FLAG:カスタムゲーム画面 , 0
	IF FLAG:カスタムゲーム画面 == 1
		FLAG:ショップコマンドを並べる数 = 5
		FLAG:調教コマンドを並べる数 = 5
		FLAG:調教パラメータを並べる数 = 5
	ELSE
		FLAG:ショップコマンドを並べる数 = 3
		FLAG:調教コマンドを並べる数 = 3
		FLAG:調教パラメータを並べる数 = 3
		FLAG:カスタムゲーム画面 = 0
	ENDIF
ELSEIF RESULT == 4
	INVERTBIT FLAG:カスタムゲーム画面 , 1
ELSEIF RESULT == 90
	FOR COUNT, 0, 3
		SETBIT FLAG:ステータス画面タイプ, COUNT
	NEXT
ELSEIF RESULT == 91
	FLAG:ステータス画面タイプ = 0
ELSE
	CLEARLINE 1
	GOTO INPUT_LOOP
ENDIF
REDRAW 0
CLEARLINE LINECOUNT - LOCAL
RESTART


@SHOW_ONOFF(ARG , ARG:1 = 0 ,  ARGS = "  ON" , ARGS:1 = " OFF")
PRINT [
IF GETBIT(ARG , ARG:1)
	SETCOLOR COLOR("AQUA")
ELSE
	SETCOLOR COLOR("GRAY")
ENDIF
PRINTFORM %ARGS%
RESETCOLOR
PRINT  / 
IF !GETBIT(ARG , ARG:1)
	SETCOLOR COLOR("AQUA")
ELSE
	SETCOLOR COLOR("GRAY")
ENDIF
PRINTFORM  %ARGS:1%
RESETCOLOR
PRINTL ]

;==============================================================

;@合体用ソフトクイック設定_OPTION
;#LOCALSIZE 1
;#LOCALSSIZE 6
;$合体用ソフトクイック設定_LOOP
;LOCAL = -1
;PRINTL 合体リストの下部に表示したいソフトを選んでください
;SIF ITEM:Albert
;	LOCALS = [0] Albert　　合体事故の発生を防ぐ。※Copernicusと同時使用すると意味を為さない。
;SIF ITEM:Paracelsus
;	LOCALS:1 = [1] Paracelsus　悪魔合体時、元のレベルの代わりに現在の悪魔のレベルを使用する。
;SIF ITEM:Laplace
;	LOCALS:2 = [2] Laplace　　　悪魔合体時、レベルの高い悪魔が出来やすくなる。
;SIF ITEM:Copernicus
;	LOCALS:3 = [3] Copernicus　悪魔合体時、合体事故が発生しやすくなる。※アルバートと同時使用すると意味を為さない。
;SIF ITEM:Goetia
;	LOCALS:4 = [4] Goetia　　悪魔合体時、通常のオトコ悪魔2身合体において合体結果「天使」を「堕天使」に変更するコンバータ。
;SIF ITEM:BookOfRaziel
;	LOCALS:5 = [5] BookOfRaziel　悪魔合体時、合体結果が特定の悪魔である場合、合体結果の悪魔をデビルチルドレン仕様に変更するコンバータ。
;REPEAT 6
;	;所持していない場合は飛ばす
;	STRLENFORM %LOCALS:COUNT%
;	SIF RESULT == 0
;		CONTINUE
;	;オンオフ判定
;	IF GETBIT(FLAG:合体用ソフトクイック設定, COUNT) == 1
;		RESETCOLOR
;	ELSE
;		SETCOLOR COLOR("灰色")
;	ENDIF
;	PRINTFORML %LOCALS:COUNT%
;REND
;RESETCOLOR
;PRINTFORML [100] もどる
;CALL INPUTINT,0,1,2,3,4,5,100
;
;IF RESULT == 100
;	;一つでもオンにしている場合
;	REPEAT 6
;		IF GETBIT(FLAG:合体用ソフトクイック設定, COUNT) == 1
;		PRINT ON
;			SETBIT FLAG:合体用ソフトクイック設定, 6
;			RETURN
;		ENDIF
;	REND
;	;全てオフの場合
;	PRINT OFF
;	CLEARBIT FLAG:合体用ソフトクイック設定, 6
;	RETURN
;ENDIF
;
;IF GETBIT(FLAG:合体用ソフトクイック設定, RESULT) == 1
;	CLEARBIT FLAG:合体用ソフトクイック設定, RESULT
;ELSE
;	SETBIT FLAG:合体用ソフトクイック設定, RESULT
;ENDIF
;GOTO 合体用ソフトクイック設定_LOOP
