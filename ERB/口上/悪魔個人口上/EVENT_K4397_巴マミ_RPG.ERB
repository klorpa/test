@BATTLE_MESSAGE_K4397, ARG,ARG:1 = 0
LOCAL:1 = 1
LOCAL = CFLAG:ARG:入力行動
LOCALS = "EMPTY"

;崩壊してる場合は口上表示しない
SIF TALENT:ARG:9
	RETURN 0

CALLFORM SKILL_EFECT_{LOCAL}
IF RESULT == 1
	CALLFORM SKILL_TYPE_{CFLAG:ARG:入力行動}
	SELECTCASE RESULT
		;Slash
		CASE 0
			IF RAND:2
				LOCALS = リボンよ、切り裂け！
			ELSE
				LOCALS = Gunだけだと思った？残念ね。
			ENDIF
		;Gun
		CASE 1
			IF RAND:2
				LOCALS = トッカ、ティーロ、またトッカ！
			ELSE
				LOCALS = 魔弾の舞踏、舞うは魔法少女！
			ENDIF
		;Strke
		CASE 2
			IF RAND:2
				LOCALS = ちょっと離れてもらえる？
			ELSE
				LOCALS = Gunだけだと思った？残念ね。
			ENDIF
		;Skill
		CASE 3
			IF RAND:2
				LOCALS = リボンよ、食らいつけ！
			ELSE
				LOCALS = Gunだけだと思った？残念ね。
			ENDIF
		;Fire
		CASE 4
			IF RAND:2
				LOCALS = 『ラ・パロットラ・チェ・ブルシア』！
			ELSE
				LOCALS = 黒焦げね！
			ENDIF
		;Ice
		CASE 5
			IF RAND:2
				LOCALS = 『ウナ・パロットラ・ギアッチアータ』！
			ELSE
				LOCALS = 『エターナルフォー…』　…何でもないわ。
			ENDIF
		;Elect
		CASE 6
			IF RAND:2
				LOCALS = 『ラ・パロットラ・ディ・ツォーノ』！
			ELSE
				LOCALS = 痺れてちょうだい？
			ENDIF
		;Force
		CASE 7
			IF RAND:2
				LOCALS = 『オンダ・ディ・コルポ』！
			ELSE
				LOCALS = 衝撃波を直接打ち込む！
			ENDIF
		;Nerve
		CASE 8	
			IF RAND:2
				LOCALS = 『フレティア・ディ・ベレノ』！
			ELSE
				LOCALS = 毒で弱らせるわ！
			ENDIF
		;Mind
		CASE 9
			IF RAND:2
				LOCALS = どう？怖い？私のこと。
			ELSE
				LOCALS = 佐倉さんほどでは無いけど、使えるのよ？
			ENDIF
		;Light
		;ここらへんからネタが切れる
		CASE 10
			IF RAND:2
				LOCALS = 『破邪の力で相手はし…』　…何でもないわ。
			ELSE
				LOCALS = 光に還りなさい！
			ENDIF
		;Dark
		CASE 11
			LOCALS = 『バーニング・ダーク・フレ…』　…何でもないわ。
		;Earth
		;うっせぇ
		CASE 12
			IF RAND:2
				LOCALS = 地属性ってあんまりネタがな…　…何でもないわ。
			ELSE
				LOCALS = 地属性って文字通り地味…　…何も言ってないわ。
			ENDIF
		;Water
		CASE 13
			IF RAND:2
				LOCALS = 『ラッセロ・ラビドー』！
			ELSE
				LOCALS = 水でもかぶって反省しなさい！
			ENDIF
		;Wind
		CASE 14
			IF RAND:2
				LOCALS = 『ラ・パロッタ・ディ・ウン・タービン』！
			ELSE
				LOCALS = 風よ！敵を切り裂け！
			ENDIF
		;Grav
		;デブさんをマミって言ったやつは天誅
		CASE 15
			IF RAND:2
				LOCALS = ケーキばっかり食べているわけじゃないのよ！　…関係ないけど。
			ELSE
				LOCALS = 胸が大きいと太って見えるのよねぇ。　…関係ないけど。
			ENDIF
		;Nuclr
		;「勇気」を「幽鬼」に変換するうろぶちワープロ
		CASE 16
			IF RAND:2
				LOCALS = 『ウナ・パロッタ・ソラーレ』！
			ELSE
				LOCALS = 太陽よ！　愛に幽鬼を与えてくれ！
			ENDIF
		;Almig
		CASE 17
			LOCALS = 全魔力をこの一撃に…！
		;Psych
		;CASE 18
		CASEELSE
			LOCALS = 私、あなた、マルカジリ！
	ENDSELECT
;回復
ELSEIF RESULT == 2 && RAND:3 == 0
	IF CFLAG:ARG:ターゲット > 6
		IF RAND:2
			LOCALS = みなさん！　今、回復します！
		ELSE
			LOCALS = みんな元気になーれ%UNICODE(0x2661)%
		ENDIF
	ELSE
		IF FLAG:(CFLAG:ARG:ターゲット) == 0 && 陥落(ARG)
			IF RAND:2
				LOCALS = ご主人様、傷を癒します！
			ELSE
				LOCALS = あなたはここで死ぬべきではないわ！
			ENDIF
		ELSE
			IF RAND:2
				LOCALS = 痛いの痛いの、飛んでいけ！
			ELSE
				LOCALS = ちちんぷいぷい、だいじょうブイ%UNICODE(0x2661)%
			ENDIF
		ENDIF
	ENDIF
;状態変化
;ELSEIF RESULT == 3
;特殊
;ELSEIF RESULT == 4
;状態回復
;ELSEIF RESULT == 5
ELSE
;	IF RAND:3 == 0
;		LOCALS = 《アバーッ！》
;	ELSEIF RAND:2
;		LOCALS = 《イヤーッ！》
;	ELSE
;		LOCALS = 《グワーッ！》
;	ENDIF
ENDIF

;ロッソ・ファンタズマ
IF LOCAL == 2995
	SELECTCASE RAND:3
	CASE 0
		LOCALS = 『ロッソ・ファンタズマ』！！！　…いつ聞いてもいい名前///
	CASE 1
		LOCALS = 借りるわ、佐倉さん！　『ロッソ・ファンタズマ』！！！
	CASEELSE
		LOCALS = この魔法を私が使う…因果ね。
	ENDSELECT
;ティロ・フィナーレ
ELSEIF LOCAL == 2997

	SELECTCASE RAND:7
	CASE 0
		LOCALS = 『ティロ・フィナーレ』！！！
	CASE 1
		LOCALS = ティロ・フィナアアアァァァーーーレッ！！！
	CASE 2
		LOCALS = 止めよ！　『ティロ・フィナーレ』！！！
	CASE 3
		LOCALS = 外さない！　『ティロ・フィナーレ』！！！
	CASE 4
		LOCALS = 隙だらけよ！　『ティロ・フィナーレ』！！！
	CASE 5
		LOCALS = 『フィロ・フィナーレ』！！！　　　　　…あれ？
	CASEELSE
		LOCALS = ティィィロ・フィナァーーーレェ！！！
	ENDSELECT

;以下、まどマギポータブル版より名前を拝借
;108_刹那五月雨撃
ELSEIF 108
	LOCALS = 『無限の魔弾』！
;112_連続撃ち
ELSEIF LOCAL == 10
	LOCALS = 『ティロ・ボレー』！
;113_散弾撃ち
ELSEIF LOCAL == 25
	LOCALS = 『ティロ・ドッピエッタ』！
;125_滅殺袖箭
ELSEIF LOCAL == 229
	LOCALS = 『ボンバルタメント』！
;223_雷霆蹴
ELSEIF LOCAL == 230
	LOCALS = ちょっと離れてもらえる？『黄金の美脚』！
;508_スク・ンダ
ELSEIF LOCAL == 328
	LOCALS = 気休めだけど、これで身を守る程度の役には立つわ。
;601_テトラジャ
ELSEIF LOCAL == 502
	LOCALS = これでもう大丈夫！
;1101_シバブー
ELSEIF LOCAL == 515
	LOCALS = 『レガーレ』！
;1122_パララ・ウェブ
ELSEIF LOCAL == 516
	LOCALS = 『レガーレ・ヴァスタアリア』！
ENDIF

SIF LOCALS != "EMPTY"
	CALL MESSAGE_B(LOCAL:1, LOCALS, LOCALS:1, LOCALS:2, LOCALS:3, LOCALS:4)

@BATTLE_EVENT_K4397, ARG, ARG:1, ARG:2
SIF ARG < 0 && NO:ARG != 4518
	RETURN 0
LOCAL:1 = 1
LOCALS = EMPTY
SELECTCASE TFLAG:戦闘イベント
	;COOP発動 ARGは発動者
	CASE 1
		IF RAND:3 == 0
			LOCALS = いっけぇ！
		ELSEIF !RAND:2
			LOCALS = これで最後よ！
		ELSE
			LOCALS = 一気に決めさせてもらうわよ！
		ENDIF
	CASE 2
	;攻撃　ARGが攻撃をする仲魔、ARG:1が敵、ARG:2がダメージ量
	CASE 11
		CALLFORM SKILL_TYPE_{CFLAG:ARG:入力行動}
		LOCAL = MAXBASE:(ARG:1):GET_TYPE(RESULT)
		;相手が死んだ
		IF BASE:(ARG:1):ＨＰ <= 0
			IF 陥落(ARG) && RAND:2
				LOCALS = あんまり格好悪いところ見せられないものね。
			ELSE
				IF RAND:2
					LOCALS = 一仕事、片付いたわね。
				ELSE
					LOCALS = 負けるもんですか。
				ENDIF
			ENDIF
		;弱点をついた。つまりCOOP
		ELSEIF LOCAL > 100 && LOCAL < 999
			IF CFLAG:(ARG:1):防御フラグ
				LOCALS = そう簡単にはいかないか。
			ELSE
				;こっちはCOOP発動に回すためにカット
				RETURN 0
			ENDIF
		;大ダメージ
		ELSEIF ダメージ割合(ARG:1, ARG:2) > 50
			IF RAND:2
				LOCALS = あと少しね。
			ELSE
				LOCALS = もう一撃…！
			ENDIF
		ELSEIF ダメージ割合(ARG:1, ARG:2) > 20
			IF RAND:2
				LOCALS = 牽制は順調ね。
			ELSE
				LOCALS = 次のマスケットを補充！
			ENDIF
		ELSEIF ダメージ割合(ARG:1, ARG:2) > 0
			IF RAND:2
				LOCALS = けっこうしぶといわね！
			ELSE
				LOCALS = 急所を外しちゃったか。
			ENDIF
		;無効化された
		ELSEIF ARG:2 == 0
			IF RAND:2
				LOCALS = 嘘、効いていない…！？
			ELSE
				LOCALS = そんな！？
			ENDIF
		;吸収された
		ELSEIF ARG:2 < 0
			IF RAND:2
				LOCALS = こんな事があるなんて！
			ELSE
				LOCALS = 攻撃を食べられた！？
			ENDIF
		ENDIF
	;被ダメージ
	;ARGが攻撃を受ける仲魔、ARG:1が敵、ARG:2がダメージ量
	CASE 12
		;死んだ
		IF BASE:ARG:ＨＰ <= 0
			IF 陥落(ARG) && RAND:2
				LOCALS = 私の体、もう動かないね…ごめんなさい、ごしゅ…じ…
			ELSE
				IF RAND:2
					LOCALS = また、死んじゃうんだ…
				ELSE
					LOCALS = え…？
				ENDIF
			ENDIF
		;大ダメージ
		;死亡フラーグ
		ELSEIF ダメージ割合(ARG, ARG:2) > 50 || 現HP割合(ARG) < 25
			IF 陥落(ARG) && RAND:2
				LOCALS = 私、一人ぼっちじゃないもの…！
			ELSE
				IF RAND:2
					LOCALS = もう何も怖くない…！
				ELSE
					LOCALS = 体が軽い…！
				ENDIF
			ENDIF
		ELSEIF ダメージ割合(ARG, ARG:2) > 20
			IF RAND:2
				LOCALS = ちょっと油断しちゃった。
			ELSE
				LOCALS = なかなかやるじゃない！
			ENDIF
		ELSEIF ダメージ割合(ARG, ARG:2) > 0
			IF RAND:2
				LOCALS = 無傷って訳にはいかないか。
			ELSE
				LOCALS = 浅いわ！
			ENDIF
		;無効
		ELSEIF ARG:2 == 0
			IF RAND:2
				LOCALS = 防御！
			ELSE
				LOCALS = はい、残念でした！
			ENDIF
		;吸収
		ELSEIF ARG:2 < 0
			IF RAND:2
				LOCALS = 攻撃がSoul Gemに吸い込まれた！？
			ELSE
				LOCALS = ああっ！　き、気持ちいいー%UNICODE(0x2661)%
			ENDIF
		ENDIF
	CASE 15
		;被反射
		PRINTFORMW ARG:2 = {ARG:2}
		IF RAND:2
			LOCALS = 嘘でしょう…！？
		ELSE
			LOCALS = 自分の攻撃がこんなに痛いなんて…！
		ENDIF
	CASE 16
		;反射
		IF RAND:2
			LOCALS = お返しよ！
		ELSE
			LOCALS = はね返れ！
		ENDIF
	CASE 17
		;敵回避
		IF RAND:2
			LOCALS = 早い！？
		ELSE
			LOCALS = 速い！？
		ENDIF
	CASE 18
		;自分回避
		IF RAND:2
			LOCALS = もう、見世物じゃないのよ？
		ELSE
			LOCALS = ハァッ！
		ENDIF
ENDSELECT
SIF LOCALS != "EMPTY"
	CALL MESSAGE_B(LOCAL:1, LOCALS, LOCALS:1, LOCALS:2, LOCALS:3, LOCALS:4)
