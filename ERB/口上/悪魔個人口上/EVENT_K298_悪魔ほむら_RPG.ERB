@BATTLE_MESSAGE_K298, ARG,ARG:1 = 0
LOCAL:1 = 1
LOCAL = CFLAG:ARG:入力行動
LOCALS = さっさと片付けてしまいましょう？

;崩壊してる場合は口上表示しない
SIF TALENT:ARG:9
	RETURN 0

;必死にくるみ割り人形のモチーフを加えてみた
CALLFORM SKILL_EFECT_{LOCAL}
IF RESULT == 1 && RAND:3 == 0
	CALLFORM SKILL_TYPE_{CFLAG:ARG:入力行動}
	SELECTCASE RESULT
		;Slash
		CASE 0
			IF RAND:2
				LOCALS = 無様に切り裂かれなさい
			ELSE
				LOCALS = 特に恨みもないけれど、ごめんなさいね
			ENDIF
		;Gun
		CASE 1
			IF RAND:2
				LOCALS = 昔を思い出すわね…%UNICODE(0x2661)%
			ELSE
				LOCALS = 躱せるようにしてあげるつもりもないもの
			ENDIF
		;Strke
		CASE 2
			IF RAND:2
				LOCALS = 壊れてしまいなさい、呪われた人形のように
			ELSE
				LOCALS = 小さなクララの一撃はどう？
			ENDIF
		;Skill
		CASE 3
			IF RAND:2
				LOCALS = ふふ、バラバラにしてあげる…%UNICODE(0x2661)%
			ELSE
				LOCALS = くだらない時間は取りたくはないわね
			ENDIF
		;Fire
		CASE 4
			IF RAND:2
				LOCALS = 塵になりなさい
			ELSE
				LOCALS = 悪魔が振るう地獄の炎の味はどうかしら？
			ENDIF
		;Ice
		CASE 5
			IF RAND:2
				LOCALS = 雪片が踊り狂っているわね…
			ELSE
				LOCALS = 無様に封じ込められなさい、嘗ての私のように
			ENDIF
		;Elect
		CASE 6
			IF RAND:2
				LOCALS = ふふ、存分に痺れていなさい…！
			ELSE
				LOCALS = 動かないでいて、目障りだわ
			ENDIF
		;Force
		CASE 7
			IF RAND:2
				LOCALS = 今の私なら吹き飛ばすくらいはできるわ
			ELSE
				LOCALS = これならどうかしら
			ENDIF
		;Nerve
		CASE 8	
			LOCALS = 私にまともな神経なんて、とっくにないのにね
		;Mind
		CASE 9
			IF RAND:2
				LOCALS = ふふ、貴方の記憶は本当に正確かしらね？
			ELSE
				LOCALS = 夢でも見てなさい、小さなクララのように
;くるみ割り人形の主人公、人形サイズに小さくなる、夢落ちで終わる場合を採用
			ENDIF
		;Light
		CASE 10
			IF RAND:2
				LOCALS = まどかの力の一部、こんな形で使うとはね
			ELSE
				LOCALS = 円環の理へと導かれなさい
			ENDIF
		;Dark
		CASE 11
			IF RAND:2
				LOCALS = 魔なるもの、その力のお味はどう？
			ELSE
				LOCALS = 聖なるものを貶める、その力はどう？
			ENDIF
		;Earth
		CASE 12
			LOCALS = 今の私なら大地を操るくらいお手の物よ
		;Water
		CASE 13
			IF RAND:2
				LOCALS = 頭を冷やしてみる？
			ELSE
				LOCALS = 無様に溺れなさい、哀れな人魚姫のように
			ENDIF
		;Wind
		CASE 14
				LOCALS = 吹き飛ばしてあげる…
		;Grav
		CASE 15
			IF RAND:2
				LOCALS = 潰れてしまいなさい、この罪の重みで
			ELSE
				LOCALS = 激しく参りましょうか、眼帯の彼女の様に。
			ENDIF
		;Nuclr
		CASE 16
			IF RAND:2
				LOCALS = 消えなさい、魂すらも
			ELSE
				LOCALS = もしもあの時にこれが使えていれば、勝ち目はあったのかしらね？
			ENDIF
		;Almig
		CASE 17
			LOCALS = 神に叛逆した力の一端、良く味わいなさい
		;Psych
		;CASE 18
		CASEELSE
			LOCALS = アタシ、アンタ、マルカジリ！
	ENDSELECT
;回復
ELSEIF RESULT == 2
	IF CFLAG:ARG:ターゲット > 6
		IF RAND:2
			LOCALS = 傷を治す程度、今の私には何の苦労もないわ
		ELSE
			LOCALS = その程度で魔を滅せるとでも思ったの？
		ENDIF
	ELSE
		IF RAND:2
			LOCALS = 早く立ちなさい、その程度ではないでしょ？
		ELSE
			LOCALS = 目障りだけど、あなたはまだ必要なの
		ENDIF
	ENDIF
;状態変化
;ELSEIF RESULT == 3
;特殊
;ELSEIF RESULT == 4
;状態回復
ELSEIF RESULT == 5
	LOCALS = 寝ぼけているようなら死んでもらうわ、早く起きなさい
ENDIF

;愛を抱く黒き翼
IF LOCAL == 2988
	IF RAND:3 == 0
		LOCALS = ああ、まどか、貴方のためなら…
	ELSEIF RAND:2 == 0
		LOCALS = 世界を書き換える力、その身にお受けなさい
	ELSE
		LOCALS = 私のまどかへの愛は貴方程度では受け入れられないわ
	ENDIF

;刹那五月雨撃ち
ELSEIF LOCAL == 108
	LOCALS = 鍛え上げたGun技、その身に刻んでお逝きなさい！
;連続撃ち
ELSEIF LOCAL == 112
	LOCALS = 貴方の速度で私についてこられるかしら？
;飛具ガードブレイク
ELSEIF LOCAL == 129
	LOCALS = 私の弾丸からは誰も逃れられない……！
;タルカジャ
ELSEIF LOCAL == 501
	LOCALS = しっかり一撃を打ち込みなさい
;スクカジャ
ELSEIF LOCAL == 502
	LOCALS = この手の魔法は昔を思い出すわ…
;マカカジャ
ELSEIF LOCAL == 503
	LOCALS = 少し魔力を融通してあげましょうか？
;ラクカジャ
ELSEIF LOCAL == 504
	LOCALS = 貴方は隙が大きすぎるんじゃないの？
;デクンダ
ELSEIF LOCAL == 505
	LOCALS = そんなことをしても無駄よ
;スクンダ
ELSEIF LOCAL == 507
	LOCALS = ふふふ、逃がしてあぁげない
;デカジャ
ELSEIF LOCAL == 509
	LOCALS = せいぜい無駄にあがいて見せることね
;気合
ELSEIF LOCAL == 511
	LOCALS = まどかのためにならどんなことだってできるわ…
;コンセントレイト
ELSEIF LOCAL == 512
	LOCALS = ああ…まどか…
;雄たけび
ELSEIF LOCAL == 514
	LOCALS = まどかぁぁっ―――！！
;挑発
ELSEIF LOCAL == 515
	LOCALS = 昔の私よりももっと出来損ないね、壊れた人形みたい
;Rebellion
ELSEIF LOCAL == 516
	LOCALS = さ、始めましょうか
;食いしばり
ELSEIF LOCAL == 2406
	LOCALS = あっははは、この時を待ってたの
;不屈の闘志
ELSEIF LOCAL == 2407
	LOCALS = ああ、まどか…今はもうこの痛みさえも愛おしいわ…
;スクカジャオート
ELSEIF LOCAL == 2417
	LOCALS = 昔使っていた魔法を思い出させるわね…
ELSEIF LOCAL == 2981
	LOCALS = 消えなさい、円環の果てに
ELSEIF LOCAL == 420
	LOCALS = 私の愛を見てみるつもりかしら？
ELSEIF LOCAL == 539
	LOCALS = 魔の力の一端を覗いてみなさいな
ELSEIF LOCAL == 1406
	LOCALS = 魔というのがどういうことか、教えてあげる…
ELSEIF LOCAL == 1838
	LOCALS = そう、私は朝の夢を見る…永遠に終わらない夜の中で…
ENDIF

SIF LOCALS != "EMPTY"
	CALL MESSAGE_B(LOCAL:1, LOCALS, LOCALS:1, LOCALS:2, LOCALS:3, LOCALS:4)

@BATTLE_EVENT_K298, ARG, ARG:1, ARG:2
SIF ARG < 0 && NO:ARG != 4518
	RETURN 0
LOCAL:1 = 1
LOCALS = EMPTY
SELECTCASE TFLAG:戦闘イベント
	;COOP発動 ARGは発動者
	CASE 1
		IF RAND:3 == 0
			LOCALS = まあ、せいぜい磨り潰すことね
		ELSEIF !RAND:2
			LOCALS = チャンスは作ったわ、あとは好きにして
		ELSE
			LOCALS = この隙くらいは突きなさい？
		ENDIF
	CASE 2
		IF RAND:3 == 0
			LOCALS = 終わりなさい
		ELSEIF !RAND:2
			LOCALS = せいぜい沈みなさい
		ELSE
			LOCALS = さっさと滅ぼしてあげるわ…
		ENDIF
	;攻撃　ARGが攻撃をする仲魔、ARG:1が敵、ARG:2がダメージ量
	CASE 11
		CALLFORM SKILL_TYPE_{CFLAG:ARG:入力行動}
		LOCAL = MAXBASE:(ARG:1):GET_TYPE(RESULT)
		;相手が死んだ
		IF BASE:(ARG:1):ＨＰ <= 0
			IF 陥落(ARG) && RAND:2
				LOCALS = さようなら、もう会うこともないでしょうね。
			ELSE
				IF RAND:2
					LOCALS = 次に消えたいのは誰かしら。
				ELSE
					LOCALS = その程度の力で、わたしに勝てると思っていたのかしら？
				ENDIF
			ENDIF
		;弱点をついた。つまりCOOP
		ELSEIF LOCAL > 100 && LOCAL < 999
			IF CFLAG:(ARG:1):防御フラグ
				LOCALS = ただ防いだだけかしら？芸がないのね
			ELSE
				;こっちはCOOP発動に回すためにカット
				RETURN 0
			ENDIF
		;大ダメージ
		ELSEIF ダメージ割合(ARG:1, ARG:2) > 50
			IF RAND:2
				LOCALS = あら、その程度？
			ELSE
				LOCALS = 今楽にしてあげるわ。
			ENDIF
		ELSEIF ダメージ割合(ARG:1, ARG:2) > 20
			IF RAND:2
				LOCALS = まあ、この程度なのかしらね
			ELSE
				LOCALS = 特に大した相手でもないのね
			ENDIF
		ELSEIF ダメージ割合(ARG:1, ARG:2) > 0
			IF RAND:2
				LOCALS = あら、無駄に硬いのね
			ELSE
				LOCALS = 硬い以外の芸は無いの？
			ENDIF
		;無効化された
		ELSEIF ARG:2 == 0
			IF 陥落(ARG) && RAND:2
				LOCALS = へぇ、これじゃあだめらしいわね…
			ELSE
				LOCALS = …なるほどね
			ENDIF
		;吸収された
		ELSEIF ARG:2 < 0
			IF RAND:2
				LOCALS = 貴方、なかなかに気持ちが悪いわね
			ELSE
				LOCALS = 貴方も私と似たようなものかしらね？;円環を吸収したほむほむ
			ENDIF
		ENDIF
	;被ダメージ
	;ARGが攻撃を受ける仲魔、ARG:1が敵、ARG:2がダメージ量
	CASE 12
		;死んだ
		IF BASE:ARG:ＨＰ <= 0
			IF 陥落(ARG) && RAND:2
				LOCALS = まどか…ごめんなさい…。
			ELSE
				IF RAND:2
					LOCALS = まどか…どうか…そのままに…。
				ELSE
					LOCALS = まど……か……。
				ENDIF
			ENDIF
		;大ダメージ
		ELSEIF ダメージ割合(ARG, ARG:2) > 50 || 現HP割合(ARG) < 25
			IF 陥落(ARG) && RAND:2
				LOCALS = そうそう倒れてあげるほど私はやさしくないわ
			ELSE
				IF RAND:2
					LOCALS = まどかの代わりになるのならいくらでも…
				ELSE
					LOCALS = ああ、まどか…
				ENDIF
			ENDIF
		ELSEIF ダメージ割合(ARG, ARG:2) > 20
			IF RAND:2
				LOCALS = 魔を払う力というものかしら？
			ELSE
				LOCALS = 思っていたよりはやるわね…
			ENDIF
		ELSEIF ダメージ割合(ARG, ARG:2) > 0
			IF RAND:2
				LOCALS = 貴方はその程度の力で私に立ち向かえるの？
			ELSE
				LOCALS = 温いわね、その程度かしら？
			ENDIF
		;無効
		ELSEIF ARG:2 == 0
			IF RAND:2
				LOCALS = 残念ね、私にそれは通じないわ
			ELSE
				LOCALS = 通じると思ったのかしら？　思ったよりも愚鈍なのね。
			ENDIF
		;吸収
		ELSEIF ARG:2 < 0
			IF RAND:2
				LOCALS = あら、力を分けてくれるの？
			ELSE
				LOCALS = とんだマヌケね、力をありがとう
			ENDIF
		ENDIF
	CASE 15
		;被反射
		PRINTFORMW ARG:2 = {ARG:2}
		IF RAND:2
			LOCALS = ふふ、おもしろいわね…
		ELSE
			LOCALS = 妙なものがこっちには居るのね…
		ENDIF
	CASE 16
		;反射
		IF RAND:2
			LOCALS = 悪魔にそんなものが効くと思っているのかしらね、この悪魔は
		ELSE
			LOCALS = 何も考えていないのかしら？
		ENDIF
	CASE 17
		;敵回避
		IF RAND:2
			LOCALS = へぇ、少しはやるのね
		ELSE
			LOCALS = それなりには早いのね、貴方
		ENDIF
	CASE 18
		;自分回避
		IF RAND:2
			LOCALS = それで攻撃したつもりかしら？
		ELSE
			LOCALS = 無様ね、貴方
		ENDIF
ENDSELECT
SIF LOCALS != "EMPTY"
	CALL MESSAGE_B(LOCAL:1, LOCALS, LOCALS:1, LOCALS:2, LOCALS:3, LOCALS:4)
