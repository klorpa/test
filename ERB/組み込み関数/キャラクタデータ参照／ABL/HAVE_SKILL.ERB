;===============================
;特定のスキルを習得しているかどうか
;ARG 対象のキャラ
;ARG:1 対象のスキル
;ARG:2 位置情報を返すかどうか
;==============================
@HAVE_SKILL(ARG,ARG:1,ARG:2 = 0)
#FUNCTION
#LOCALSIZE 2
#LOCALSSIZE 1

LOCAL:1 = GETNUM(ABL , "スキル1")
IF TALENT:ARG:異能者 || TALENT:ARG:達人
	IF MATCH(ABL:ARG:0, ARG:1, LOCAL:1, LOCAL:1 + FLAG:異能者スキル数+1)
		IF ARG:2 == 0
			RETURNF 1
		ELSE
			FOR LOCAL,1,FLAG:異能者スキル数+1
				LOCALS = スキル{LOCAL}
				SIF ABL:ARG:LOCALS == ARG:1
					RETURNF LOCAL
			NEXT
		ENDIF
	ENDIF
ELSE
	IF MATCH(ABL:ARG:0, ARG:1, LOCAL:1, LOCAL:1 + FLAG:スキル数+1)
		IF ARG:2 == 0
			RETURNF 1
		ELSE
			FOR LOCAL,1,FLAG:スキル数+1
				LOCALS = スキル{LOCAL}
				SIF ABL:ARG:LOCALS == ARG:1
					RETURNF LOCAL
			NEXT
		ENDIF
	ENDIF
ENDIF
LOCAL:1 = GETNUM(ABL , "装備スキル1")
IF MATCH(ABL:ARG:0, ARG:1, LOCAL:1, LOCAL:1 + 22)
	IF ARG:2 == 0
		RETURNF 1
	ELSE
		FOR LOCAL,1,22
			LOCALS = 装備スキル{LOCAL}
			SIF ABL:ARG:LOCALS == ARG:1
				RETURNF 10+LOCAL
		NEXT
	ENDIF
ENDIF
RETURNF 0