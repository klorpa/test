;-------------------------------------------------
;3P
;セックス系派生コマンド
;-------------------------------------------------
@ACT_COM500
;他の3Pから飛んできた場合の調整
SIF TEQUIP:TARGET:Ｖ挿入者 == SUBPLAYER()
	TEQUIP:TARGET:Ａ挿入者 = PLAYER
SIF TEQUIP:TARGET:Ａ挿入者 == SUBPLAYER()
	TEQUIP:TARGET:Ｖ挿入者 = PLAYER
PRINTL 両穴挿入
TSTR:0 = 両穴挿入
CALL ACT_3P
RETURN 1
;SELECTCOM = 500
;３Pの実際の処理
@ACT_3P
#DIM CHARA, 1
;CALL KOJO_MESSAGE_COM
;-------------------------------------------------
;挿入部位管理
;-------------------------------------------------
;直接コマンドを指定した場合
;IF SELECTCOM == 64
;	TFLAG:40 = 1
;	TFLAG:41 = 2
;ELSE
;	SIF SELECTCOM == 60 || SELECTCOM == 61 || SELECTCOM == 66
;		A = 1
;	SIF SELECTCOM == 62 || SELECTCOM == 63 || SELECTCOM == 67
;		A = 2
;	SIF SELECTCOM == 81 || SELECTCOM == 140
;		A = 3
;	SIF SELECTCOM == 60 || SELECTCOM == 61 || SELECTCOM == 66
;		B = 1
;	SIF SELECTCOM == 62 || SELECTCOM == 63 || SELECTCOM == 67
;		B = 2
;	SIF SELECTCOM == 81 || SELECTCOM == 140
;		B = 3
;	;前回コマンドが3Pでない
;	IF TFLAG:42 == 0
;		;今回調教者が助手=前回調教者が主人
;		IF ASSIPLAY
;			TFLAG:40 = B
;			TFLAG:41 = A
;		;今回調教者が主人=前回調教者が助手
;		ELSE
;			TFLAG:40 = A
;			TFLAG:41 = B
;		ENDIF
;	;前回コマンドが3Pである
;	ELSE
;		;今回調教者が助手=前回調教者が主人
;		IF ASSIPLAY
;			;助手の使用部位が前回の主人と同じ場合
;;			SIF A == TFLAG:40
;				TFLAG:40 = TFLAG:41
;			TFLAG:41 = A
;		ELSE
;			;主人の使用部位が前回の助手と同じ場合
;			SIF A == TFLAG:41
;				TFLAG:41 = TFLAG:40
;			TFLAG:40 = A
;		ENDIF
;	ENDIF
;ENDIF
;V経験を伴うコマンドのフラグ(処女膜再生対応)
;SIF TFLAG:40 == 1 || TFLAG:41 == 1
SIF TEQUIP:TARGET:Ｖ挿入者 >= 0
	TFLAG:19 = 1

;SIF (TALENT:3 || TALENT:6) && ASSIPLAY == 0 && EXP:0 == 0 && TFLAG:40 == 1
SIF (TALENT:恋慕 || TALENT:親愛) && ASSIPLAY == 0 && EXP:0 == 0 && TEQUIP:TARGET:Ｖ挿入者 == MASTER
	TFLAG:20 = 1

;-------------------------------------------------
;射精ゲージチェック（PLAYER）
;-------------------------------------------------
FOR LOCAL:1, 0 ,2
	CHARA = LOCAL:1 ? SUBPLAYER() # PLAYER
	SIF !HAVE_PENIS(MASTER)
		CONTINUE
	LOCAL = 2500
	;ABL:調教者の技巧をみる
	IF ABL:CHARA:2 == 0
		TIMES LOCAL , 1.00
	ELSEIF ABL:CHARA:2 == 1
		TIMES LOCAL , 1.20
	ELSEIF ABL:CHARA:2 == 2
		TIMES LOCAL , 1.40
	ELSEIF ABL:CHARA:2 == 3
		TIMES LOCAL , 1.60
	ELSEIF ABL:CHARA:2 == 4
		TIMES LOCAL , 1.80
	ELSE
		TIMES LOCAL , 2.00
	ENDIF

	;ABL:従順をみる
	IF ABL:0 == 0
		TIMES LOCAL , 0.80
	ELSEIF ABL:0 == 1
		TIMES LOCAL , 0.90
	ELSEIF ABL:0 == 2
		TIMES LOCAL , 1.00
	ELSEIF ABL:0 == 3
		TIMES LOCAL , 1.10
	ELSEIF ABL:0 == 4
		TIMES LOCAL , 1.20
	ELSE
		TIMES LOCAL , 1.30
	ENDIF

	;ABL:欲望をみる
	IF ABL:1 == 0
		TIMES LOCAL , 1.00
	ELSEIF ABL:1 == 1
		TIMES LOCAL , 1.10
	ELSEIF ABL:1 == 2
		TIMES LOCAL , 1.20
	ELSEIF ABL:1 == 3
		TIMES LOCAL , 1.30
	ELSEIF ABL:1 == 4
		TIMES LOCAL , 1.40
	ELSE
		TIMES LOCAL , 1.50
	ENDIF

	;VとAに挿入時、PALAM:潤滑をみる
	IF TFLAG:40 <= 2
		IF PALAM:TARGET:潤滑 < PALAMLV:1
			TIMES LOCAL , 0.60
		ELSEIF PALAM:TARGET:潤滑 < PALAMLV:2
			TIMES LOCAL , 0.80
		ELSEIF PALAM:TARGET:潤滑 < PALAMLV:3
			TIMES LOCAL , 1.00
		ELSEIF PALAM:TARGET:潤滑 < PALAMLV:4
			TIMES LOCAL , 1.20
		ELSEIF PALAM:TARGET:潤滑 >= PALAMLV:4
			TIMES LOCAL , 1.40
		ENDIF
	ENDIF

	;プレイヤーのABL:Ｃ感覚をみる
	IF ABL:CHARA:3 == 0
		TIMES LOCAL , 1.00
	ELSEIF ABL:CHARA:3 == 1
		TIMES LOCAL , 1.50
	ELSEIF ABL:CHARA:3 == 2
		TIMES LOCAL , 2.00
	ELSEIF ABL:CHARA:3 == 3
		TIMES LOCAL , 2.50
	ELSEIF ABL:CHARA:3 == 4
		TIMES LOCAL , 3.50
	ELSE
		TIMES LOCAL , 5.00
	ENDIF

	;EXP:Ｖ経験をみる→まぁ少しならしててもセーフということに
	;(純正)処女だと増える
	SIF TALENT:TARGET:処女
		TIMES LOCAL , 1.50
	;SIF HAVE_PENIS(MASTER)
		BASE:CHARA:2 += LOCAL
NEXT
;-------------------------------------------------
;射精ゲージチェック（助手）
;-------------------------------------------------
;B = 2500

;ABL:調教者の技巧をみる
;IF ABL:SUBPLAYER():2 == 0
;	TIMES B , 1.00
;ELSEIF ABL:SUBPLAYER():2 == 1
;	TIMES B , 1.20
;ELSEIF ABL:SUBPLAYER():2 == 2
;	TIMES B , 1.40
;ELSEIF ABL:SUBPLAYER():2 == 3
;	TIMES B , 1.60
;ELSEIF ABL:SUBPLAYER():2 == 4
;	TIMES B , 1.80
;ELSE
;	TIMES B , 2.00
;ENDIF

;ABL:従順をみる
;IF ABL:0 == 0
;	TIMES B , 0.80
;ELSEIF ABL:0 == 1
;	TIMES B , 0.90
;ELSEIF ABL:0 == 2
;	TIMES B , 1.00
;ELSEIF ABL:0 == 3
;	TIMES B , 1.10
;ELSEIF ABL:0 == 4
;	TIMES B , 1.20
;ELSE
;	TIMES B , 1.30
;ENDIF

;ABL:欲望をみる
;IF ABL:1 == 0
;	TIMES B , 1.00
;ELSEIF ABL:1 == 1
;	TIMES B , 1.10
;ELSEIF ABL:1 == 2
;	TIMES B , 1.20
;ELSEIF ABL:1 == 3
;	TIMES B , 1.30
;ELSEIF ABL:1 == 4
;	TIMES B , 1.40
;ELSE
;	TIMES B , 1.50
;ENDIF

;VとAに挿入時、PALAM:潤滑をみる
;IF TFLAG:41 <= 2
;	IF PALAM:4 < PALAMLV:1
;		TIMES B , 0.60
;	ELSEIF PALAM:4 < PALAMLV:2
;		TIMES B , 0.80
;	ELSEIF PALAM:4 < PALAMLV:3
;		TIMES B , 1.00
;	ELSEIF PALAM:4 < PALAMLV:4
;		TIMES B , 1.20
;	ELSEIF PALAM:4 >= PALAMLV:4
;		TIMES B , 1.40
;	ENDIF
;ENDIF

;プレイヤーのABL:Ｃ感覚をみる
;IF ABL:SUBPLAYER():3 == 0
;	TIMES B , 1.00
;ELSEIF ABL:SUBPLAYER():3 == 1
;	TIMES B , 1.50
;ELSEIF ABL:SUBPLAYER():3 == 2
;	TIMES B , 2.00
;ELSEIF ABL:SUBPLAYER():3 == 3
;	TIMES B , 2.50
;ELSEIF ABL:SUBPLAYER():3 == 4
;	TIMES B , 3.50
;ELSE
;	TIMES B , 5.00
;ENDIF

;SIF HAVE_PENIS(MASTER)
;	BASE:ASSI:2 += B

;調教者←→調教対象
TFLAG:28 = 3
TFLAG:挿入続行 = 1
;-------------------------------------------------
;ソース追加処理
;-------------------------------------------------
;消費体力、Willpower
DOWNBASE:TARGET:体力 += 160
DOWNBASE:TARGET:気力 += 350

SOURCE:TARGET:情愛 = 300
SOURCE:TARGET:性行動 = 100
SOURCE:TARGET:中毒充足 = 500
SOURCE:TARGET:屈従 = 500
SOURCE:TARGET:逸脱 = 500
SOURCE:TARGET:反感 = 500

;挿入している部位によって、ソースの数値が変化する
;Vに挿入している場合
;IF TFLAG:40 == 1 || TFLAG:41 == 1
IF TEQUIP:TARGET:Ｖ挿入者 >= 0
	SOURCE:1 += 400
	SOURCE:TARGET:性行動 += 100
	SOURCE:TARGET:痛み += 500
ENDIF
;Aに挿入している場合
;IF TFLAG:40 == 2 || TFLAG:41 == 2
IF TEQUIP:TARGET:Ａ挿入者 >= 0
	SOURCE:TARGET:快Ａ += 400
	SOURCE:TARGET:性行動 += 100
	SOURCE:TARGET:痛み += 800
ENDIF
;口に挿入している場合
;IF TFLAG:40 == 3 || TFLAG:41 == 3
IF TEQUIP:TARGET:口挿入者 >= 0
	SOURCE:TARGET:性行動 += 420
	SOURCE:TARGET:達成 += 150
ENDIF


;-------------------------------------------------
;特殊ソース処理
;-------------------------------------------------
;抑圧、抵抗持ちには、抑鬱ソース追加
SIF TALENT:32 || TALENT:34
	SOURCE:TARGET:鬱屈 += 500

;貞操観念持ちで恋慕、親愛持ち以外には常に反発のソースを追加する（セックス系のみ）
SIF TALENT:30 && !IS_LOVER(TARGET)
	SOURCE:TARGET:反感 += 1000

;Vに挿入している場合
;IF TFLAG:40 == 1 || TFLAG:41 == 1
IF TEQUIP:TARGET:Ｖ挿入者 >= 0
	;処女だった場合は、苦痛のソースと反発のソースを追加する
	IF TALENT:0 == 1
		SOURCE:TARGET:痛み += 5500
		SOURCE:TARGET:反感 += 3000
	ENDIF

	;再生処女だった場合は、苦痛のソースと反発のソースを追加する
	IF TALENT:1 == 1
		SOURCE:TARGET:痛み += 5500
		SOURCE:TARGET:反感 += 1000
	ENDIF

	;Vへの苦痛は先に処理しておく
	;EXP:Ｖ経験をみる（処女の反感は別途処理済みなので省略）
	IF EXP:0 < EXPLV:1
		TIMES SOURCE:TARGET:痛み , 2.50
	ELSEIF EXP:0 < EXPLV:2
		TIMES SOURCE:TARGET:痛み , 0.80
		TIMES SOURCE:TARGET:反感 , 1.20
	ELSEIF EXP:0 < EXPLV:3
		TIMES SOURCE:TARGET:痛み , 0.40
	ELSEIF EXP:0 < EXPLV:4
		TIMES SOURCE:TARGET:痛み , 0.10
	ELSEIF EXP:0 < EXPLV:5
		TIMES SOURCE:TARGET:痛み , 0.00
	ELSEIF EXP:0 >= EXPLV:5
		TIMES SOURCE:TARGET:痛み , 0.00
	ENDIF

	;PALAM:潤滑をみる
	IF PALAM:4 < PALAMLV:1
		TIMES SOURCE:TARGET:痛み , 1.20
		TIMES SOURCE:TARGET:反感 , 1.50
	ELSEIF PALAM:4 < PALAMLV:2
		TIMES SOURCE:TARGET:痛み , 0.70
		TIMES SOURCE:TARGET:反感 , 1.20
	ELSEIF PALAM:4 < PALAMLV:3
		TIMES SOURCE:TARGET:痛み , 0.40
	ELSEIF PALAM:4 < PALAMLV:4
		TIMES SOURCE:TARGET:痛み , 0.10
	ELSEIF PALAM:4 >= PALAMLV:4
		TIMES SOURCE:TARGET:痛み , 0.10
	ENDIF
ENDIF

;Aに挿入している場合
;IF TFLAG:40 == 2 || TFLAG:41 == 2
IF TEQUIP:TARGET:Ａ挿入者 >= 0
	;Aへの苦痛は先に処理しておく
	;EXP:Ａ経験をみる
	IF EXP:1 < EXPLV:1
		TIMES SOURCE:TARGET:痛み , 3.00
		TIMES SOURCE:TARGET:反感 , 3.00
	ELSEIF EXP:1 < EXPLV:2
		TIMES SOURCE:TARGET:痛み , 1.20
		TIMES SOURCE:TARGET:反感 , 2.00
	ELSEIF EXP:1 < EXPLV:3
		TIMES SOURCE:TARGET:痛み , 0.80
		TIMES SOURCE:TARGET:反感 , 1.50
	ELSEIF EXP:1 < EXPLV:4
		TIMES SOURCE:TARGET:痛み , 0.60
		TIMES SOURCE:TARGET:反感 , 1.20
	ELSEIF EXP:1 < EXPLV:5
		TIMES SOURCE:TARGET:痛み , 0.40
	ELSEIF EXP:1 >= EXPLV:5
		TIMES SOURCE:TARGET:痛み , 0.20
	ENDIF

	;PALAM:潤滑をみる
	IF PALAM:4 < PALAMLV:1
		TIMES SOURCE:TARGET:痛み , 1.20
		TIMES SOURCE:TARGET:反感 , 2.00
	ELSEIF PALAM:4 < PALAMLV:2
		TIMES SOURCE:TARGET:痛み , 1.00
		TIMES SOURCE:TARGET:反感 , 1.50
	ELSEIF PALAM:4 < PALAMLV:3
		TIMES SOURCE:TARGET:痛み , 0.60
	ELSEIF PALAM:4 < PALAMLV:4
		TIMES SOURCE:TARGET:痛み , 0.30
	ELSEIF PALAM:4 >= PALAMLV:4
		TIMES SOURCE:TARGET:痛み , 0.20
	ENDIF
ENDIF

;セックス中毒を見る
IF ABL:18 == 0
	TIMES SOURCE:TARGET:中毒充足 , 0.00
ELSEIF ABL:18 == 1
	TIMES SOURCE:TARGET:中毒充足 , 0.30
ELSEIF ABL:18 == 2
	TIMES SOURCE:TARGET:中毒充足 , 0.60
ELSEIF ABL:18 == 3
	TIMES SOURCE:TARGET:中毒充足 , 0.90
ELSEIF ABL:18 == 4
	TIMES SOURCE:TARGET:中毒充足 , 1.20
ELSEIF ABL:18 == 5
	TIMES SOURCE:TARGET:中毒充足 , 1.50
ELSEIF ABL:18 == 6
	TIMES SOURCE:TARGET:中毒充足 , 1.80
ELSEIF ABL:18 == 7
	TIMES SOURCE:TARGET:中毒充足 , 2.10
ELSEIF ABL:18 == 8
	TIMES SOURCE:TARGET:中毒充足 , 2.40
ELSEIF ABL:18 == 9
	TIMES SOURCE:TARGET:中毒充足 , 3.00
ELSEIF ABL:18 >= 10
	TIMES SOURCE:TARGET:中毒充足 , 5.00
ENDIF


;-------------------------------------------------
;射精チェック１（主人）
;-------------------------------------------------

;射精先タイプの設定
TCVAR:MASTER:ペニス使用対象 = TARGET
IF TEQUIP:TARGET:Ｖ挿入者 == MASTER
	TCVAR:MASTER:射精箇所 = 1
ELSEIF TEQUIP:TARGET:Ａ挿入者 == MASTER
	TCVAR:MASTER:射精箇所 = 2
ELSE
	TCVAR:MASTER:射精箇所 = 4
ENDIF
;射精先選択の可・不可
TFLAG:704 = 0

;-------------------------------------------------
;射精チェック２（助手）
;-------------------------------------------------

;射精先タイプの設定
TCVAR:ASSI:ペニス使用対象 = TARGET
IF TEQUIP:TARGET:Ｖ挿入者 == ASSI
	TCVAR:ASSI:射精箇所 = 1
ELSEIF TEQUIP:TARGET:Ａ挿入者 == ASSI
	TCVAR:ASSI:射精箇所 = 2
ELSE
	TCVAR:ASSI:射精箇所 = 4
ENDIF
;射精先選択の可・不可
TFLAG:704 = 0

;-------------------------------------------------
;汚れの処理
;-------------------------------------------------
FOR LOCAL:1, 0, 2
	CHARA = LOCAL:1 ? SUBPLAYER() # PLAYER
	IF TEQUIP:TARGET:Ｖ挿入者 == CHARA
		;膣内に破瓜の血の汚れを付加
		SIF TALENT:0 == 1 || TALENT:1 == 1
			CALL SET_STAIN("膣内", "破瓜の血", TARGET)
		;奴隷の膣内⇔調教者のＰの汚れが移動
		SIF HAVE_PENIS(CHARA)
			CALL MOVE_STAIN("膣内", TARGET, "ペニス", CHARA)
	ELSEIF TEQUIP:TARGET:Ａ挿入者 == CHARA
		;奴隷のＡ⇔調教者のＰの汚れが移動
		SIF HAVE_PENIS(CHARA)
			CALL MOVE_STAIN("アナル", TARGET, "ペニス", CHARA)
	ELSE
		;奴隷の口⇔調教者のＰの汚れが移動
		SIF HAVE_PENIS(CHARA)
			CALL MOVE_STAIN("口", TARGET, "ペニス", CHARA)
	ENDIF
NEXT
;IF TFLAG:41 == 1
;	;膣内に破瓜の血の汚れを付加
;	SIF TALENT:0 == 1 || TALENT:1 == 1
;		CALL SET_STAIN("膣内", "破瓜の血", TARGET)
;	;奴隷の膣内⇔助手のＰの汚れが移動
;	IF HAVE_PENIS(ASSI)
;		STAIN:TARGET:6 |= STAIN:ASSI:2
;		STAIN:ASSI:2 |= STAIN:TARGET:6
;	ENDIF
;ELSEIF TFLAG:41 == 2
;	;奴隷のＡ⇔助手のＰの汚れが移動
;	IF HAVE_PENIS(ASSI)
;		STAIN:TARGET:4 |= STAIN:ASSI:2
;		STAIN:ASSI:2 |= STAIN:TARGET:4
;	ENDIF
;ELSEIF TFLAG:41 == 3
;	;奴隷の口⇔助手のＰの汚れが移動
;	IF HAVE_PENIS(ASSI)
;		STAIN:TARGET:0 |= STAIN:ASSI:2
;		STAIN:ASSI:2 |= STAIN:TARGET:0
;	ENDIF
;ENDIF


;-------------------------------------------------
;経験の処理
;-------------------------------------------------
FOR LOCAL:1, 0, 2
	CHARA = LOCAL:1 ? SUBPLAYER() # PLAYER
	;Vに挿入している場合
	IF TEQUIP:TARGET:Ｖ挿入者 == CHARA
		CALL ADDS_EXP("Ｖ経験", 1, TARGET)
		CALL ADDS_EXP("性交経験", 1, TARGET)
		SIF TALENT:処女
			CALL ADDS_ABNORMAL_EXP("Lost virginity（３Ｐ）", TARGET)
		SIF !IS_MALE(CHARA) 
			CALL ADDS_ABNORMAL_EXP("Take Virginity（Same Sex）", CHARA)
		SIF !IS_MALE(CHARA)
			CALL ADDS_ABNORMAL_EXP("Lost virginity（Same sex）", TARGET)
		;近親相姦の場合AbnormalEXP付与
		IF 近親チェック(TARGET , CHARA)
			CALL ADDS_ABNORMAL_EXP( @"Incest（%RESULTS:0%）", TARGET)
			CALL ADDS_ABNORMAL_EXP( @"Incest（%RESULTS:1%）", CHARA)
		ENDIF
	ENDIF
	;Aに挿入している場合
	IF TEQUIP:TARGET:Ａ挿入者 == CHARA
		CALL ADDS_EXP("Ａ経験", 2, TARGET)
		CALL ADDS_EXP("性交経験", 1, TARGET)
	ENDIF
	;口に挿入している場合
	IF TEQUIP:TARGET:口挿入者 == CHARA
		CALL ADDS_EXP("フェラ経験", 1, TARGET)
	ENDIF
NEXT
;女1人を、男ふたりで犯して、それで男の間に同性愛が成立…するのはへんなきがするので
;調教者間の経験獲得はとりあえずコメントアウトしておきます
IF IS_LESBIAN(TARGET,MASTER)
	CALL ADDS_EXP("レズ経験", 5, TARGET)
	CALL ADDS_EXP("レズ経験", 5, MASTER)
ENDIF
IF IS_LESBIAN(TARGET,ASSI)
	CALL ADDS_EXP("レズ経験", 5, TARGET)
	CALL ADDS_EXP("レズ経験", 5, ASSI)
ENDIF
IF IS_LESBIAN(MASTER,ASSI)
	;CALL ADDS_EXP("レズ経験", 5, MASTER)
	;CALL ADDS_EXP("レズ経験", 5, ASSI)
ENDIF
IF IS_GAY(TARGET,MASTER)
	CALL ADDS_EXP("ＢＬ経験", 5, TARGET)
	CALL ADDS_EXP("ＢＬ経験", 5, MASTER)
ENDIF
IF IS_GAY(TARGET,ASSI)
	CALL ADDS_EXP("ＢＬ経験", 5, TARGET)
	CALL ADDS_EXP("ＢＬ経験", 5, ASSI)
ENDIF
IF IS_GAY(MASTER,ASSI)
	;CALL ADDS_EXP("ＢＬ経験", 5, MASTER)
	;CALL ADDS_EXP("ＢＬ経験", 5, ASSI)
ENDIF
;Vに挿入している場合
;IF TFLAG:40 == 1 || TFLAG:41 == 1
;	CALL ADDS_EXP("Ｖ経験", 1, TARGET)
;ENDIF

;Aに挿入している場合
;IF TFLAG:40 == 2 || TFLAG:41 == 2
;	CALL ADDS_EXP("Ａ経験", 2, TARGET)
;	PRINTL ＡEXP＋２
;ENDIF

;SexEXP
;VとAに挿入している場合（口に挿入していない場合）
;IF TFLAG:40 != 3 && TFLAG:41 != 3
;	CALL ADDS_EXP("性交経験", 2, TARGET)
;	PRINTS EXPNAME:4
;	PRINTL +2
;ELSE
;	CALL ADDS_EXP("性交経験", 1, TARGET)
;	PRINTS EXPNAME:4
;	PRINTL +1
;ENDIF

;AbnormalEXP
;IF (TFLAG:40 == 1 || TFLAG:41 == 1) && TALENT:0 == 1
;	EXP:50 += 2
;	PRINTFORML %EXPNAME:50%＋２
;	CALL ADDS_ABNORMAL_EXP("Lost virginity（３Ｐ）", TARGET)
;ENDIF




;LesbianEXP
;IF IS_LESBIAN(TARGET,MASTER) && IS_LESBIAN(TARGET,ASSI) && IS_LESBIAN(MASTER,ASSI)
;	A = 10
;	PRINTFORML %EXPNAME:40%+{A}
;	PRINTFORML %EXPNAME:40%(主人)+{A}
;	PRINTFORML %EXPNAME:40%(助手)+{A}
;	CALL ADDS_EXP("レズ経験", A, TARGET)
;	CALL ADDS_EXP("レズ経験", A, MASTER)
;	CALL ADDS_EXP("レズ経験", A, ASSI)
;ELSEIF IS_LESBIAN(TARGET,MASTER)
;	A = 5
;	PRINTFORML %EXPNAME:40%+{A}
;	PRINTFORML %EXPNAME:40%(主人)+{A}
;	CALL ADDS_EXP("レズ経験", A, TARGET)
;	CALL ADDS_EXP("レズ経験", A, MASTER)
;ELSEIF IS_LESBIAN(TARGET,ASSI)
;	A = 5
;	PRINTFORML %EXPNAME:40%+{A}
;	PRINTFORML %EXPNAME:40%(助手)+{A}
;	CALL ADDS_EXP("レズ経験", A, TARGET)
;	CALL ADDS_EXP("レズ経験", A, ASSI)
;ELSEIF IS_LESBIAN(MASTER,ASSI)
;	A = 5
;	PRINTFORML %EXPNAME:40%(主人)+{A}
;	PRINTFORML %EXPNAME:40%(助手)+{A}
;	CALL ADDS_EXP("レズ経験", A, MASTER)
;	CALL ADDS_EXP("レズ経験", A, ASSI)
;ENDIF

;ＢＬEXP
;IF IS_GAY(TARGET,MASTER) && IS_GAY(TARGET,ASSI) && IS_GAY(MASTER,ASSI)
;	A = 10
;	PRINTFORML %EXPNAME:41%+{A}
;	PRINTFORML %EXPNAME:41%(主人)+{A}
;	PRINTFORML %EXPNAME:41%(助手)+{A}
;	CALL ADDS_EXP("ＢＬ経験", A, TARGET)
;	CALL ADDS_EXP("ＢＬ経験", A, MASTER)
;	CALL ADDS_EXP("ＢＬ経験", A, ASSI)
;ELSEIF IS_GAY(TARGET,MASTER)
;	A = 5
;	PRINTFORML %EXPNAME:41%+{A}
;	PRINTFORML %EXPNAME:41%(主人)+{A}
;	CALL ADDS_EXP("ＢＬ経験", A, TARGET)
;	CALL ADDS_EXP("ＢＬ経験", A, MASTER)
;ELSEIF IS_GAY(TARGET,ASSI)
;	A = 5
;	PRINTFORML %EXPNAME:41%+{A}
;	PRINTFORML %EXPNAME:41%(助手)+{A}
;	CALL ADDS_EXP("ＢＬ経験", A, TARGET)
;	CALL ADDS_EXP("ＢＬ経験", A, ASSI)
;ELSEIF IS_GAY(MASTER,ASSI)
;	A = 5
;	PRINTFORML %EXPNAME:41%(主人)+{A}
;	PRINTFORML %EXPNAME:41%(助手)+{A}
;	CALL ADDS_EXP("ＢＬ経験", A, MASTER)
;	CALL ADDS_EXP("ＢＬ経験", A, ASSI)
;ENDIF

;依存度ベクトル
TFLAG:33 = 1

;依存度補正値(主人かつ恋慕で1、親愛で2）
IF TALENT:3 && ASSIPLAY == 0
	TFLAG:30 += 1
ELSEIF TALENT:6 && ASSIPLAY == 0
	TFLAG:30 += 2
ENDIF


RETURN 1

;===================================================
;調教タイプ
;===================================================
@COMTYPE_500
RETURN COMTYPE("派生系")


