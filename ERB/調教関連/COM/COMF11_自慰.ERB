;-------------------------------------------------
;自慰
;愛撫系コマンド、レベル3
;-------------------------------------------------
@ACT_COM11
;自慰
;バイブ、Anal vibrator、ビデオ撮影の時に内容変化

;ビデオ撮影中なら公開オナニー
;シャワー使用中ならシャワーオナニー
;読心中なら読心オナニー
;バイブ、Anal vibrator、或いは両方装備でバイブオナニー
SIF TEQUIP:28
	PRINT 公開
SIF TEQUIP:32
	PRINT シャワー
IF TEQUIP:13 && TEQUIP:14
	PRINT 二穴バイブ
ELSEIF TEQUIP:13
	PRINT Vibrator
ELSEIF TEQUIP:14
	PRINT Anal vibrator
ENDIF

IF TEQUIP:28 || TEQUIP:32 || TEQUIP:13 || TEQUIP:14
	PRINTL Masturbation
ELSE
	PRINTL Masturbation
ENDIF

TSTR:0 = 自慰
;CALL KOJO_MESSAGE_COM

;調教対象→調教対象
TFLAG:28 = 4


;-------------------------------------------------
;ソース追加処理
;-------------------------------------------------
;消費体力、Willpower
DOWNBASE:TARGET:体力 += 5
DOWNBASE:TARGET:気力 += 50

SOURCE:TARGET:快Ｃ = 80
SOURCE:TARGET:快Ｂ = 80
SOURCE:TARGET:性行動 = 100
SOURCE:TARGET:恐れ = 200
SOURCE:TARGET:中毒充足 = 200
SOURCE:TARGET:露出 = 400
SOURCE:TARGET:屈従 = 500
SOURCE:TARGET:逸脱 = 300
SOURCE:TARGET:反感 = 250
;バイブ
IF TEQUIP:13
	SOURCE:TARGET:屈従 += 100
	SOURCE:TARGET:反感 += 100
	TIMES SOURCE:TARGET:快Ｃ , 0.70
	TIMES SOURCE:TARGET:快Ｂ , 0.70
ENDIF
;アナルバイブ
IF TEQUIP:14
	SOURCE:TARGET:屈従 += 150
	SOURCE:TARGET:反感 += 150
	TIMES SOURCE:TARGET:快Ｃ , 0.70
	TIMES SOURCE:TARGET:快Ｂ , 0.70
ENDIF
;シャワー
IF TEQUIP:32
	SOURCE:TARGET:快Ｃ += 50
	SOURCE:TARGET:露出 += 100
	SOURCE:TARGET:屈従 += 50
	SOURCE:TARGET:反感 += 80
ENDIF
;ビデオ
IF TEQUIP:28
	SOURCE:TARGET:液体 += 50
	SOURCE:TARGET:欲情 += 100
	SOURCE:TARGET:反感 += 200
ENDIF



;-------------------------------------------------
;特殊ソース処理
;-------------------------------------------------
;抑圧、抵抗持ちには、抑鬱ソース追加
SIF TALENT:32 || TALENT:34
	SOURCE:TARGET:鬱屈 += 400

;中毒による中毒充足のソースは先に処理しておく
;自慰中毒を見る
IF ABL:15 == 0
	TIMES SOURCE:TARGET:快Ｃ , 1.00
	TIMES SOURCE:TARGET:快Ｖ , 1.00
	TIMES SOURCE:TARGET:快Ａ , 1.00
	TIMES SOURCE:TARGET:快Ｂ , 1.00
	TIMES SOURCE:TARGET:道具快Ｃ , 1.00
	TIMES SOURCE:TARGET:道具快Ｖ , 1.00
	TIMES SOURCE:TARGET:道具快Ａ , 1.00
	TIMES SOURCE:TARGET:道具快Ｂ , 1.00
	TIMES SOURCE:TARGET:中毒充足 , 0.00
ELSEIF ABL:15 == 1
	TIMES SOURCE:TARGET:快Ｃ , 1.10
	TIMES SOURCE:TARGET:快Ｖ , 1.10
	TIMES SOURCE:TARGET:快Ａ , 1.10
	TIMES SOURCE:TARGET:快Ｂ , 1.10
	TIMES SOURCE:TARGET:道具快Ｃ , 1.10
	TIMES SOURCE:TARGET:道具快Ｖ , 1.10
	TIMES SOURCE:TARGET:道具快Ａ , 1.10
	TIMES SOURCE:TARGET:道具快Ｂ , 1.10
	TIMES SOURCE:TARGET:中毒充足 , 0.30
ELSEIF ABL:15 == 2
	TIMES SOURCE:TARGET:快Ｃ , 1.20
	TIMES SOURCE:TARGET:快Ｖ , 1.20
	TIMES SOURCE:TARGET:快Ａ , 1.20
	TIMES SOURCE:TARGET:快Ｂ , 1.20
	TIMES SOURCE:TARGET:道具快Ｃ , 1.20
	TIMES SOURCE:TARGET:道具快Ｖ , 1.20
	TIMES SOURCE:TARGET:道具快Ａ , 1.20
	TIMES SOURCE:TARGET:道具快Ｂ , 1.20
	TIMES SOURCE:TARGET:中毒充足 , 0.60
ELSEIF ABL:15 == 3
	TIMES SOURCE:TARGET:快Ｃ , 1.30
	TIMES SOURCE:TARGET:快Ｖ , 1.30
	TIMES SOURCE:TARGET:快Ａ , 1.30
	TIMES SOURCE:TARGET:快Ｂ , 1.30
	TIMES SOURCE:TARGET:道具快Ｃ , 1.30
	TIMES SOURCE:TARGET:道具快Ｖ , 1.30
	TIMES SOURCE:TARGET:道具快Ａ , 1.30
	TIMES SOURCE:TARGET:道具快Ｂ , 1.30
	TIMES SOURCE:TARGET:中毒充足 , 0.90
ELSEIF ABL:15 == 4
	TIMES SOURCE:TARGET:快Ｃ , 1.50
	TIMES SOURCE:TARGET:快Ｖ , 1.50
	TIMES SOURCE:TARGET:快Ａ , 1.50
	TIMES SOURCE:TARGET:快Ｂ , 1.50
	TIMES SOURCE:TARGET:道具快Ｃ , 1.50
	TIMES SOURCE:TARGET:道具快Ｖ , 1.50
	TIMES SOURCE:TARGET:道具快Ａ , 1.50
	TIMES SOURCE:TARGET:道具快Ｂ , 1.50
	TIMES SOURCE:TARGET:中毒充足 , 1.20
ELSEIF ABL:15 == 5
	TIMES SOURCE:TARGET:快Ｃ , 1.70
	TIMES SOURCE:TARGET:快Ｖ , 1.70
	TIMES SOURCE:TARGET:快Ａ , 1.50
	TIMES SOURCE:TARGET:快Ｂ , 1.50
	TIMES SOURCE:TARGET:中毒充足 , 1.50
ELSEIF ABL:15 == 6
	TIMES SOURCE:TARGET:快Ｃ , 2.00
	TIMES SOURCE:TARGET:快Ｖ , 2.00
	TIMES SOURCE:TARGET:快Ａ , 1.70
	TIMES SOURCE:TARGET:快Ｂ , 1.70
	TIMES SOURCE:TARGET:道具快Ｃ , 2.00
	TIMES SOURCE:TARGET:道具快Ｖ , 2.00
	TIMES SOURCE:TARGET:道具快Ａ , 1.70
	TIMES SOURCE:TARGET:道具快Ｂ , 1.70
	TIMES SOURCE:TARGET:中毒充足 , 1.80
ELSEIF ABL:15 == 7
	TIMES SOURCE:TARGET:快Ｃ , 2.30
	TIMES SOURCE:TARGET:快Ｖ , 2.30
	TIMES SOURCE:TARGET:快Ａ , 2.00
	TIMES SOURCE:TARGET:快Ｂ , 2.00
	TIMES SOURCE:TARGET:道具快Ｃ , 2.30
	TIMES SOURCE:TARGET:道具快Ｖ , 2.30
	TIMES SOURCE:TARGET:道具快Ａ , 2.00
	TIMES SOURCE:TARGET:道具快Ｂ , 2.00
	TIMES SOURCE:TARGET:中毒充足 , 2.10
ELSEIF ABL:15 == 8
	TIMES SOURCE:TARGET:快Ｃ , 2.50
	TIMES SOURCE:TARGET:快Ｖ , 2.50
	TIMES SOURCE:TARGET:快Ａ , 2.50
	TIMES SOURCE:TARGET:快Ｂ , 2.50
	TIMES SOURCE:TARGET:道具快Ｃ , 2.50
	TIMES SOURCE:TARGET:道具快Ｖ , 2.50
	TIMES SOURCE:TARGET:道具快Ａ , 2.50
	TIMES SOURCE:TARGET:道具快Ｂ , 2.50
	TIMES SOURCE:TARGET:中毒充足 , 2.40
ELSEIF ABL:15 == 9
	TIMES SOURCE:TARGET:快Ｃ , 3.00
	TIMES SOURCE:TARGET:快Ｖ , 3.00
	TIMES SOURCE:TARGET:快Ａ , 3.00
	TIMES SOURCE:TARGET:快Ｂ , 3.00
	TIMES SOURCE:TARGET:道具快Ｃ , 3.00
	TIMES SOURCE:TARGET:道具快Ｖ , 3.00
	TIMES SOURCE:TARGET:道具快Ａ , 3.00
	TIMES SOURCE:TARGET:道具快Ｂ , 3.00
	TIMES SOURCE:TARGET:中毒充足 , 3.00
ELSEIF ABL:15 >= 10
	TIMES SOURCE:TARGET:快Ｃ , 3.50
	TIMES SOURCE:TARGET:快Ｖ , 3.50
	TIMES SOURCE:TARGET:快Ａ , 3.50
	TIMES SOURCE:TARGET:快Ｂ , 3.50
	TIMES SOURCE:TARGET:道具快Ｃ , 3.50
	TIMES SOURCE:TARGET:道具快Ｖ , 3.50
	TIMES SOURCE:TARGET:道具快Ａ , 3.50
	TIMES SOURCE:TARGET:道具快Ｂ , 3.50
	TIMES SOURCE:TARGET:中毒充足 , 5.00
ENDIF


;-------------------------------------------------
;汚れの処理
;-------------------------------------------------
;奴隷の指⇔奴隷のＢの汚れが移動
CALL MOVE_STAIN("手", TARGET, "胸", TARGET)
;奴隷の指⇔奴隷のＶの汚れが移動
CALL MOVE_STAIN("手", TARGET, "ヴァギナ", TARGET)
;奴隷の胸⇔奴隷のＶの汚れが移動
CALL MOVE_STAIN("胸", TARGET, "ヴァギナ", TARGET)

;シャワーオナニーの場合汚れをリセット、潤滑更に半分。
IF TEQUIP:32 == 1
	RESET_STAIN TARGET
	PALAM:4 /= 2
ENDIF

;-------------------------------------------------
;経験の処理
;-------------------------------------------------
;ビデオ撮影時は経験にプラス
IF TEQUIP:28
	CALL ADDS_EXP("自慰経験", 2, TARGET)
	;PRINTL MasturbEXP＋２
	CALL ADDS_EXP("調教自慰経験", 2, TARGET)
	;PRINTL FrcMasturEXP＋２
ELSE
	CALL ADDS_EXP("自慰経験", 1, TARGET)
	;PRINTL MasturbEXP＋１
	CALL ADDS_EXP("調教自慰経験", 1, TARGET)
	;PRINTL FrcMasturEXP＋１
ENDIF
;公開オナニー時はAbnormalEXP付加
IF TEQUIP:28
	CALL ADDS_ABNORMAL_EXP("Public masturbation", TARGET)
;	EXP:50 += 1
;	PRINTL AbnormalEXP＋１
ENDIF

;撮影時の調教内容チェック
IF TEQUIP:13 && TEQUIP:14
	TFLAG:90 = 993
ELSEIF TEQUIP:13
	TFLAG:90 = 991
ELSEIF TEQUIP:14
	TFLAG:90 = 992
ELSEIF TEQUIP:32
	TFLAG:90 = 994
ENDIF

A = 3
IF IS_LESBIAN(TARGET,PLAYER)
	CALL ADDS_EXP("レズ経験", A, TARGET)
	CALL ADDS_EXP("レズ経験", A, PLAYER)
ELSEIF IS_GAY(TARGET,PLAYER)
	CALL ADDS_EXP("ＢＬ経験", A, TARGET)
	CALL ADDS_EXP("ＢＬ経験", A, PLAYER)
ENDIF

;依存度ベクトル
TFLAG:33 = 3

;依存度補正値(服従で1、隷属で2）
IF TALENT:5 && ASSIPLAY == 0
	TFLAG:30 += 1
ELSEIF TALENT:8 && ASSIPLAY == 0
	TFLAG:30 += 2
ENDIF


RETURN 1
;-------------------------------------------------
;実行判定処理
;胸自慰と同じ部分は胸自慰で処理
;-------------------------------------------------
@COM_ORDER_11, ARG, ARG:1
CALL COM_ORDER_10, ARG, ARG:1
;難易度上昇 公開で+10、バイブで+5、アナルバイブで+5、シャワーで＋3
;SIF TEQUIP:ARG:ビデオカメラ
;	CALL ADD_COM_ORDER, "EXTRA", "Video camera", -10, ARG, ARG:1
SIF TEQUIP:ARG:Vibrator
	CALL ADD_COM_ORDER, "EXTRA", "Vibrator", -5, ARG, ARG:1
SIF TEQUIP:ARG:アナルバイブ
	CALL ADD_COM_ORDER, "EXTRA", "Anal vibrator", -5, ARG, ARG:1
SIF TEQUIP:ARG:シャワー
	CALL ADD_COM_ORDER, "EXTRA", "シャワー", -3, ARG, ARG:1
;-------------------------------------------------
;実行値
;-------------------------------------------------
@COM_ORDER_NUM_11
RETURN 33

;===================================================
;調教タイプ
;===================================================
@COMTYPE_11
RETURN COMTYPE("愛撫系")
